2025-02-05 10:22:20 - __main__ - INFO - INIT_DB is true. Running database initialization.
2025-02-05 10:36:14 - root - ðŸ”´ ERROR - Invalid JSON in trace file: {"trace_id": "b733447575daafdb93fe99901384e0c8", "timestamp": "2025-01-16T10:17:44.447181", "tool": "General Agent", "query": "what are some of the uses of whale", "start_time": "2025-01-16T10:17:44.447181

2025-02-05 10:36:14 - root - ðŸ”´ ERROR - Invalid JSON in trace file: ", "tools_used": ["General Agent"], "duration": 5.671332, "error": null, "success": true, "processing_steps": ["Started research with General Agent", "Initializing search tool", "Configured GeneralSearch", "Preparing to process 10 content items", "Content processed - New: 0, Reused: 10", "Research completed successfully"], "content_new": 0, "content_reused": 10, "content_count": 10}

2025-02-05 10:36:14 - utils.token_tracking - ðŸ”µ INFO - Creating TokenUsageTracker singleton instance 128561330871696
2025-02-05 10:36:14 - root - ðŸ”´ ERROR - Invalid JSON in trace file: {"trace_id": "b733447575daafdb93fe99901384e0c8", "timestamp": "2025-01-16T10:17:44.447181", "tool": "General Agent", "query": "what are some of the uses of whale", "start_time": "2025-01-16T10:17:44.447181

2025-02-05 10:36:14 - root - ðŸ”´ ERROR - Invalid JSON in trace file: ", "tools_used": ["General Agent"], "duration": 5.671332, "error": null, "success": true, "processing_steps": ["Started research with General Agent", "Initializing search tool", "Configured GeneralSearch", "Preparing to process 10 content items", "Content processed - New: 0, Reused: 10", "Research completed successfully"], "content_new": 0, "content_reused": 10, "content_count": 10}

2025-02-05 10:36:14 - root - ðŸ”µ INFO - Database connection initialized successfully
2025-02-05 10:36:14 - research_components.components - ðŸ”µ INFO - Starting display_analysis
2025-02-05 10:36:14 - research_components.db - ðŸ”µ INFO - Retrieving analysis evaluations for query: None
2025-02-05 10:36:14 - root - ðŸ”´ ERROR - Invalid JSON in trace file: {"trace_id": "b733447575daafdb93fe99901384e0c8", "timestamp": "2025-01-16T10:17:44.447181", "tool": "General Agent", "query": "what are some of the uses of whale", "start_time": "2025-01-16T10:17:44.447181

2025-02-05 10:36:14 - root - ðŸ”´ ERROR - Invalid JSON in trace file: ", "tools_used": ["General Agent"], "duration": 5.671332, "error": null, "success": true, "processing_steps": ["Started research with General Agent", "Initializing search tool", "Configured GeneralSearch", "Preparing to process 10 content items", "Content processed - New: 0, Reused: 10", "Research completed successfully"], "content_new": 0, "content_reused": 10, "content_count": 10}

2025-02-05 10:36:14 - research_components.db - ðŸ”µ INFO - Retrieving accuracy evaluations for query: None
2025-02-05 10:36:14 - research_components.db - ðŸ”µ INFO - Retrieving source coverage evaluations for query: None
2025-02-05 10:36:14 - research_components.components - ðŸ”µ INFO - Processing Logical Coherence tab
2025-02-05 10:36:14 - research_components.db - ðŸ”µ INFO - Retrieving logical coherence evaluations for query: None
2025-02-05 10:36:14 - research_components.components - DEBUG - Retrieved 5 coherence evaluations
2025-02-05 10:36:14 - research_components.components - DEBUG - Created DataFrame with 5 rows
2025-02-05 10:36:14 - research_components.components - DEBUG - Available columns: ['id', 'query', 'timestamp', 'coherence_score', 'flow_score', 'has_argument_structure', 'has_discourse_markers', 'paragraph_score', 'rough_transitions', 'total_sentences', 'total_paragraphs', 'semantic_connection_score', 'idea_progression_score', 'logical_fallacies_count']
2025-02-05 10:36:14 - research_components.components - DEBUG - Converting timestamps to datetime
2025-02-05 10:36:14 - research_components.components - ðŸ”µ INFO - Average coherence score: 0.28
2025-02-05 10:36:14 - research_components.components - ðŸŸ  WARNING - No topic-related column found
2025-02-05 10:36:14 - research_components.components - ðŸ”µ INFO - Total logical fallacies: 6
2025-02-05 10:36:14 - research_components.components - ðŸ”µ INFO - Average idea progression: 0.02
2025-02-05 10:36:14 - research_components.db - ðŸ”µ INFO - Retrieving answer relevance evaluations for query: None
2025-02-05 10:36:15 - research_components.db - ðŸ”µ INFO - Retrieving accuracy evaluations for query: 
2025-02-05 10:36:15 - research_components.db - ðŸ”µ INFO - Retrieving answer relevance evaluations for query: 
2025-02-05 10:36:15 - research_components.db - ðŸ”µ INFO - Retrieving logical coherence evaluations for query: 
2025-02-05 10:36:15 - research_components.db - ðŸ”µ INFO - Retrieving source coverage evaluations for query: 
2025-02-05 10:42:26 - utils.token_tracking - INFO - Creating TokenUsageTracker singleton instance 133883032709840
2025-02-05 10:42:26 - research_components.research - INFO - Starting tool execution - Tool: Analysis Agent
2025-02-05 10:42:26 - utils.analysis_evaluator - INFO - Creating new AnalysisEvaluator instance
2025-02-05 10:42:26 - utils.analysis_evaluator - INFO - Initializing AnalysisEvaluator
2025-02-05 10:42:26 - root - INFO - Starting analysis for query: tell me something about the data
2025-02-05 10:42:26 - root - INFO - Data validation results: {'missing_data': {'applicants': 0, 'n': 0}, 'datatypes': {'applicants': dtype('O'), 'n': dtype('int64')}, 'row_count': 20, 'column_count': 2}
2025-02-05 10:42:26 - root - WARNING - Error in web research: name 'GoogleSerperAPIWrapper' is not defined
2025-02-05 10:42:26 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 10:42:26 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '**DATA ANALYSIS REPORT**  \n\n**Subject:** Analysis of {\'filename\': \'pat_app.csv\', \'shape\': (20, 2), \'columns\': [\'applicants\', \'n\'], \'dtypes\': {\'applicants\': dtype(\'O\'), \'n\': dtype(\'int64\')}, \'missing_values\': {\'applicants\': 0, \'n\': 0}, \'analysis_results\': {\'descriptive_stats\': {\'n\': {\'count\': 20.0, \'mean\': 5.75, \'std\': 2.7313964040009777, \'min\': 3.0, \'25%\': 4.0, \'50%\': 5.0, \'75%\': 7.25, \'max\': 14.0}}, \'correlations\': {\'n\': {\'n\': 1.0}}, \'missing_values\': {\'applicants\': 0, \'n\': 0}, \'unique_counts\': {\'applicants\': 20, \'n\': 8}, \'categorical_summaries\': {\'applicants\': {\'Procter & Gamble\': 1, \'3 In 1 Dental Pllc\': 1, \'Balwani Gul P\': 1, \'Alfa Biogene Int B V\': 1, \'Vital Solutions Swiss Ag\': 1, \'Univ Washington State\': 1, \'Univ Pretoria\': 1, \'Colgate Palmolive Co\': 1, \'Alfa Biogene Internat B V\': 1, \'Ionia Azure Ag\': 1, \'Hayashibara Co\': 1, \'Halliburton Energy Services Inc\': 1, \'Fujii Hajime\': 1, \'Buchwald-Werner Sybille\': 1, \'Warren Raphael\': 1, \'Undoo Llc\': 1, \'Senomyx Inc\': 1, \'Capsulent\': 1, \'Amino Up Chemical Co Ltd\': 1, \'Chan Jody Wai-Han\': 1}}, \'outliers\': {\'n\': 1}}, \'web_research\': []}  \n**Query Focus:** tell me something about the data  \n**Report Date:** [Current Date]  \n\n## **EXECUTIVE SUMMARY**  \n- This report presents key findings and their significance.  \n- The insights are analyzed in relation to industry trends, company behaviors, and economic implications.  \n- Notable patterns and unexpected results are highlighted.  \n\n## **REPORT CONTENTS**  \n\n### **I. DATASET OVERVIEW**  \n- The dataset\'s scope, purpose, and key attributes are outlined.  \n- The timeframe covered and any notable characteristics are detailed.  \n- Real-world context is provided, explaining the industries or entities represented and broader implications.  \n\n### **II. METHODOLOGY**  \n- The analytical approaches used are described.  \n- Statistical methods, models, or tools applied are listed.  \n- Data cleaning, transformations, and preprocessing steps are detailed.  \n\n### **III. KEY FINDINGS**  \n\n#### **A. Primary Insights**  \n- The most significant discoveries are summarized.  \n- Findings are supported with specific data points, percentages, and comparisons.  \n- The insights are linked to real-world contexts, specifying affected companies, sectors, or markets.  \n\n#### **B. Trends and Patterns**  \n- Overarching trends, recurring patterns, and anomalies are identified.  \n- Seasonal, cyclical, or geographic variations are highlighted.  \n- The relevance of these trends in business, economic, or technological contexts is analyzed.  \n\n### **IV. INDUSTRY CONTEXT**  \n- Findings are examined in relation to broader market or industry trends.  \n- Examples of real-world companies or organizations involved are included.  \n- For datasets like "pat_app" (patent applicants), the types of companies filing patents and their technological specializations are specified.  \n- Relevant external data points are incorporated to validate insights.  \n\n### **V. CONCLUSIONS**  \n- The most important takeaways are summarized.  \n- Actionable insights for decision-making are highlighted.  \n- Specific aspects of the original query are addressed with practical applications for businesses or policymakers.  \n\n'}, {'role': 'user', 'content': "Analyze the dataset 'pat_app.csv' in the context of the query: tell me something about the data.\n                            Include relevant insights from web research where applicable.\n                            Focus on connecting statistical findings with broader industry/research context."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 10:42:26 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 10:42:26 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 10:42:26 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x79c3f2db1c50>
2025-02-05 10:42:26 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x79c4208080e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 10:42:26 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x79c3f2c061d0>
2025-02-05 10:42:26 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 10:42:26 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 10:42:26 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 10:42:26 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 10:42:26 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 10:42:28 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 10:42:28 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d24b342bad4174-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5117'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'8.83s'), (b'x-request-id', b'req_01jkav8f9bfaqb3ed4w5hx6wtx'), (b'Set-Cookie', b'__cf_bm=9NDhHbKj5u4VncfddHnJte0YqclsuKfUQM8v7FN_XIE-1738752148-1.0.1.1-RKD9zoBZOBy1ItA9llkIRbG4z.l10B_L7IoORb_Wmiu_e60YJt.UFEBs6Sk1d0LtOJsCEgXZ6X9ciyXknExKTQ; path=/; expires=Wed, 05-Feb-25 11:12:28 GMT; domain=.groq.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 10:42:28 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 10:42:28 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 10:42:28 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 10:42:28 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 10:42:28 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 10:42:28 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 10:42:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d24b342bad4174-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5117', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '8.83s', 'x-request-id': 'req_01jkav8f9bfaqb3ed4w5hx6wtx', 'set-cookie': '__cf_bm=9NDhHbKj5u4VncfddHnJte0YqclsuKfUQM8v7FN_XIE-1738752148-1.0.1.1-RKD9zoBZOBy1ItA9llkIRbG4z.l10B_L7IoORb_Wmiu_e60YJt.UFEBs6Sk1d0LtOJsCEgXZ6X9ciyXknExKTQ; path=/; expires=Wed, 05-Feb-25 11:12:28 GMT; domain=.groq.com; HttpOnly; Secure; SameSite=None', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 10:42:28 - root - INFO - Inference completed in 2.41s
2025-02-05 10:42:28 - root - INFO - Tokens used - Input: 924, Output: 616, Total: 1540
2025-02-05 10:42:28 - root - INFO - Processing speed - 640.09 tokens/second
2025-02-05 10:42:28 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 10:42:28 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-prompt-test.txt
2025-02-05 10:42:28 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 10:42:28 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000647, Completion: $0.000431, Total: $0.001078
2025-02-05 10:42:28 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T10:42:28.716410
2025-02-05 10:42:28 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 10:42:28 - utils.token_tracking - INFO - Tokens used - Input: 924, Output: 616, Total: 1,540
2025-02-05 10:42:28 - utils.token_tracking - INFO - Processing speed - 3080.00 tokens/second
2025-02-05 10:42:28 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T10:42:28.716961', prompt_tokens=924, completion_tokens=616, model='llama3-70b-8192', prompt_id='dynamic-prompt-test.txt', cost=0.001078, total_tokens=1540, processing_time=0.5, processing_speed=3080.0)
2025-02-05 10:42:28 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 1 for instance 133883032709840
2025-02-05 10:42:28 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,540
2025-02-05 10:42:28 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192']
2025-02-05 10:42:28 - utils.analysis_evaluator - INFO - Starting comprehensive analysis evaluation
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Starting numerical accuracy evaluation
2025-02-05 10:42:28 - utils.analysis_evaluator - INFO - Found 0 numerical calculations to evaluate
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Starting query understanding evaluation
2025-02-05 10:42:28 - utils.analysis_evaluator - INFO - Analyzing query with 6 unique terms
2025-02-05 10:42:28 - utils.analysis_evaluator - INFO - Term coverage: 100.00% (6/6)
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Analytical element 'methodology': Present
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Analytical element 'findings': Present
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Analytical element 'statistics': Present
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Analytical element 'data_reference': Present
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Starting data validation evaluation
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Validation check 'missing_data': Missing
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Validation check 'outliers': Present
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Validation check 'distribution': Present
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Validation check 'data_types': Present
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Starting reasoning transparency evaluation
2025-02-05 10:42:28 - utils.analysis_evaluator - INFO - Analyzing 43 sentences for reasoning transparency
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Transparency check 'explains_steps': Missing
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Transparency check 'states_assumptions': Missing
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Transparency check 'mentions_limitations': Missing
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Transparency check 'cites_evidence': Present
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Transparency check 'has_conclusion': Missing
2025-02-05 10:42:28 - utils.analysis_evaluator - DEBUG - Transparency check 'has_examples': Missing
2025-02-05 10:42:28 - utils.analysis_evaluator - INFO - Average sentence length: 9.8 words
2025-02-05 10:42:28 - utils.analysis_evaluator - INFO - Numerical Accuracy score: 0.00%
2025-02-05 10:42:28 - utils.analysis_evaluator - INFO - Query Understanding score: 100.00%
2025-02-05 10:42:28 - utils.analysis_evaluator - INFO - Data Validation score: 75.00%
2025-02-05 10:42:28 - utils.analysis_evaluator - INFO - Reasoning Transparency score: 16.67%
2025-02-05 10:42:28 - utils.analysis_evaluator - INFO - Overall evaluation score: 47.92%
2025-02-05 10:42:28 - research_components.db - INFO - Storing analysis evaluation
2025-02-05 10:42:28 - research_components.db - INFO - Storing content result
2025-02-05 10:42:28 - research_components.db - INFO - Successfully stored content with ID: 29
2025-02-05 10:42:28 - research_components.db - INFO - Storing query trace
2025-02-05 10:42:28 - research_components.db - INFO - Closing database connection
2025-02-05 10:50:22 - research_components.research - INFO - Starting tool execution - Tool: General Agent
2025-02-05 10:50:22 - relevance_evaluator - INFO - Creating new AnswerRelevanceEvaluator instance
2025-02-05 10:50:22 - relevance_evaluator.evaluator - INFO - Initializing AnswerRelevanceEvaluator
2025-02-05 10:50:22 - relevance_evaluator.evaluator - DEBUG - Setting up spaCy pipeline
2025-02-05 10:50:22 - relevance_evaluator.evaluator - DEBUG - SpaCy pipeline components: sentencizer
2025-02-05 10:50:22 - relevance_evaluator.evaluator - DEBUG - Configuring TF-IDF vectorizer
2025-02-05 10:50:22 - relevance_evaluator.evaluator - DEBUG - Successfully initialized TfidfVectorizer
2025-02-05 10:50:22 - relevance_evaluator.evaluator - DEBUG - Vectorizer parameters: {'analyzer': 'word', 'binary': False, 'decode_error': 'strict', 'dtype': <class 'numpy.float64'>, 'encoding': 'utf-8', 'input': 'content', 'lowercase': True, 'max_df': 1.0, 'max_features': 5000, 'min_df': 1, 'ngram_range': (1, 1), 'norm': 'l2', 'preprocessor': None, 'smooth_idf': True, 'stop_words': 'english', 'strip_accents': 'unicode', 'sublinear_tf': False, 'token_pattern': '(?u)\\b\\w\\w+\\b', 'tokenizer': None, 'use_idf': True, 'vocabulary': None}
2025-02-05 10:50:22 - root - INFO - Starting news search for query: Sclerocarya birrea
2025-02-05 10:50:22 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): google.serper.dev:443
2025-02-05 10:50:23 - urllib3.connectionpool - DEBUG - https://google.serper.dev:443 "POST /news?q=Sclerocarya+birrea&gl=us&hl=en&num=10 HTTP/1.1" 200 5627
2025-02-05 10:50:23 - root - INFO - Processing 10 articles for topic: Sclerocarya birrea
2025-02-05 10:50:23 - root - ERROR - Error in decide_what_to_use: 'snippets'
2025-02-05 10:50:23 - root - INFO - Starting to scrape 10 news pages
2025-02-05 10:50:25 - root - INFO - Attempting to scrape content from www.globalcapital.com
2025-02-05 10:50:25 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.globalcapital.com:443
2025-02-05 10:50:26 - urllib3.connectionpool - DEBUG - https://www.globalcapital.com:443 "GET /article/2edj62kwogsh1wcqviebk/primary-market-monitor/high-yielders-take-a-greater-share-in-record-january-for-ceemea HTTP/1.1" 200 46003
2025-02-05 10:50:27 - root - INFO - Successfully scraped https://www.globalcapital.com/article/2edj62kwogsh1wcqviebk/primary-market-monitor/high-yielders-take-a-greater-share-in-record-january-for-ceemea (384 chars)
2025-02-05 10:50:29 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 10:50:29 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 10:50:30 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full HTTP/1.1" 200 None
2025-02-05 10:50:31 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full (423 chars)
2025-02-05 10:50:33 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 10:50:33 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 10:50:34 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/26059/ HTTP/1.1" 200 30958
2025-02-05 10:50:34 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/26059/ (3516 chars)
2025-02-05 10:50:36 - root - INFO - Attempting to scrape content from www.goodhousekeeping.com
2025-02-05 10:50:36 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.goodhousekeeping.com:443
2025-02-05 10:50:38 - urllib3.connectionpool - DEBUG - https://www.goodhousekeeping.com:443 "GET /uk/beauty/skincare/a33793243/marula-oil/ HTTP/1.1" 200 None
2025-02-05 10:50:38 - root - INFO - Successfully scraped https://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/ (6088 chars)
2025-02-05 10:50:40 - root - INFO - Attempting to scrape content from www.medicalnewstoday.com
2025-02-05 10:50:40 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.medicalnewstoday.com:443
2025-02-05 10:50:40 - urllib3.connectionpool - DEBUG - https://www.medicalnewstoday.com:443 "GET /articles/marula-oil HTTP/1.1" 200 None
2025-02-05 10:50:40 - root - INFO - Successfully scraped https://www.medicalnewstoday.com/articles/marula-oil (5987 chars)
2025-02-05 10:50:42 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 10:50:42 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 10:50:43 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/chemistry/articles/10.3389/fchem.2021.670530/full HTTP/1.1" 200 None
2025-02-05 10:50:44 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full (218 chars)
2025-02-05 10:50:46 - root - INFO - Attempting to scrape content from www.sciencedirect.com
2025-02-05 10:50:46 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.sciencedirect.com:443
2025-02-05 10:50:46 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /science/article/pii/S0378874115301963 HTTP/1.1" 302 143
2025-02-05 10:50:46 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /unsupported_browser HTTP/1.1" 400 None
2025-02-05 10:50:46 - root - ERROR - Error scraping https://www.sciencedirect.com/science/article/pii/S0378874115301963: 400 Client Error: Bad Request for url: https://www.sciencedirect.com/unsupported_browser
2025-02-05 10:50:48 - root - INFO - Attempting to scrape content from nit.com.au
2025-02-05 10:50:48 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): nit.com.au:443
2025-02-05 10:50:48 - urllib3.connectionpool - DEBUG - https://nit.com.au:443 "GET /08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end HTTP/1.1" 403 None
2025-02-05 10:50:48 - root - ERROR - Error scraping https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end: 403 Client Error: Forbidden for url: https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end
2025-02-05 10:50:50 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 10:50:50 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 10:50:54 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/27070/ HTTP/1.1" 200 30533
2025-02-05 10:50:54 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/27070/ (3502 chars)
2025-02-05 10:50:56 - root - INFO - Attempting to scrape content from onlinelibrary.wiley.com
2025-02-05 10:50:56 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): onlinelibrary.wiley.com:443
2025-02-05 10:50:56 - urllib3.connectionpool - DEBUG - https://onlinelibrary.wiley.com:443 "GET /doi/abs/10.1111/aec.12983 HTTP/1.1" 403 None
2025-02-05 10:50:56 - root - ERROR - Error scraping https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983: 403 Client Error: Forbidden for url: https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983
2025-02-05 10:50:56 - root - INFO - Successfully scraped 7 pages out of 10 attempted
2025-02-05 10:50:56 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 10:50:56 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "Analyze and summarize the following search results:\n                \n                Query: Sclerocarya birrea\n                \n                Search Results:\n                ### High yielders take a greater share in record January for CEEMEA bond issuance - 18 hours ago\nhttps://www.globalcapital.com/article/2edj62kwogsh1wcqviebk/primary-market-monitor/high-yielders-take-a-greater-share-in-record-january-for-ceemea\n\n\n### The future of African wild fruits â€“ a drive towards responsible production and consumption of the marula fruit - Jun 25, 2024\nhttps://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full\n\n\n### Preliminary nutritional analysis of marula (Sclerocarya birrea) fruits from two Kenyan provenances - May 22, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/26059/\n\n\n### Meet the wonder oil for your skin and hair - 3 weeks ago\nhttps://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/\n\n\n### Marula oil: Benefits, side effects, and how to use it - Apr 11, 2022\nhttps://www.medicalnewstoday.com/articles/marula-oil\n\n\n### Determination of Phenolics and Flavonoids of Some Useful Medicinal Plants and Bioassay-Guided Fractionation Substances of Sclerocarya birrea (A. Rich) Hochst Stem (Bark) Extract and Their Efficacy Against Salmonella typhi - Jun 26, 2024\nhttps://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full\n\n\n### Safety and efficacy of Sclerocarya birrea (A.Rich.) Hochst (Marula) oil: A clinical perspective - Dec 24, 2015\nhttps://www.sciencedirect.com/science/article/pii/S0378874115301963\n\n\n### Mangarri Man: the mighty marula tree could flourish in Australia's top end - Aug 8, 2024\nhttps://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end\n\n\n### Ecology and biology of Uapaca kirkiana, Strychnos cocculoides and Sclerocarya birrea in Southern Africa - Aug 31, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/27070/\n\n\n### Severe simulated herbivory constrains Sclerocarya birrea saplings regardless of resource availability - Dec 2, 2020\nhttps://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983\n\n                \n                Provide a comprehensive summary grouped by themes and include relevant links."}, {'role': 'user', 'content': "Summarize and group the search results based on this: 'Sclerocarya birrea'. Include links, dates, and snippets from the search results."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 10:50:56 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 10:50:56 - httpcore.connection - DEBUG - close.started
2025-02-05 10:50:56 - httpcore.connection - DEBUG - close.complete
2025-02-05 10:50:56 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 10:50:56 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x79c3f23c0a50>
2025-02-05 10:50:56 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x79c4208080e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 10:50:56 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x79c3f23c2210>
2025-02-05 10:50:56 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 10:50:56 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 10:50:56 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 10:50:56 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 10:50:56 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 10:50:59 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 10:50:59 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d257a9e92085ad-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5385'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'6.15s'), (b'x-request-id', b'req_01jkavr1p2fdab7fs5vkw8xmdn'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 10:50:59 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 10:50:59 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 10:50:59 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 10:50:59 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 10:50:59 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 10:50:59 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 10:50:59 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d257a9e92085ad-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5385', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '6.15s', 'x-request-id': 'req_01jkavr1p2fdab7fs5vkw8xmdn', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 10:50:59 - root - INFO - Inference completed in 3.02s
2025-02-05 10:50:59 - root - INFO - Tokens used - Input: 678, Output: 821, Total: 1499
2025-02-05 10:50:59 - root - INFO - Processing speed - 496.99 tokens/second
2025-02-05 10:50:59 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 10:50:59 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-summary-prompt
2025-02-05 10:50:59 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 10:50:59 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000475, Completion: $0.000575, Total: $0.001049
2025-02-05 10:50:59 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T10:50:59.690714
2025-02-05 10:50:59 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 10:50:59 - utils.token_tracking - INFO - Tokens used - Input: 678, Output: 821, Total: 1,499
2025-02-05 10:50:59 - utils.token_tracking - INFO - Processing speed - 2998.00 tokens/second
2025-02-05 10:50:59 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T10:50:59.691095', prompt_tokens=678, completion_tokens=821, model='llama3-70b-8192', prompt_id='dynamic-summary-prompt', cost=0.0010493, total_tokens=1499, processing_time=0.5, processing_speed=2998.0)
2025-02-05 10:50:59 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 2 for instance 133883032709840
2025-02-05 10:50:59 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 3,039
2025-02-05 10:50:59 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 10:50:59 - root - INFO - Generated summary of news articles
2025-02-05 10:51:00 - research_components.db - INFO - Storing accuracy evaluation
2025-02-05 10:51:00 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 10:51:00 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: factual_accuracy
2025-02-05 10:51:00 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 10:51:00 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 10:51:00 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T10:51:00.220878
2025-02-05 10:51:00 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 10:51:00 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 10:51:00 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 10:51:00 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T10:51:00.221888', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='factual_accuracy', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 10:51:00 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 3 for instance 133883032709840
2025-02-05 10:51:00 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 3,189
2025-02-05 10:51:00 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 10:51:00 - research_components.db - INFO - Storing source coverage evaluation
2025-02-05 10:51:00 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 10:51:00 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: source_coverage
2025-02-05 10:51:00 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 10:51:00 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 10:51:00 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T10:51:00.254338
2025-02-05 10:51:00 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 10:51:00 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 10:51:00 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 10:51:00 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T10:51:00.255213', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='source_coverage', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 10:51:00 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 4 for instance 133883032709840
2025-02-05 10:51:00 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 3,339
2025-02-05 10:51:00 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 10:51:00 - research_components.research - ERROR - Error processing content and evaluations: Incompatible dimension for X and Y matrices: X.shape[1] == 67 while Y.shape[1] == 66
Traceback (most recent call last):
  File "/app/research_components/research.py", line 129, in run_tool
    coherence_score, coherence_details = coherence_evaluator.evaluate_logical_coherence(result)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/utils/logical_coherence.py", line 115, in evaluate_logical_coherence
    transition_scores = [
                        ^
  File "/app/utils/logical_coherence.py", line 116, in <listcomp>
    cosine_similarity(
  File "/usr/local/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 211, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 1577, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 190, in check_pairwise_arrays
    raise ValueError(
ValueError: Incompatible dimension for X and Y matrices: X.shape[1] == 67 while Y.shape[1] == 66
2025-02-05 10:51:00 - research_components.db - INFO - Storing query trace
2025-02-05 10:51:00 - research_components.db - INFO - Closing database connection
2025-02-05 10:53:03 - research_components.research - INFO - Starting tool execution - Tool: General Agent
2025-02-05 10:53:03 - relevance_evaluator - INFO - Creating new AnswerRelevanceEvaluator instance
2025-02-05 10:53:03 - relevance_evaluator.evaluator - INFO - Initializing AnswerRelevanceEvaluator
2025-02-05 10:53:03 - relevance_evaluator.evaluator - DEBUG - Setting up spaCy pipeline
2025-02-05 10:53:03 - relevance_evaluator.evaluator - DEBUG - SpaCy pipeline components: sentencizer
2025-02-05 10:53:03 - relevance_evaluator.evaluator - DEBUG - Configuring TF-IDF vectorizer
2025-02-05 10:53:03 - relevance_evaluator.evaluator - DEBUG - Successfully initialized TfidfVectorizer
2025-02-05 10:53:03 - relevance_evaluator.evaluator - DEBUG - Vectorizer parameters: {'analyzer': 'word', 'binary': False, 'decode_error': 'strict', 'dtype': <class 'numpy.float64'>, 'encoding': 'utf-8', 'input': 'content', 'lowercase': True, 'max_df': 1.0, 'max_features': 5000, 'min_df': 1, 'ngram_range': (1, 1), 'norm': 'l2', 'preprocessor': None, 'smooth_idf': True, 'stop_words': 'english', 'strip_accents': 'unicode', 'sublinear_tf': False, 'token_pattern': '(?u)\\b\\w\\w+\\b', 'tokenizer': None, 'use_idf': True, 'vocabulary': None}
2025-02-05 10:53:03 - root - INFO - Starting news search for query: Sclerocarya birrea
2025-02-05 10:53:03 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): google.serper.dev:443
2025-02-05 10:53:04 - urllib3.connectionpool - DEBUG - https://google.serper.dev:443 "POST /news?q=Sclerocarya+birrea&gl=us&hl=en&num=10 HTTP/1.1" 200 5473
2025-02-05 10:53:04 - root - INFO - Processing 10 articles for topic: Sclerocarya birrea
2025-02-05 10:53:04 - root - ERROR - Error in decide_what_to_use: 'snippets'
2025-02-05 10:53:04 - root - INFO - Starting to scrape 10 news pages
2025-02-05 10:53:06 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 10:53:06 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 10:53:08 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full HTTP/1.1" 200 None
2025-02-05 10:53:08 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full (423 chars)
2025-02-05 10:53:10 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 10:53:10 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 10:53:11 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/26059/ HTTP/1.1" 200 30958
2025-02-05 10:53:11 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/26059/ (3516 chars)
2025-02-05 10:53:13 - root - INFO - Attempting to scrape content from www.goodhousekeeping.com
2025-02-05 10:53:13 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.goodhousekeeping.com:443
2025-02-05 10:53:13 - urllib3.connectionpool - DEBUG - https://www.goodhousekeeping.com:443 "GET /uk/beauty/skincare/a33793243/marula-oil/ HTTP/1.1" 200 None
2025-02-05 10:53:13 - root - INFO - Successfully scraped https://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/ (6088 chars)
2025-02-05 10:53:15 - root - INFO - Attempting to scrape content from www.medicalnewstoday.com
2025-02-05 10:53:15 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.medicalnewstoday.com:443
2025-02-05 10:53:16 - urllib3.connectionpool - DEBUG - https://www.medicalnewstoday.com:443 "GET /articles/marula-oil HTTP/1.1" 200 None
2025-02-05 10:53:17 - root - INFO - Successfully scraped https://www.medicalnewstoday.com/articles/marula-oil (5987 chars)
2025-02-05 10:53:19 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 10:53:19 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 10:53:19 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/chemistry/articles/10.3389/fchem.2021.670530/full HTTP/1.1" 200 None
2025-02-05 10:53:19 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full (218 chars)
2025-02-05 10:53:21 - root - INFO - Attempting to scrape content from www.sciencedirect.com
2025-02-05 10:53:21 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.sciencedirect.com:443
2025-02-05 10:53:22 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /science/article/pii/S0378874115301963 HTTP/1.1" 302 143
2025-02-05 10:53:22 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /unsupported_browser HTTP/1.1" 400 None
2025-02-05 10:53:22 - root - ERROR - Error scraping https://www.sciencedirect.com/science/article/pii/S0378874115301963: 400 Client Error: Bad Request for url: https://www.sciencedirect.com/unsupported_browser
2025-02-05 10:53:24 - root - INFO - Attempting to scrape content from nit.com.au
2025-02-05 10:53:24 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): nit.com.au:443
2025-02-05 10:53:24 - urllib3.connectionpool - DEBUG - https://nit.com.au:443 "GET /08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end HTTP/1.1" 403 None
2025-02-05 10:53:24 - root - ERROR - Error scraping https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end: 403 Client Error: Forbidden for url: https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end
2025-02-05 10:53:26 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 10:53:26 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 10:53:27 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/27070/ HTTP/1.1" 200 30553
2025-02-05 10:53:27 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/27070/ (3502 chars)
2025-02-05 10:53:29 - root - INFO - Attempting to scrape content from onlinelibrary.wiley.com
2025-02-05 10:53:29 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): onlinelibrary.wiley.com:443
2025-02-05 10:53:29 - urllib3.connectionpool - DEBUG - https://onlinelibrary.wiley.com:443 "GET /doi/abs/10.1111/aec.12983 HTTP/1.1" 403 None
2025-02-05 10:53:29 - root - ERROR - Error scraping https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983: 403 Client Error: Forbidden for url: https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983
2025-02-05 10:53:31 - root - INFO - Attempting to scrape content from www.givaudan.com
2025-02-05 10:53:31 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.givaudan.com:443
2025-02-05 10:53:36 - urllib3.connectionpool - DEBUG - https://www.givaudan.com:443 "GET /fragrance-beauty/active-beauty/products/marula-oil HTTP/1.1" 200 None
2025-02-05 10:53:36 - root - INFO - Successfully scraped https://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil (1038 chars)
2025-02-05 10:53:36 - root - INFO - Successfully scraped 7 pages out of 10 attempted
2025-02-05 10:53:36 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 10:53:36 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "Analyze and summarize the following search results:\n                \n                Query: Sclerocarya birrea\n                \n                Search Results:\n                ### The future of African wild fruits â€“ a drive towards responsible production and consumption of the marula fruit - Jun 25, 2024\nhttps://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full\n\n\n### Preliminary nutritional analysis of marula (Sclerocarya birrea) fruits from two Kenyan provenances - May 22, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/26059/\n\n\n### Meet the wonder oil for your skin and hair - 3 weeks ago\nhttps://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/\n\n\n### Marula oil: Benefits, side effects, and how to use it - Apr 11, 2022\nhttps://www.medicalnewstoday.com/articles/marula-oil\n\n\n### Determination of Phenolics and Flavonoids of Some Useful Medicinal Plants and Bioassay-Guided Fractionation Substances of Sclerocarya birrea (A. Rich) Hochst Stem (Bark) Extract and Their Efficacy Against Salmonella typhi - Jun 26, 2024\nhttps://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full\n\n\n### Safety and efficacy of Sclerocarya birrea (A.Rich.) Hochst (Marula) oil: A clinical perspective - Dec 24, 2015\nhttps://www.sciencedirect.com/science/article/pii/S0378874115301963\n\n\n### Mangarri Man: the mighty marula tree could flourish in Australia's top end - Aug 8, 2024\nhttps://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end\n\n\n### Ecology and biology of Uapaca kirkiana, Strychnos cocculoides and Sclerocarya birrea in Southern Africa - Aug 31, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/27070/\n\n\n### Severe simulated herbivory constrains Sclerocarya birrea saplings regardless of resource availability - Dec 2, 2020\nhttps://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983\n\n\n### Marula oil - Aug 2, 2023\nhttps://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil\n\n                \n                Provide a comprehensive summary grouped by themes and include relevant links."}, {'role': 'user', 'content': "Summarize and group the search results based on this: 'Sclerocarya birrea'. Include links, dates, and snippets from the search results."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 10:53:36 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 10:53:36 - httpcore.connection - DEBUG - close.started
2025-02-05 10:53:36 - httpcore.connection - DEBUG - close.complete
2025-02-05 10:53:36 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 10:53:36 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x79c3f0b3da90>
2025-02-05 10:53:36 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x79c4208080e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 10:53:36 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x79c3f0b3d310>
2025-02-05 10:53:36 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 10:53:36 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 10:53:36 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 10:53:36 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 10:53:36 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 10:53:38 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 10:53:38 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d25b8eadfe403d-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5419'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'5.81s'), (b'x-request-id', b'req_01jkavwxdvfkn8ghm6skr5xfnq'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 10:53:38 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 10:53:38 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 10:53:38 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 10:53:38 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 10:53:38 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 10:53:38 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 10:53:38 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d25b8eadfe403d-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5419', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '5.81s', 'x-request-id': 'req_01jkavwxdvfkn8ghm6skr5xfnq', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 10:53:38 - root - INFO - Inference completed in 2.32s
2025-02-05 10:53:38 - root - INFO - Tokens used - Input: 648, Output: 661, Total: 1309
2025-02-05 10:53:38 - root - INFO - Processing speed - 564.58 tokens/second
2025-02-05 10:53:38 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 10:53:38 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-summary-prompt
2025-02-05 10:53:38 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 10:53:38 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000454, Completion: $0.000463, Total: $0.000916
2025-02-05 10:53:38 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T10:53:38.703646
2025-02-05 10:53:38 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 10:53:38 - utils.token_tracking - INFO - Tokens used - Input: 648, Output: 661, Total: 1,309
2025-02-05 10:53:38 - utils.token_tracking - INFO - Processing speed - 2618.00 tokens/second
2025-02-05 10:53:38 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T10:53:38.704120', prompt_tokens=648, completion_tokens=661, model='llama3-70b-8192', prompt_id='dynamic-summary-prompt', cost=0.0009163000000000001, total_tokens=1309, processing_time=0.5, processing_speed=2618.0)
2025-02-05 10:53:38 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 5 for instance 133883032709840
2025-02-05 10:53:38 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 4,648
2025-02-05 10:53:38 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 10:53:38 - root - INFO - Generated summary of news articles
2025-02-05 10:53:38 - research_components.db - INFO - Storing accuracy evaluation
2025-02-05 10:53:38 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 10:53:38 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: factual_accuracy
2025-02-05 10:53:38 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 10:53:38 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 10:53:38 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T10:53:38.941781
2025-02-05 10:53:38 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 10:53:38 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 10:53:38 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 10:53:38 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T10:53:38.942091', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='factual_accuracy', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 10:53:38 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 6 for instance 133883032709840
2025-02-05 10:53:38 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 4,798
2025-02-05 10:53:38 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 10:53:38 - research_components.db - INFO - Storing source coverage evaluation
2025-02-05 10:53:38 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 10:53:38 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: source_coverage
2025-02-05 10:53:38 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 10:53:38 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 10:53:38 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T10:53:38.967581
2025-02-05 10:53:38 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 10:53:38 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 10:53:38 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 10:53:38 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T10:53:38.968033', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='source_coverage', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 10:53:38 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 7 for instance 133883032709840
2025-02-05 10:53:38 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 4,948
2025-02-05 10:53:38 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 10:53:38 - research_components.research - ERROR - Error processing content and evaluations: Incompatible dimension for X and Y matrices: X.shape[1] == 222 while Y.shape[1] == 163
Traceback (most recent call last):
  File "/app/research_components/research.py", line 129, in run_tool
    coherence_score, coherence_details = coherence_evaluator.evaluate_logical_coherence(result)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/utils/logical_coherence.py", line 115, in evaluate_logical_coherence
    transition_scores = [
                        ^
  File "/app/utils/logical_coherence.py", line 116, in <listcomp>
    cosine_similarity(
  File "/usr/local/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 211, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 1577, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 190, in check_pairwise_arrays
    raise ValueError(
ValueError: Incompatible dimension for X and Y matrices: X.shape[1] == 222 while Y.shape[1] == 163
2025-02-05 10:53:38 - research_components.db - INFO - Storing query trace
2025-02-05 10:53:39 - research_components.db - INFO - Closing database connection
2025-02-05 10:57:49 - research_components.research - INFO - Starting tool execution - Tool: General Agent
2025-02-05 10:57:49 - relevance_evaluator - INFO - Creating new AnswerRelevanceEvaluator instance
2025-02-05 10:57:49 - relevance_evaluator.evaluator - INFO - Initializing AnswerRelevanceEvaluator
2025-02-05 10:57:49 - relevance_evaluator.evaluator - DEBUG - Setting up spaCy pipeline
2025-02-05 10:57:49 - relevance_evaluator.evaluator - DEBUG - SpaCy pipeline components: sentencizer
2025-02-05 10:57:49 - relevance_evaluator.evaluator - DEBUG - Configuring TF-IDF vectorizer
2025-02-05 10:57:49 - relevance_evaluator.evaluator - DEBUG - Successfully initialized TfidfVectorizer
2025-02-05 10:57:49 - relevance_evaluator.evaluator - DEBUG - Vectorizer parameters: {'analyzer': 'word', 'binary': False, 'decode_error': 'strict', 'dtype': <class 'numpy.float64'>, 'encoding': 'utf-8', 'input': 'content', 'lowercase': True, 'max_df': 1.0, 'max_features': 5000, 'min_df': 1, 'ngram_range': (1, 1), 'norm': 'l2', 'preprocessor': None, 'smooth_idf': True, 'stop_words': 'english', 'strip_accents': 'unicode', 'sublinear_tf': False, 'token_pattern': '(?u)\\b\\w\\w+\\b', 'tokenizer': None, 'use_idf': True, 'vocabulary': None}
2025-02-05 10:57:49 - root - INFO - Starting news search for query: Sclerocarya birrea
2025-02-05 10:57:49 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): google.serper.dev:443
2025-02-05 10:57:50 - urllib3.connectionpool - DEBUG - https://google.serper.dev:443 "POST /news?q=Sclerocarya+birrea&gl=us&hl=en&num=10 HTTP/1.1" 200 5627
2025-02-05 10:57:50 - root - INFO - Processing 10 articles for topic: Sclerocarya birrea
2025-02-05 10:57:50 - root - ERROR - Error in decide_what_to_use: 'snippets'
2025-02-05 10:57:50 - root - INFO - Starting to scrape 10 news pages
2025-02-05 10:57:52 - root - INFO - Attempting to scrape content from www.globalcapital.com
2025-02-05 10:57:52 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.globalcapital.com:443
2025-02-05 10:57:54 - urllib3.connectionpool - DEBUG - https://www.globalcapital.com:443 "GET /article/2edj62kwogsh1wcqviebk/primary-market-monitor/high-yielders-take-a-greater-share-in-record-january-for-ceemea HTTP/1.1" 200 46006
2025-02-05 10:57:54 - root - INFO - Successfully scraped https://www.globalcapital.com/article/2edj62kwogsh1wcqviebk/primary-market-monitor/high-yielders-take-a-greater-share-in-record-january-for-ceemea (384 chars)
2025-02-05 10:57:56 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 10:57:56 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 10:58:09 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full HTTP/1.1" 200 None
2025-02-05 10:58:10 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full (423 chars)
2025-02-05 10:58:12 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 10:58:12 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 10:58:13 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/26059/ HTTP/1.1" 200 30958
2025-02-05 10:58:13 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/26059/ (3516 chars)
2025-02-05 10:58:15 - root - INFO - Attempting to scrape content from www.goodhousekeeping.com
2025-02-05 10:58:15 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.goodhousekeeping.com:443
2025-02-05 10:58:15 - urllib3.connectionpool - DEBUG - https://www.goodhousekeeping.com:443 "GET /uk/beauty/skincare/a33793243/marula-oil/ HTTP/1.1" 200 None
2025-02-05 10:58:15 - root - INFO - Successfully scraped https://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/ (6088 chars)
2025-02-05 10:58:17 - root - INFO - Attempting to scrape content from www.medicalnewstoday.com
2025-02-05 10:58:17 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.medicalnewstoday.com:443
2025-02-05 10:58:18 - urllib3.connectionpool - DEBUG - https://www.medicalnewstoday.com:443 "GET /articles/marula-oil HTTP/1.1" 200 None
2025-02-05 10:58:19 - root - INFO - Successfully scraped https://www.medicalnewstoday.com/articles/marula-oil (5987 chars)
2025-02-05 10:58:21 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 10:58:21 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 10:58:22 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/chemistry/articles/10.3389/fchem.2021.670530/full HTTP/1.1" 200 None
2025-02-05 10:58:22 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full (218 chars)
2025-02-05 10:58:24 - root - INFO - Attempting to scrape content from www.sciencedirect.com
2025-02-05 10:58:24 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.sciencedirect.com:443
2025-02-05 10:58:24 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /science/article/pii/S0378874115301963 HTTP/1.1" 302 143
2025-02-05 10:58:24 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /unsupported_browser HTTP/1.1" 400 None
2025-02-05 10:58:24 - root - ERROR - Error scraping https://www.sciencedirect.com/science/article/pii/S0378874115301963: 400 Client Error: Bad Request for url: https://www.sciencedirect.com/unsupported_browser
2025-02-05 10:58:26 - root - INFO - Attempting to scrape content from nit.com.au
2025-02-05 10:58:26 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): nit.com.au:443
2025-02-05 10:58:27 - urllib3.connectionpool - DEBUG - https://nit.com.au:443 "GET /08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end HTTP/1.1" 403 None
2025-02-05 10:58:27 - root - ERROR - Error scraping https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end: 403 Client Error: Forbidden for url: https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end
2025-02-05 10:58:29 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 10:58:29 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 10:58:30 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/27070/ HTTP/1.1" 200 30553
2025-02-05 10:58:30 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/27070/ (3502 chars)
2025-02-05 10:58:32 - root - INFO - Attempting to scrape content from onlinelibrary.wiley.com
2025-02-05 10:58:32 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): onlinelibrary.wiley.com:443
2025-02-05 10:58:32 - urllib3.connectionpool - DEBUG - https://onlinelibrary.wiley.com:443 "GET /doi/abs/10.1111/aec.12983 HTTP/1.1" 403 None
2025-02-05 10:58:32 - root - ERROR - Error scraping https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983: 403 Client Error: Forbidden for url: https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983
2025-02-05 10:58:32 - root - INFO - Successfully scraped 7 pages out of 10 attempted
2025-02-05 10:58:32 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 10:58:32 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "Analyze and summarize the following search results:\n                \n                Query: Sclerocarya birrea\n                \n                Search Results:\n                ### High yielders take a greater share in record January for CEEMEA bond issuance - 18 hours ago\nhttps://www.globalcapital.com/article/2edj62kwogsh1wcqviebk/primary-market-monitor/high-yielders-take-a-greater-share-in-record-january-for-ceemea\n\n\n### The future of African wild fruits â€“ a drive towards responsible production and consumption of the marula fruit - Jun 25, 2024\nhttps://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full\n\n\n### Preliminary nutritional analysis of marula (Sclerocarya birrea) fruits from two Kenyan provenances - May 22, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/26059/\n\n\n### Meet the wonder oil for your skin and hair - 3 weeks ago\nhttps://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/\n\n\n### Marula oil: Benefits, side effects, and how to use it - Apr 11, 2022\nhttps://www.medicalnewstoday.com/articles/marula-oil\n\n\n### Determination of Phenolics and Flavonoids of Some Useful Medicinal Plants and Bioassay-Guided Fractionation Substances of Sclerocarya birrea (A. Rich) Hochst Stem (Bark) Extract and Their Efficacy Against Salmonella typhi - Jun 26, 2024\nhttps://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full\n\n\n### Safety and efficacy of Sclerocarya birrea (A.Rich.) Hochst (Marula) oil: A clinical perspective - Dec 24, 2015\nhttps://www.sciencedirect.com/science/article/pii/S0378874115301963\n\n\n### Mangarri Man: the mighty marula tree could flourish in Australia's top end - Aug 8, 2024\nhttps://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end\n\n\n### Ecology and biology of Uapaca kirkiana, Strychnos cocculoides and Sclerocarya birrea in Southern Africa - Aug 31, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/27070/\n\n\n### Severe simulated herbivory constrains Sclerocarya birrea saplings regardless of resource availability - Dec 2, 2020\nhttps://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983\n\n                \n                Provide a comprehensive summary grouped by themes and include relevant links."}, {'role': 'user', 'content': "Summarize and group the search results based on this: 'Sclerocarya birrea'. Include links, dates, and snippets from the search results."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 10:58:32 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 10:58:32 - httpcore.connection - DEBUG - close.started
2025-02-05 10:58:32 - httpcore.connection - DEBUG - close.complete
2025-02-05 10:58:32 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 10:58:32 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x79c3f1145610>
2025-02-05 10:58:32 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x79c4208080e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 10:58:32 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x79c3f12f2e10>
2025-02-05 10:58:32 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 10:58:32 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 10:58:32 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 10:58:32 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 10:58:32 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 10:58:34 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 10:58:34 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d262c9590285ad-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5385'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'6.15s'), (b'x-request-id', b'req_01jkaw5ykfe6388xyd3n45c3he'), (b'Set-Cookie', b'__cf_bm=D1TQVtr9YRCANpFoxdkvcMldSay5Vwkqsn_zEaSvPsM-1738753114-1.0.1.1-WMqboTPBNp2b3qjDMr6I0yn4aUPWwk9UK2W6kIdiRsTjrH2I5cOe7hUuCvbLSBHBkQ8Qh91xjLDwQNMmO3oWnA; path=/; expires=Wed, 05-Feb-25 11:28:34 GMT; domain=.groq.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 10:58:34 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 10:58:34 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 10:58:34 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 10:58:34 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 10:58:34 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 10:58:34 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 10:58:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d262c9590285ad-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5385', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '6.15s', 'x-request-id': 'req_01jkaw5ykfe6388xyd3n45c3he', 'set-cookie': '__cf_bm=D1TQVtr9YRCANpFoxdkvcMldSay5Vwkqsn_zEaSvPsM-1738753114-1.0.1.1-WMqboTPBNp2b3qjDMr6I0yn4aUPWwk9UK2W6kIdiRsTjrH2I5cOe7hUuCvbLSBHBkQ8Qh91xjLDwQNMmO3oWnA; path=/; expires=Wed, 05-Feb-25 11:28:34 GMT; domain=.groq.com; HttpOnly; Secure; SameSite=None', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 10:58:34 - root - INFO - Inference completed in 2.32s
2025-02-05 10:58:34 - root - INFO - Tokens used - Input: 678, Output: 615, Total: 1293
2025-02-05 10:58:34 - root - INFO - Processing speed - 556.53 tokens/second
2025-02-05 10:58:34 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 10:58:34 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-summary-prompt
2025-02-05 10:58:34 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 10:58:34 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000475, Completion: $0.000431, Total: $0.000905
2025-02-05 10:58:34 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T10:58:34.693140
2025-02-05 10:58:34 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 10:58:34 - utils.token_tracking - INFO - Tokens used - Input: 678, Output: 615, Total: 1,293
2025-02-05 10:58:34 - utils.token_tracking - INFO - Processing speed - 2586.00 tokens/second
2025-02-05 10:58:34 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T10:58:34.693424', prompt_tokens=678, completion_tokens=615, model='llama3-70b-8192', prompt_id='dynamic-summary-prompt', cost=0.0009051, total_tokens=1293, processing_time=0.5, processing_speed=2586.0)
2025-02-05 10:58:34 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 8 for instance 133883032709840
2025-02-05 10:58:34 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 6,241
2025-02-05 10:58:34 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 10:58:34 - root - INFO - Generated summary of news articles
2025-02-05 10:58:34 - research_components.db - INFO - Storing accuracy evaluation
2025-02-05 10:58:34 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 10:58:34 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: factual_accuracy
2025-02-05 10:58:34 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 10:58:34 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 10:58:34 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T10:58:34.937240
2025-02-05 10:58:34 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 10:58:34 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 10:58:34 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 10:58:34 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T10:58:34.941358', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='factual_accuracy', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 10:58:34 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 9 for instance 133883032709840
2025-02-05 10:58:34 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 6,391
2025-02-05 10:58:34 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 10:58:34 - research_components.db - INFO - Storing source coverage evaluation
2025-02-05 10:58:34 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 10:58:34 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: source_coverage
2025-02-05 10:58:34 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 10:58:34 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 10:58:34 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T10:58:34.960581
2025-02-05 10:58:34 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 10:58:34 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 10:58:34 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 10:58:34 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T10:58:34.962103', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='source_coverage', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 10:58:34 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 10 for instance 133883032709840
2025-02-05 10:58:34 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 6,541
2025-02-05 10:58:34 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 10:58:34 - research_components.research - ERROR - Error processing content and evaluations: Incompatible dimension for X and Y matrices: X.shape[1] == 136 while Y.shape[1] == 245
Traceback (most recent call last):
  File "/app/research_components/research.py", line 129, in run_tool
    coherence_score, coherence_details = coherence_evaluator.evaluate_logical_coherence(result)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/utils/logical_coherence.py", line 115, in evaluate_logical_coherence
    transition_scores = [
                        ^
  File "/app/utils/logical_coherence.py", line 116, in <listcomp>
    cosine_similarity(
  File "/usr/local/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 211, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 1577, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 190, in check_pairwise_arrays
    raise ValueError(
ValueError: Incompatible dimension for X and Y matrices: X.shape[1] == 136 while Y.shape[1] == 245
2025-02-05 10:58:34 - research_components.db - INFO - Storing query trace
2025-02-05 10:58:34 - research_components.db - INFO - Closing database connection
2025-02-05 11:00:15 - research_components.research - INFO - Starting tool execution - Tool: General Agent
2025-02-05 11:00:15 - relevance_evaluator - INFO - Creating new AnswerRelevanceEvaluator instance
2025-02-05 11:00:15 - relevance_evaluator.evaluator - INFO - Initializing AnswerRelevanceEvaluator
2025-02-05 11:00:15 - relevance_evaluator.evaluator - DEBUG - Setting up spaCy pipeline
2025-02-05 11:00:15 - relevance_evaluator.evaluator - DEBUG - SpaCy pipeline components: sentencizer
2025-02-05 11:00:15 - relevance_evaluator.evaluator - DEBUG - Configuring TF-IDF vectorizer
2025-02-05 11:00:15 - relevance_evaluator.evaluator - DEBUG - Successfully initialized TfidfVectorizer
2025-02-05 11:00:15 - relevance_evaluator.evaluator - DEBUG - Vectorizer parameters: {'analyzer': 'word', 'binary': False, 'decode_error': 'strict', 'dtype': <class 'numpy.float64'>, 'encoding': 'utf-8', 'input': 'content', 'lowercase': True, 'max_df': 1.0, 'max_features': 5000, 'min_df': 1, 'ngram_range': (1, 1), 'norm': 'l2', 'preprocessor': None, 'smooth_idf': True, 'stop_words': 'english', 'strip_accents': 'unicode', 'sublinear_tf': False, 'token_pattern': '(?u)\\b\\w\\w+\\b', 'tokenizer': None, 'use_idf': True, 'vocabulary': None}
2025-02-05 11:00:15 - root - INFO - Starting news search for query: Sclerocarya birrea
2025-02-05 11:00:15 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): google.serper.dev:443
2025-02-05 11:00:16 - urllib3.connectionpool - DEBUG - https://google.serper.dev:443 "POST /news?q=Sclerocarya+birrea&gl=us&hl=en&num=10 HTTP/1.1" 200 5493
2025-02-05 11:00:16 - root - INFO - Processing 10 articles for topic: Sclerocarya birrea
2025-02-05 11:00:16 - root - ERROR - Error in decide_what_to_use: 'snippets'
2025-02-05 11:00:16 - root - INFO - Starting to scrape 10 news pages
2025-02-05 11:00:18 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:00:18 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:00:19 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full HTTP/1.1" 200 None
2025-02-05 11:00:20 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full (423 chars)
2025-02-05 11:00:22 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:00:22 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:00:22 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/26059/ HTTP/1.1" 200 30958
2025-02-05 11:00:23 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/26059/ (3516 chars)
2025-02-05 11:00:25 - root - INFO - Attempting to scrape content from www.goodhousekeeping.com
2025-02-05 11:00:25 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.goodhousekeeping.com:443
2025-02-05 11:00:25 - urllib3.connectionpool - DEBUG - https://www.goodhousekeeping.com:443 "GET /uk/beauty/skincare/a33793243/marula-oil/ HTTP/1.1" 200 None
2025-02-05 11:00:25 - root - INFO - Successfully scraped https://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/ (6088 chars)
2025-02-05 11:00:27 - root - INFO - Attempting to scrape content from www.sciencedirect.com
2025-02-05 11:00:27 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.sciencedirect.com:443
2025-02-05 11:00:27 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /science/article/abs/pii/S0378874115301963 HTTP/1.1" 302 143
2025-02-05 11:00:27 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /unsupported_browser HTTP/1.1" 400 None
2025-02-05 11:00:28 - root - ERROR - Error scraping https://www.sciencedirect.com/science/article/abs/pii/S0378874115301963: 400 Client Error: Bad Request for url: https://www.sciencedirect.com/unsupported_browser
2025-02-05 11:00:30 - root - INFO - Attempting to scrape content from www.medicalnewstoday.com
2025-02-05 11:00:30 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.medicalnewstoday.com:443
2025-02-05 11:00:31 - urllib3.connectionpool - DEBUG - https://www.medicalnewstoday.com:443 "GET /articles/marula-oil HTTP/1.1" 200 None
2025-02-05 11:00:31 - root - INFO - Successfully scraped https://www.medicalnewstoday.com/articles/marula-oil (5987 chars)
2025-02-05 11:00:33 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:00:33 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:00:34 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/chemistry/articles/10.3389/fchem.2021.670530/full HTTP/1.1" 200 None
2025-02-05 11:00:34 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full (218 chars)
2025-02-05 11:00:36 - root - INFO - Attempting to scrape content from nit.com.au
2025-02-05 11:00:36 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): nit.com.au:443
2025-02-05 11:00:37 - urllib3.connectionpool - DEBUG - https://nit.com.au:443 "GET /08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end HTTP/1.1" 403 None
2025-02-05 11:00:37 - root - ERROR - Error scraping https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end: 403 Client Error: Forbidden for url: https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end
2025-02-05 11:00:39 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:00:39 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:00:39 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/27070/ HTTP/1.1" 200 30553
2025-02-05 11:00:40 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/27070/ (3502 chars)
2025-02-05 11:00:42 - root - INFO - Attempting to scrape content from onlinelibrary.wiley.com
2025-02-05 11:00:42 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): onlinelibrary.wiley.com:443
2025-02-05 11:00:42 - urllib3.connectionpool - DEBUG - https://onlinelibrary.wiley.com:443 "GET /doi/abs/10.1111/aec.12983 HTTP/1.1" 403 None
2025-02-05 11:00:42 - root - ERROR - Error scraping https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983: 403 Client Error: Forbidden for url: https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983
2025-02-05 11:00:44 - root - INFO - Attempting to scrape content from www.givaudan.com
2025-02-05 11:00:44 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.givaudan.com:443
2025-02-05 11:00:46 - urllib3.connectionpool - DEBUG - https://www.givaudan.com:443 "GET /fragrance-beauty/active-beauty/products/marula-oil HTTP/1.1" 200 None
2025-02-05 11:00:46 - root - INFO - Successfully scraped https://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil (1038 chars)
2025-02-05 11:00:46 - root - INFO - Successfully scraped 7 pages out of 10 attempted
2025-02-05 11:00:46 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 11:00:46 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "Analyze and summarize the following search results:\n                \n                Query: Sclerocarya birrea\n                \n                Search Results:\n                ### The future of African wild fruits â€“ a drive towards responsible production and consumption of the marula fruit - Jun 25, 2024\nhttps://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full\n\n\n### Preliminary nutritional analysis of marula (Sclerocarya birrea) fruits from two Kenyan provenances - May 22, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/26059/\n\n\n### Meet the wonder oil for your skin and hair - 3 weeks ago\nhttps://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/\n\n\n### Safety and efficacy of Sclerocarya birrea (A.Rich.) Hochst (Marula) oil: A clinical perspective - Dec 24, 2015\nhttps://www.sciencedirect.com/science/article/abs/pii/S0378874115301963\n\n\n### Marula oil: Benefits, side effects, and how to use it - Apr 11, 2022\nhttps://www.medicalnewstoday.com/articles/marula-oil\n\n\n### Determination of Phenolics and Flavonoids of Some Useful Medicinal Plants and Bioassay-Guided Fractionation Substances of Sclerocarya birrea (A. Rich) Hochst Stem (Bark) Extract and Their Efficacy Against Salmonella typhi - Jun 26, 2024\nhttps://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full\n\n\n### Mangarri Man: the mighty marula tree could flourish in Australia's top end - Aug 8, 2024\nhttps://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end\n\n\n### Ecology and biology of Uapaca kirkiana, Strychnos cocculoides and Sclerocarya birrea in Southern Africa - Aug 31, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/27070/\n\n\n### Severe simulated herbivory constrains Sclerocarya birrea saplings regardless of resource availability - Dec 2, 2020\nhttps://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983\n\n\n### Marula oil - Aug 2, 2023\nhttps://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil\n\n                \n                Provide a comprehensive summary grouped by themes and include relevant links."}, {'role': 'user', 'content': "Summarize and group the search results based on this: 'Sclerocarya birrea'. Include links, dates, and snippets from the search results."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 11:00:46 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 11:00:46 - httpcore.connection - DEBUG - close.started
2025-02-05 11:00:46 - httpcore.connection - DEBUG - close.complete
2025-02-05 11:00:46 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 11:00:46 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x79c3f1bfb810>
2025-02-05 11:00:46 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x79c4208080e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 11:00:46 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x79c3f2cac7d0>
2025-02-05 11:00:46 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 11:00:46 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 11:00:46 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 11:00:46 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 11:00:46 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 11:00:48 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 11:00:48 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d2660d7a2e4174-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5418'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'5.82s'), (b'x-request-id', b'req_01jkawa17tfgx8ntvqsm8wgrb5'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 11:00:48 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 11:00:48 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 11:00:48 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 11:00:48 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 11:00:48 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 11:00:48 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 11:00:48 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d2660d7a2e4174-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5418', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '5.82s', 'x-request-id': 'req_01jkawa17tfgx8ntvqsm8wgrb5', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 11:00:48 - root - INFO - Inference completed in 2.40s
2025-02-05 11:00:48 - root - INFO - Tokens used - Input: 650, Output: 667, Total: 1317
2025-02-05 11:00:48 - root - INFO - Processing speed - 548.62 tokens/second
2025-02-05 11:00:48 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 11:00:48 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-summary-prompt
2025-02-05 11:00:48 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:00:48 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000455, Completion: $0.000467, Total: $0.000922
2025-02-05 11:00:48 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:00:48.591074
2025-02-05 11:00:48 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:00:48 - utils.token_tracking - INFO - Tokens used - Input: 650, Output: 667, Total: 1,317
2025-02-05 11:00:48 - utils.token_tracking - INFO - Processing speed - 2634.00 tokens/second
2025-02-05 11:00:48 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:00:48.592012', prompt_tokens=650, completion_tokens=667, model='llama3-70b-8192', prompt_id='dynamic-summary-prompt', cost=0.0009219, total_tokens=1317, processing_time=0.5, processing_speed=2634.0)
2025-02-05 11:00:48 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 11 for instance 133883032709840
2025-02-05 11:00:48 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 7,858
2025-02-05 11:00:48 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:00:48 - root - INFO - Generated summary of news articles
2025-02-05 11:00:48 - research_components.db - INFO - Storing accuracy evaluation
2025-02-05 11:00:48 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 11:00:48 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: factual_accuracy
2025-02-05 11:00:48 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:00:48 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:00:48 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:00:48.868301
2025-02-05 11:00:48 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:00:48 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:00:48 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:00:48 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:00:48.869264', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='factual_accuracy', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:00:48 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 12 for instance 133883032709840
2025-02-05 11:00:48 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 8,008
2025-02-05 11:00:48 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:00:48 - research_components.db - INFO - Storing source coverage evaluation
2025-02-05 11:00:48 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 11:00:48 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: source_coverage
2025-02-05 11:00:48 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:00:48 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:00:48 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:00:48.889446
2025-02-05 11:00:48 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:00:48 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:00:48 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:00:48 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:00:48.890402', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='source_coverage', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:00:48 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 13 for instance 133883032709840
2025-02-05 11:00:48 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 8,158
2025-02-05 11:00:48 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:00:48 - research_components.research - ERROR - Error processing content and evaluations: Incompatible dimension for X and Y matrices: X.shape[1] == 323 while Y.shape[1] == 52
Traceback (most recent call last):
  File "/app/research_components/research.py", line 129, in run_tool
    coherence_score, coherence_details = coherence_evaluator.evaluate_logical_coherence(result)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/utils/logical_coherence.py", line 115, in evaluate_logical_coherence
    transition_scores = [
                        ^
  File "/app/utils/logical_coherence.py", line 116, in <listcomp>
    cosine_similarity(
  File "/usr/local/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 211, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 1577, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 190, in check_pairwise_arrays
    raise ValueError(
ValueError: Incompatible dimension for X and Y matrices: X.shape[1] == 323 while Y.shape[1] == 52
2025-02-05 11:00:48 - research_components.db - INFO - Storing query trace
2025-02-05 11:00:48 - research_components.db - INFO - Closing database connection
2025-02-05 11:02:22 - research_components.research - INFO - Starting tool execution - Tool: General Agent
2025-02-05 11:02:22 - relevance_evaluator - INFO - Creating new AnswerRelevanceEvaluator instance
2025-02-05 11:02:22 - relevance_evaluator.evaluator - INFO - Initializing AnswerRelevanceEvaluator
2025-02-05 11:02:22 - relevance_evaluator.evaluator - DEBUG - Setting up spaCy pipeline
2025-02-05 11:02:22 - relevance_evaluator.evaluator - DEBUG - SpaCy pipeline components: sentencizer
2025-02-05 11:02:22 - relevance_evaluator.evaluator - DEBUG - Configuring TF-IDF vectorizer
2025-02-05 11:02:22 - relevance_evaluator.evaluator - DEBUG - Successfully initialized TfidfVectorizer
2025-02-05 11:02:22 - relevance_evaluator.evaluator - DEBUG - Vectorizer parameters: {'analyzer': 'word', 'binary': False, 'decode_error': 'strict', 'dtype': <class 'numpy.float64'>, 'encoding': 'utf-8', 'input': 'content', 'lowercase': True, 'max_df': 1.0, 'max_features': 5000, 'min_df': 1, 'ngram_range': (1, 1), 'norm': 'l2', 'preprocessor': None, 'smooth_idf': True, 'stop_words': 'english', 'strip_accents': 'unicode', 'sublinear_tf': False, 'token_pattern': '(?u)\\b\\w\\w+\\b', 'tokenizer': None, 'use_idf': True, 'vocabulary': None}
2025-02-05 11:02:22 - root - INFO - Starting news search for query: Sclerocarya birrea
2025-02-05 11:02:22 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): google.serper.dev:443
2025-02-05 11:02:24 - urllib3.connectionpool - DEBUG - https://google.serper.dev:443 "POST /news?q=Sclerocarya+birrea&gl=us&hl=en&num=10 HTTP/1.1" 200 5477
2025-02-05 11:02:24 - root - INFO - Processing 10 articles for topic: Sclerocarya birrea
2025-02-05 11:02:24 - root - ERROR - Error in decide_what_to_use: 'snippets'
2025-02-05 11:02:24 - root - INFO - Starting to scrape 10 news pages
2025-02-05 11:02:26 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:02:26 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:02:26 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full HTTP/1.1" 200 None
2025-02-05 11:02:27 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full (423 chars)
2025-02-05 11:02:29 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:02:29 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:02:29 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/26059/ HTTP/1.1" 200 30958
2025-02-05 11:02:30 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/26059/ (3516 chars)
2025-02-05 11:02:32 - root - INFO - Attempting to scrape content from www.goodhousekeeping.com
2025-02-05 11:02:32 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.goodhousekeeping.com:443
2025-02-05 11:02:32 - urllib3.connectionpool - DEBUG - https://www.goodhousekeeping.com:443 "GET /uk/beauty/skincare/a33793243/marula-oil/ HTTP/1.1" 200 None
2025-02-05 11:02:32 - root - INFO - Successfully scraped https://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/ (6088 chars)
2025-02-05 11:02:34 - root - INFO - Attempting to scrape content from www.sciencedirect.com
2025-02-05 11:02:34 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.sciencedirect.com:443
2025-02-05 11:02:34 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /science/article/abs/pii/S0378874115301963 HTTP/1.1" 302 143
2025-02-05 11:02:34 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /unsupported_browser HTTP/1.1" 400 None
2025-02-05 11:02:34 - root - ERROR - Error scraping https://www.sciencedirect.com/science/article/abs/pii/S0378874115301963: 400 Client Error: Bad Request for url: https://www.sciencedirect.com/unsupported_browser
2025-02-05 11:02:36 - root - INFO - Attempting to scrape content from www.medicalnewstoday.com
2025-02-05 11:02:36 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.medicalnewstoday.com:443
2025-02-05 11:02:37 - urllib3.connectionpool - DEBUG - https://www.medicalnewstoday.com:443 "GET /articles/marula-oil HTTP/1.1" 200 None
2025-02-05 11:02:38 - root - INFO - Successfully scraped https://www.medicalnewstoday.com/articles/marula-oil (5987 chars)
2025-02-05 11:02:40 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:02:40 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:02:41 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/chemistry/articles/10.3389/fchem.2021.670530/full HTTP/1.1" 200 None
2025-02-05 11:02:41 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full (218 chars)
2025-02-05 11:02:43 - root - INFO - Attempting to scrape content from nit.com.au
2025-02-05 11:02:43 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): nit.com.au:443
2025-02-05 11:02:43 - urllib3.connectionpool - DEBUG - https://nit.com.au:443 "GET /08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end HTTP/1.1" 403 None
2025-02-05 11:02:43 - root - ERROR - Error scraping https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end: 403 Client Error: Forbidden for url: https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end
2025-02-05 11:02:45 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:02:45 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:02:46 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/27070/ HTTP/1.1" 200 30553
2025-02-05 11:02:46 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/27070/ (3502 chars)
2025-02-05 11:02:48 - root - INFO - Attempting to scrape content from onlinelibrary.wiley.com
2025-02-05 11:02:48 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): onlinelibrary.wiley.com:443
2025-02-05 11:02:49 - urllib3.connectionpool - DEBUG - https://onlinelibrary.wiley.com:443 "GET /doi/abs/10.1111/aec.12983 HTTP/1.1" 403 None
2025-02-05 11:02:49 - root - ERROR - Error scraping https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983: 403 Client Error: Forbidden for url: https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983
2025-02-05 11:02:51 - root - INFO - Attempting to scrape content from www.givaudan.com
2025-02-05 11:02:51 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.givaudan.com:443
2025-02-05 11:02:51 - urllib3.connectionpool - DEBUG - https://www.givaudan.com:443 "GET /fragrance-beauty/active-beauty/products/marula-oil HTTP/1.1" 200 None
2025-02-05 11:02:51 - root - INFO - Successfully scraped https://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil (1038 chars)
2025-02-05 11:02:51 - root - INFO - Successfully scraped 7 pages out of 10 attempted
2025-02-05 11:02:51 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 11:02:51 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "Analyze and summarize the following search results:\n                \n                Query: Sclerocarya birrea\n                \n                Search Results:\n                ### The future of African wild fruits â€“ a drive towards responsible production and consumption of the marula fruit - Jun 25, 2024\nhttps://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full\n\n\n### Preliminary nutritional analysis of marula (Sclerocarya birrea) fruits from two Kenyan provenances - May 22, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/26059/\n\n\n### Meet the wonder oil for your skin and hair - 3 weeks ago\nhttps://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/\n\n\n### Safety and efficacy of Sclerocarya birrea (A.Rich.) Hochst (Marula) oil: A clinical perspective - Dec 24, 2015\nhttps://www.sciencedirect.com/science/article/abs/pii/S0378874115301963\n\n\n### Marula oil: Benefits, side effects, and how to use it - Apr 11, 2022\nhttps://www.medicalnewstoday.com/articles/marula-oil\n\n\n### Determination of Phenolics and Flavonoids of Some Useful Medicinal Plants and Bioassay-Guided Fractionation Substances of Sclerocarya birrea (A. Rich) Hochst Stem (Bark) Extract and Their Efficacy Against Salmonella typhi - Jun 26, 2024\nhttps://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full\n\n\n### Mangarri Man: the mighty marula tree could flourish in Australia's top end - Aug 8, 2024\nhttps://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end\n\n\n### Ecology and biology of Uapaca kirkiana, Strychnos cocculoides and Sclerocarya birrea in Southern Africa - Aug 31, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/27070/\n\n\n### Severe simulated herbivory constrains Sclerocarya birrea saplings regardless of resource availability - Dec 2, 2020\nhttps://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983\n\n\n### Marula oil - Aug 2, 2023\nhttps://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil\n\n                \n                Provide a comprehensive summary grouped by themes and include relevant links."}, {'role': 'user', 'content': "Summarize and group the search results based on this: 'Sclerocarya birrea'. Include links, dates, and snippets from the search results."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 11:02:51 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 11:02:51 - httpcore.connection - DEBUG - close.started
2025-02-05 11:02:51 - httpcore.connection - DEBUG - close.complete
2025-02-05 11:02:51 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 11:02:51 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x79c3f1203a50>
2025-02-05 11:02:51 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x79c4208080e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 11:02:51 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x79c3f1203590>
2025-02-05 11:02:51 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 11:02:51 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 11:02:51 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 11:02:51 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 11:02:51 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 11:02:54 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 11:02:54 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d2691ebb6c3f7e-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5418'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'5.82s'), (b'x-request-id', b'req_01jkawdvy2fpjs6jm1vdzf0me6'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 11:02:54 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 11:02:54 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 11:02:54 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 11:02:54 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 11:02:54 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 11:02:54 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 11:02:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d2691ebb6c3f7e-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5418', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '5.82s', 'x-request-id': 'req_01jkawdvy2fpjs6jm1vdzf0me6', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 11:02:54 - root - INFO - Inference completed in 2.51s
2025-02-05 11:02:54 - root - INFO - Tokens used - Input: 650, Output: 746, Total: 1396
2025-02-05 11:02:54 - root - INFO - Processing speed - 556.37 tokens/second
2025-02-05 11:02:54 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 11:02:54 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-summary-prompt
2025-02-05 11:02:54 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:02:54 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000455, Completion: $0.000522, Total: $0.000977
2025-02-05 11:02:54 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:02:54.420572
2025-02-05 11:02:54 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:02:54 - utils.token_tracking - INFO - Tokens used - Input: 650, Output: 746, Total: 1,396
2025-02-05 11:02:54 - utils.token_tracking - INFO - Processing speed - 2792.00 tokens/second
2025-02-05 11:02:54 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:02:54.421268', prompt_tokens=650, completion_tokens=746, model='llama3-70b-8192', prompt_id='dynamic-summary-prompt', cost=0.0009772000000000001, total_tokens=1396, processing_time=0.5, processing_speed=2792.0)
2025-02-05 11:02:54 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 14 for instance 133883032709840
2025-02-05 11:02:54 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 9,554
2025-02-05 11:02:54 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:02:54 - root - INFO - Generated summary of news articles
2025-02-05 11:02:54 - research_components.db - INFO - Storing accuracy evaluation
2025-02-05 11:02:54 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 11:02:54 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: factual_accuracy
2025-02-05 11:02:54 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:02:54 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:02:54 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:02:54.795948
2025-02-05 11:02:54 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:02:54 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:02:54 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:02:54 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:02:54.797379', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='factual_accuracy', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:02:54 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 15 for instance 133883032709840
2025-02-05 11:02:54 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 9,704
2025-02-05 11:02:54 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:02:54 - research_components.db - INFO - Storing source coverage evaluation
2025-02-05 11:02:54 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 11:02:54 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: source_coverage
2025-02-05 11:02:54 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:02:54 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:02:54 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:02:54.816562
2025-02-05 11:02:54 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:02:54 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:02:54 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:02:54 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:02:54.818492', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='source_coverage', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:02:54 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 16 for instance 133883032709840
2025-02-05 11:02:54 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 9,854
2025-02-05 11:02:54 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:02:54 - research_components.research - ERROR - Error processing content and evaluations: Incompatible dimension for X and Y matrices: X.shape[1] == 140 while Y.shape[1] == 103
Traceback (most recent call last):
  File "/app/research_components/research.py", line 129, in run_tool
    coherence_score, coherence_details = coherence_evaluator.evaluate_logical_coherence(result)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/utils/logical_coherence.py", line 115, in evaluate_logical_coherence
    transition_scores = [
                        ^
  File "/app/utils/logical_coherence.py", line 116, in <listcomp>
    cosine_similarity(
  File "/usr/local/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 211, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 1577, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 190, in check_pairwise_arrays
    raise ValueError(
ValueError: Incompatible dimension for X and Y matrices: X.shape[1] == 140 while Y.shape[1] == 103
2025-02-05 11:02:54 - research_components.db - INFO - Storing query trace
2025-02-05 11:02:54 - research_components.db - INFO - Closing database connection
2025-02-05 11:04:03 - research_components.research - INFO - Starting tool execution - Tool: General Agent
2025-02-05 11:04:03 - relevance_evaluator - INFO - Creating new AnswerRelevanceEvaluator instance
2025-02-05 11:04:03 - relevance_evaluator.evaluator - INFO - Initializing AnswerRelevanceEvaluator
2025-02-05 11:04:03 - relevance_evaluator.evaluator - DEBUG - Setting up spaCy pipeline
2025-02-05 11:04:03 - relevance_evaluator.evaluator - DEBUG - SpaCy pipeline components: sentencizer
2025-02-05 11:04:03 - relevance_evaluator.evaluator - DEBUG - Configuring TF-IDF vectorizer
2025-02-05 11:04:03 - relevance_evaluator.evaluator - DEBUG - Successfully initialized TfidfVectorizer
2025-02-05 11:04:03 - relevance_evaluator.evaluator - DEBUG - Vectorizer parameters: {'analyzer': 'word', 'binary': False, 'decode_error': 'strict', 'dtype': <class 'numpy.float64'>, 'encoding': 'utf-8', 'input': 'content', 'lowercase': True, 'max_df': 1.0, 'max_features': 5000, 'min_df': 1, 'ngram_range': (1, 1), 'norm': 'l2', 'preprocessor': None, 'smooth_idf': True, 'stop_words': 'english', 'strip_accents': 'unicode', 'sublinear_tf': False, 'token_pattern': '(?u)\\b\\w\\w+\\b', 'tokenizer': None, 'use_idf': True, 'vocabulary': None}
2025-02-05 11:04:03 - root - INFO - Starting news search for query: Sclerocarya birrea
2025-02-05 11:04:03 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): google.serper.dev:443
2025-02-05 11:04:04 - urllib3.connectionpool - DEBUG - https://google.serper.dev:443 "POST /news?q=Sclerocarya+birrea&gl=us&hl=en&num=10 HTTP/1.1" 200 5493
2025-02-05 11:04:04 - root - INFO - Processing 10 articles for topic: Sclerocarya birrea
2025-02-05 11:04:04 - root - ERROR - Error in decide_what_to_use: 'snippets'
2025-02-05 11:04:04 - root - INFO - Starting to scrape 10 news pages
2025-02-05 11:04:06 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:04:06 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:04:07 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full HTTP/1.1" 200 None
2025-02-05 11:04:07 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full (423 chars)
2025-02-05 11:04:09 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:04:09 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:04:10 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/26059/ HTTP/1.1" 200 30958
2025-02-05 11:04:10 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/26059/ (3516 chars)
2025-02-05 11:04:12 - root - INFO - Attempting to scrape content from www.goodhousekeeping.com
2025-02-05 11:04:12 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.goodhousekeeping.com:443
2025-02-05 11:04:12 - urllib3.connectionpool - DEBUG - https://www.goodhousekeeping.com:443 "GET /uk/beauty/skincare/a33793243/marula-oil/ HTTP/1.1" 200 None
2025-02-05 11:04:12 - root - INFO - Successfully scraped https://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/ (6088 chars)
2025-02-05 11:04:14 - root - INFO - Attempting to scrape content from www.sciencedirect.com
2025-02-05 11:04:14 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.sciencedirect.com:443
2025-02-05 11:04:15 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /science/article/abs/pii/S0378874115301963 HTTP/1.1" 302 143
2025-02-05 11:04:15 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /unsupported_browser HTTP/1.1" 400 None
2025-02-05 11:04:15 - root - ERROR - Error scraping https://www.sciencedirect.com/science/article/abs/pii/S0378874115301963: 400 Client Error: Bad Request for url: https://www.sciencedirect.com/unsupported_browser
2025-02-05 11:04:17 - root - INFO - Attempting to scrape content from www.medicalnewstoday.com
2025-02-05 11:04:17 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.medicalnewstoday.com:443
2025-02-05 11:04:18 - urllib3.connectionpool - DEBUG - https://www.medicalnewstoday.com:443 "GET /articles/marula-oil HTTP/1.1" 200 None
2025-02-05 11:04:18 - root - INFO - Successfully scraped https://www.medicalnewstoday.com/articles/marula-oil (5987 chars)
2025-02-05 11:04:20 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:04:20 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:04:21 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/chemistry/articles/10.3389/fchem.2021.670530/full HTTP/1.1" 200 None
2025-02-05 11:04:21 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full (218 chars)
2025-02-05 11:04:23 - root - INFO - Attempting to scrape content from nit.com.au
2025-02-05 11:04:23 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): nit.com.au:443
2025-02-05 11:04:23 - urllib3.connectionpool - DEBUG - https://nit.com.au:443 "GET /08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end HTTP/1.1" 403 None
2025-02-05 11:04:23 - root - ERROR - Error scraping https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end: 403 Client Error: Forbidden for url: https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end
2025-02-05 11:04:25 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:04:25 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:04:26 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/27070/ HTTP/1.1" 200 30553
2025-02-05 11:04:26 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/27070/ (3502 chars)
2025-02-05 11:04:28 - root - INFO - Attempting to scrape content from onlinelibrary.wiley.com
2025-02-05 11:04:28 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): onlinelibrary.wiley.com:443
2025-02-05 11:04:28 - urllib3.connectionpool - DEBUG - https://onlinelibrary.wiley.com:443 "GET /doi/abs/10.1111/aec.12983 HTTP/1.1" 403 None
2025-02-05 11:04:28 - root - ERROR - Error scraping https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983: 403 Client Error: Forbidden for url: https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983
2025-02-05 11:04:30 - root - INFO - Attempting to scrape content from www.givaudan.com
2025-02-05 11:04:30 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.givaudan.com:443
2025-02-05 11:04:31 - urllib3.connectionpool - DEBUG - https://www.givaudan.com:443 "GET /fragrance-beauty/active-beauty/products/marula-oil HTTP/1.1" 200 None
2025-02-05 11:04:31 - root - INFO - Successfully scraped https://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil (1038 chars)
2025-02-05 11:04:31 - root - INFO - Successfully scraped 7 pages out of 10 attempted
2025-02-05 11:04:31 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 11:04:31 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "Analyze and summarize the following search results:\n                \n                Query: Sclerocarya birrea\n                \n                Search Results:\n                ### The future of African wild fruits â€“ a drive towards responsible production and consumption of the marula fruit - Jun 25, 2024\nhttps://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full\n\n\n### Preliminary nutritional analysis of marula (Sclerocarya birrea) fruits from two Kenyan provenances - May 22, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/26059/\n\n\n### Meet the wonder oil for your skin and hair - 3 weeks ago\nhttps://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/\n\n\n### Safety and efficacy of Sclerocarya birrea (A.Rich.) Hochst (Marula) oil: A clinical perspective - Dec 24, 2015\nhttps://www.sciencedirect.com/science/article/abs/pii/S0378874115301963\n\n\n### Marula oil: Benefits, side effects, and how to use it - Apr 11, 2022\nhttps://www.medicalnewstoday.com/articles/marula-oil\n\n\n### Determination of Phenolics and Flavonoids of Some Useful Medicinal Plants and Bioassay-Guided Fractionation Substances of Sclerocarya birrea (A. Rich) Hochst Stem (Bark) Extract and Their Efficacy Against Salmonella typhi - Jun 26, 2024\nhttps://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full\n\n\n### Mangarri Man: the mighty marula tree could flourish in Australia's top end - Aug 8, 2024\nhttps://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end\n\n\n### Ecology and biology of Uapaca kirkiana, Strychnos cocculoides and Sclerocarya birrea in Southern Africa - Aug 31, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/27070/\n\n\n### Severe simulated herbivory constrains Sclerocarya birrea saplings regardless of resource availability - Dec 2, 2020\nhttps://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983\n\n\n### Marula oil - Aug 2, 2023\nhttps://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil\n\n                \n                Provide a comprehensive summary grouped by themes and include relevant links."}, {'role': 'user', 'content': "Summarize and group the search results based on this: 'Sclerocarya birrea'. Include links, dates, and snippets from the search results."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 11:04:31 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 11:04:31 - httpcore.connection - DEBUG - close.started
2025-02-05 11:04:31 - httpcore.connection - DEBUG - close.complete
2025-02-05 11:04:31 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 11:04:31 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x79c3f174e390>
2025-02-05 11:04:31 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x79c4208080e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 11:04:31 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x79c3f174c050>
2025-02-05 11:04:31 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 11:04:31 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 11:04:31 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 11:04:31 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 11:04:31 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 11:04:34 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 11:04:34 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d26b900cb4403d-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5418'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'5.82s'), (b'x-request-id', b'req_01jkawgxn3fq58z60chwnf7wkc'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 11:04:34 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 11:04:34 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 11:04:34 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 11:04:34 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 11:04:34 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 11:04:34 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 11:04:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d26b900cb4403d-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5418', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '5.82s', 'x-request-id': 'req_01jkawgxn3fq58z60chwnf7wkc', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 11:04:34 - root - INFO - Inference completed in 3.11s
2025-02-05 11:04:34 - root - INFO - Tokens used - Input: 650, Output: 913, Total: 1563
2025-02-05 11:04:34 - root - INFO - Processing speed - 501.80 tokens/second
2025-02-05 11:04:34 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 11:04:34 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-summary-prompt
2025-02-05 11:04:34 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:04:34 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000455, Completion: $0.000639, Total: $0.001094
2025-02-05 11:04:34 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:04:34.981849
2025-02-05 11:04:34 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:04:34 - utils.token_tracking - INFO - Tokens used - Input: 650, Output: 913, Total: 1,563
2025-02-05 11:04:34 - utils.token_tracking - INFO - Processing speed - 3126.00 tokens/second
2025-02-05 11:04:34 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:04:34.982273', prompt_tokens=650, completion_tokens=913, model='llama3-70b-8192', prompt_id='dynamic-summary-prompt', cost=0.0010941, total_tokens=1563, processing_time=0.5, processing_speed=3126.0)
2025-02-05 11:04:34 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 17 for instance 133883032709840
2025-02-05 11:04:34 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 11,417
2025-02-05 11:04:34 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:04:34 - root - INFO - Generated summary of news articles
2025-02-05 11:04:35 - research_components.db - INFO - Storing accuracy evaluation
2025-02-05 11:04:35 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 11:04:35 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: factual_accuracy
2025-02-05 11:04:35 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:04:35 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:04:35 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:04:35.334475
2025-02-05 11:04:35 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:04:35 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:04:35 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:04:35 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:04:35.336913', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='factual_accuracy', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:04:35 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 18 for instance 133883032709840
2025-02-05 11:04:35 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 11,567
2025-02-05 11:04:35 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:04:35 - research_components.db - INFO - Storing source coverage evaluation
2025-02-05 11:04:35 - utils.token_tracking - INFO - Adding usage to instance 133883032709840
2025-02-05 11:04:35 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: source_coverage
2025-02-05 11:04:35 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:04:35 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:04:35 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:04:35.355008
2025-02-05 11:04:35 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:04:35 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:04:35 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:04:35 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:04:35.356931', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='source_coverage', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:04:35 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 19 for instance 133883032709840
2025-02-05 11:04:35 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 11,717
2025-02-05 11:04:35 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:04:35 - research_components.research - ERROR - Error processing content and evaluations: Incompatible dimension for X and Y matrices: X.shape[1] == 197 while Y.shape[1] == 207
Traceback (most recent call last):
  File "/app/research_components/research.py", line 129, in run_tool
    coherence_score, coherence_details = coherence_evaluator.evaluate_logical_coherence(result)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/utils/logical_coherence.py", line 115, in evaluate_logical_coherence
    transition_scores = [
                        ^
  File "/app/utils/logical_coherence.py", line 116, in <listcomp>
    cosine_similarity(
  File "/usr/local/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 211, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 1577, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 190, in check_pairwise_arrays
    raise ValueError(
ValueError: Incompatible dimension for X and Y matrices: X.shape[1] == 197 while Y.shape[1] == 207
2025-02-05 11:04:35 - research_components.db - INFO - Storing query trace
2025-02-05 11:04:35 - research_components.db - INFO - Closing database connection
2025-02-05 11:07:53 - utils.token_tracking - INFO - Creating TokenUsageTracker singleton instance 127930320438416
2025-02-05 11:07:53 - research_components.research - INFO - Starting tool execution - Tool: General Agent
2025-02-05 11:07:53 - relevance_evaluator - INFO - Creating new AnswerRelevanceEvaluator instance
2025-02-05 11:07:53 - relevance_evaluator.evaluator - INFO - Initializing AnswerRelevanceEvaluator
2025-02-05 11:07:53 - relevance_evaluator.evaluator - DEBUG - Setting up spaCy pipeline
2025-02-05 11:07:53 - relevance_evaluator.evaluator - DEBUG - SpaCy pipeline components: sentencizer
2025-02-05 11:07:53 - relevance_evaluator.evaluator - DEBUG - Configuring TF-IDF vectorizer
2025-02-05 11:07:53 - relevance_evaluator.evaluator - DEBUG - Successfully initialized TfidfVectorizer
2025-02-05 11:07:53 - relevance_evaluator.evaluator - DEBUG - Vectorizer parameters: {'analyzer': 'word', 'binary': False, 'decode_error': 'strict', 'dtype': <class 'numpy.float64'>, 'encoding': 'utf-8', 'input': 'content', 'lowercase': True, 'max_df': 1.0, 'max_features': 5000, 'min_df': 1, 'ngram_range': (1, 1), 'norm': 'l2', 'preprocessor': None, 'smooth_idf': True, 'stop_words': 'english', 'strip_accents': 'unicode', 'sublinear_tf': False, 'token_pattern': '(?u)\\b\\w\\w+\\b', 'tokenizer': None, 'use_idf': True, 'vocabulary': None}
2025-02-05 11:07:53 - root - INFO - Starting news search for query: Sclerocarya birrea
2025-02-05 11:07:53 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): google.serper.dev:443
2025-02-05 11:07:54 - urllib3.connectionpool - DEBUG - https://google.serper.dev:443 "POST /news?q=Sclerocarya+birrea&gl=us&hl=en&num=10 HTTP/1.1" 200 5493
2025-02-05 11:07:54 - root - INFO - Processing 10 articles for topic: Sclerocarya birrea
2025-02-05 11:07:54 - root - ERROR - Error in decide_what_to_use: 'snippets'
2025-02-05 11:07:54 - root - INFO - Starting to scrape 10 news pages
2025-02-05 11:07:56 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:07:56 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:07:57 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full HTTP/1.1" 200 None
2025-02-05 11:07:58 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full (423 chars)
2025-02-05 11:08:00 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:08:00 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:08:00 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/26059/ HTTP/1.1" 200 30958
2025-02-05 11:08:01 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/26059/ (3516 chars)
2025-02-05 11:08:03 - root - INFO - Attempting to scrape content from www.goodhousekeeping.com
2025-02-05 11:08:03 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.goodhousekeeping.com:443
2025-02-05 11:08:03 - urllib3.connectionpool - DEBUG - https://www.goodhousekeeping.com:443 "GET /uk/beauty/skincare/a33793243/marula-oil/ HTTP/1.1" 200 None
2025-02-05 11:08:03 - root - INFO - Successfully scraped https://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/ (6088 chars)
2025-02-05 11:08:05 - root - INFO - Attempting to scrape content from www.sciencedirect.com
2025-02-05 11:08:05 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.sciencedirect.com:443
2025-02-05 11:08:05 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /science/article/abs/pii/S0378874115301963 HTTP/1.1" 302 143
2025-02-05 11:08:05 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /unsupported_browser HTTP/1.1" 400 None
2025-02-05 11:08:05 - root - ERROR - Error scraping https://www.sciencedirect.com/science/article/abs/pii/S0378874115301963: 400 Client Error: Bad Request for url: https://www.sciencedirect.com/unsupported_browser
2025-02-05 11:08:07 - root - INFO - Attempting to scrape content from www.medicalnewstoday.com
2025-02-05 11:08:07 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.medicalnewstoday.com:443
2025-02-05 11:08:09 - urllib3.connectionpool - DEBUG - https://www.medicalnewstoday.com:443 "GET /articles/marula-oil HTTP/1.1" 200 None
2025-02-05 11:08:09 - root - INFO - Successfully scraped https://www.medicalnewstoday.com/articles/marula-oil (5987 chars)
2025-02-05 11:08:11 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:08:11 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:08:12 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/chemistry/articles/10.3389/fchem.2021.670530/full HTTP/1.1" 200 None
2025-02-05 11:08:12 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full (218 chars)
2025-02-05 11:08:14 - root - INFO - Attempting to scrape content from nit.com.au
2025-02-05 11:08:14 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): nit.com.au:443
2025-02-05 11:08:14 - urllib3.connectionpool - DEBUG - https://nit.com.au:443 "GET /08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end HTTP/1.1" 403 None
2025-02-05 11:08:14 - root - ERROR - Error scraping https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end: 403 Client Error: Forbidden for url: https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end
2025-02-05 11:08:16 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:08:16 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:08:17 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/27070/ HTTP/1.1" 200 30553
2025-02-05 11:08:17 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/27070/ (3502 chars)
2025-02-05 11:08:19 - root - INFO - Attempting to scrape content from onlinelibrary.wiley.com
2025-02-05 11:08:19 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): onlinelibrary.wiley.com:443
2025-02-05 11:08:20 - urllib3.connectionpool - DEBUG - https://onlinelibrary.wiley.com:443 "GET /doi/abs/10.1111/aec.12983 HTTP/1.1" 403 None
2025-02-05 11:08:20 - root - ERROR - Error scraping https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983: 403 Client Error: Forbidden for url: https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983
2025-02-05 11:08:22 - root - INFO - Attempting to scrape content from www.givaudan.com
2025-02-05 11:08:22 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.givaudan.com:443
2025-02-05 11:08:23 - urllib3.connectionpool - DEBUG - https://www.givaudan.com:443 "GET /fragrance-beauty/active-beauty/products/marula-oil HTTP/1.1" 200 None
2025-02-05 11:08:23 - root - INFO - Successfully scraped https://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil (1038 chars)
2025-02-05 11:08:23 - root - INFO - Successfully scraped 7 pages out of 10 attempted
2025-02-05 11:08:23 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 11:08:23 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "Analyze and summarize the following search results:\n                \n                Query: Sclerocarya birrea\n                \n                Search Results:\n                ### The future of African wild fruits â€“ a drive towards responsible production and consumption of the marula fruit - Jun 25, 2024\nhttps://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full\n\n\n### Preliminary nutritional analysis of marula (Sclerocarya birrea) fruits from two Kenyan provenances - May 22, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/26059/\n\n\n### Meet the wonder oil for your skin and hair - 3 weeks ago\nhttps://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/\n\n\n### Safety and efficacy of Sclerocarya birrea (A.Rich.) Hochst (Marula) oil: A clinical perspective - Dec 24, 2015\nhttps://www.sciencedirect.com/science/article/abs/pii/S0378874115301963\n\n\n### Marula oil: Benefits, side effects, and how to use it - Apr 11, 2022\nhttps://www.medicalnewstoday.com/articles/marula-oil\n\n\n### Determination of Phenolics and Flavonoids of Some Useful Medicinal Plants and Bioassay-Guided Fractionation Substances of Sclerocarya birrea (A. Rich) Hochst Stem (Bark) Extract and Their Efficacy Against Salmonella typhi - Jun 26, 2024\nhttps://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full\n\n\n### Mangarri Man: the mighty marula tree could flourish in Australia's top end - Aug 8, 2024\nhttps://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end\n\n\n### Ecology and biology of Uapaca kirkiana, Strychnos cocculoides and Sclerocarya birrea in Southern Africa - Aug 31, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/27070/\n\n\n### Severe simulated herbivory constrains Sclerocarya birrea saplings regardless of resource availability - Dec 2, 2020\nhttps://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983\n\n\n### Marula oil - Aug 2, 2023\nhttps://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil\n\n                \n                Provide a comprehensive summary grouped by themes and include relevant links."}, {'role': 'user', 'content': "Summarize and group the search results based on this: 'Sclerocarya birrea'. Include links, dates, and snippets from the search results."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 11:08:23 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 11:08:23 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 11:08:23 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7459f97ab1d0>
2025-02-05 11:08:23 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x745a273400e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 11:08:23 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7459f97cd450>
2025-02-05 11:08:23 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 11:08:23 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 11:08:23 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 11:08:23 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 11:08:23 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 11:08:26 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 11:08:26 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d27138e94b403d-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5418'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'5.82s'), (b'x-request-id', b'req_01jkawr00pepk9y094kzhbsb5b'), (b'Set-Cookie', b'__cf_bm=YfvZydro3MtcwiiPvEJLg79H7aakgYXq3nySJToALH0-1738753706-1.0.1.1-S8Q8GxDONGFvdr4WaCDhBKY5zJM.8VkpZs5ps2gPJdBc7Eb1sZYBHmm9ZIAkRzye0T7HmTJfSCTr6Yph0KYPZg; path=/; expires=Wed, 05-Feb-25 11:38:26 GMT; domain=.groq.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 11:08:26 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 11:08:26 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 11:08:26 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 11:08:26 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 11:08:26 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 11:08:26 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 11:08:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d27138e94b403d-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5418', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '5.82s', 'x-request-id': 'req_01jkawr00pepk9y094kzhbsb5b', 'set-cookie': '__cf_bm=YfvZydro3MtcwiiPvEJLg79H7aakgYXq3nySJToALH0-1738753706-1.0.1.1-S8Q8GxDONGFvdr4WaCDhBKY5zJM.8VkpZs5ps2gPJdBc7Eb1sZYBHmm9ZIAkRzye0T7HmTJfSCTr6Yph0KYPZg; path=/; expires=Wed, 05-Feb-25 11:38:26 GMT; domain=.groq.com; HttpOnly; Secure; SameSite=None', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 11:08:26 - root - INFO - Inference completed in 2.51s
2025-02-05 11:08:26 - root - INFO - Tokens used - Input: 650, Output: 663, Total: 1313
2025-02-05 11:08:26 - root - INFO - Processing speed - 524.09 tokens/second
2025-02-05 11:08:26 - utils.token_tracking - INFO - Adding usage to instance 127930320438416
2025-02-05 11:08:26 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-summary-prompt
2025-02-05 11:08:26 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:08:26 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000455, Completion: $0.000464, Total: $0.000919
2025-02-05 11:08:26 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:08:26.047586
2025-02-05 11:08:26 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:08:26 - utils.token_tracking - INFO - Tokens used - Input: 650, Output: 663, Total: 1,313
2025-02-05 11:08:26 - utils.token_tracking - INFO - Processing speed - 2626.00 tokens/second
2025-02-05 11:08:26 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:08:26.048396', prompt_tokens=650, completion_tokens=663, model='llama3-70b-8192', prompt_id='dynamic-summary-prompt', cost=0.0009191, total_tokens=1313, processing_time=0.5, processing_speed=2626.0)
2025-02-05 11:08:26 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 1 for instance 127930320438416
2025-02-05 11:08:26 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,313
2025-02-05 11:08:26 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192']
2025-02-05 11:08:26 - root - INFO - Generated summary of news articles
2025-02-05 11:08:26 - research_components.db - INFO - Storing accuracy evaluation
2025-02-05 11:08:26 - utils.token_tracking - INFO - Adding usage to instance 127930320438416
2025-02-05 11:08:26 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: factual_accuracy
2025-02-05 11:08:26 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:08:26 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:08:26 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:08:26.413957
2025-02-05 11:08:26 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:08:26 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:08:26 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:08:26 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:08:26.415273', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='factual_accuracy', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:08:26 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 2 for instance 127930320438416
2025-02-05 11:08:26 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,463
2025-02-05 11:08:26 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:08:26 - research_components.db - INFO - Storing source coverage evaluation
2025-02-05 11:08:26 - utils.token_tracking - INFO - Adding usage to instance 127930320438416
2025-02-05 11:08:26 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: source_coverage
2025-02-05 11:08:26 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:08:26 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:08:26 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:08:26.446676
2025-02-05 11:08:26 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:08:26 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:08:26 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:08:26 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:08:26.447465', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='source_coverage', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:08:26 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 3 for instance 127930320438416
2025-02-05 11:08:26 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,613
2025-02-05 11:08:26 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:08:26 - research_components.research - ERROR - Error processing content and evaluations: Incompatible dimension for X and Y matrices: X.shape[1] == 321 while Y.shape[1] == 45
Traceback (most recent call last):
  File "/app/research_components/research.py", line 129, in run_tool
    coherence_score, coherence_details = coherence_evaluator.evaluate_logical_coherence(result)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/utils/logical_coherence.py", line 115, in evaluate_logical_coherence
    transition_scores = [
                        ^
  File "/app/utils/logical_coherence.py", line 116, in <listcomp>
    cosine_similarity(
  File "/usr/local/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 211, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 1577, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 190, in check_pairwise_arrays
    raise ValueError(
ValueError: Incompatible dimension for X and Y matrices: X.shape[1] == 321 while Y.shape[1] == 45
2025-02-05 11:08:26 - research_components.db - INFO - Storing query trace
2025-02-05 11:08:26 - research_components.db - INFO - Closing database connection
2025-02-05 11:11:08 - utils.token_tracking - INFO - Creating TokenUsageTracker singleton instance 138148669303504
2025-02-05 11:11:08 - research_components.research - INFO - Starting tool execution - Tool: General Agent
2025-02-05 11:11:08 - relevance_evaluator - INFO - Creating new AnswerRelevanceEvaluator instance
2025-02-05 11:11:08 - relevance_evaluator.evaluator - INFO - Initializing AnswerRelevanceEvaluator
2025-02-05 11:11:08 - relevance_evaluator.evaluator - DEBUG - Setting up spaCy pipeline
2025-02-05 11:11:08 - relevance_evaluator.evaluator - DEBUG - SpaCy pipeline components: sentencizer
2025-02-05 11:11:08 - relevance_evaluator.evaluator - DEBUG - Configuring TF-IDF vectorizer
2025-02-05 11:11:08 - relevance_evaluator.evaluator - DEBUG - Successfully initialized TfidfVectorizer
2025-02-05 11:11:08 - relevance_evaluator.evaluator - DEBUG - Vectorizer parameters: {'analyzer': 'word', 'binary': False, 'decode_error': 'strict', 'dtype': <class 'numpy.float64'>, 'encoding': 'utf-8', 'input': 'content', 'lowercase': True, 'max_df': 1.0, 'max_features': 5000, 'min_df': 1, 'ngram_range': (1, 1), 'norm': 'l2', 'preprocessor': None, 'smooth_idf': True, 'stop_words': 'english', 'strip_accents': 'unicode', 'sublinear_tf': False, 'token_pattern': '(?u)\\b\\w\\w+\\b', 'tokenizer': None, 'use_idf': True, 'vocabulary': None}
2025-02-05 11:11:08 - root - INFO - Starting news search for query: Sclerocarya birrea
2025-02-05 11:11:08 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): google.serper.dev:443
2025-02-05 11:11:09 - urllib3.connectionpool - DEBUG - https://google.serper.dev:443 "POST /news?q=Sclerocarya+birrea&gl=us&hl=en&num=10 HTTP/1.1" 200 5493
2025-02-05 11:11:09 - root - INFO - Processing 10 articles for topic: Sclerocarya birrea
2025-02-05 11:11:09 - root - ERROR - Error in decide_what_to_use: 'snippets'
2025-02-05 11:11:09 - root - INFO - Starting to scrape 10 news pages
2025-02-05 11:11:11 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:11:11 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:11:12 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full HTTP/1.1" 200 None
2025-02-05 11:11:13 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full (423 chars)
2025-02-05 11:11:15 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:11:15 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:11:15 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/26059/ HTTP/1.1" 200 30958
2025-02-05 11:11:15 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/26059/ (3516 chars)
2025-02-05 11:11:17 - root - INFO - Attempting to scrape content from www.goodhousekeeping.com
2025-02-05 11:11:17 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.goodhousekeeping.com:443
2025-02-05 11:11:18 - urllib3.connectionpool - DEBUG - https://www.goodhousekeeping.com:443 "GET /uk/beauty/skincare/a33793243/marula-oil/ HTTP/1.1" 200 None
2025-02-05 11:11:18 - root - INFO - Successfully scraped https://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/ (6088 chars)
2025-02-05 11:11:20 - root - INFO - Attempting to scrape content from www.sciencedirect.com
2025-02-05 11:11:20 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.sciencedirect.com:443
2025-02-05 11:11:20 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /science/article/abs/pii/S0378874115301963 HTTP/1.1" 302 143
2025-02-05 11:11:20 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /unsupported_browser HTTP/1.1" 400 None
2025-02-05 11:11:20 - root - ERROR - Error scraping https://www.sciencedirect.com/science/article/abs/pii/S0378874115301963: 400 Client Error: Bad Request for url: https://www.sciencedirect.com/unsupported_browser
2025-02-05 11:11:22 - root - INFO - Attempting to scrape content from www.medicalnewstoday.com
2025-02-05 11:11:22 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.medicalnewstoday.com:443
2025-02-05 11:11:23 - urllib3.connectionpool - DEBUG - https://www.medicalnewstoday.com:443 "GET /articles/marula-oil HTTP/1.1" 200 None
2025-02-05 11:11:23 - root - INFO - Successfully scraped https://www.medicalnewstoday.com/articles/marula-oil (5987 chars)
2025-02-05 11:11:25 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:11:25 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:11:26 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/chemistry/articles/10.3389/fchem.2021.670530/full HTTP/1.1" 200 None
2025-02-05 11:11:27 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full (218 chars)
2025-02-05 11:11:29 - root - INFO - Attempting to scrape content from nit.com.au
2025-02-05 11:11:29 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): nit.com.au:443
2025-02-05 11:11:29 - urllib3.connectionpool - DEBUG - https://nit.com.au:443 "GET /08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end HTTP/1.1" 403 None
2025-02-05 11:11:29 - root - ERROR - Error scraping https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end: 403 Client Error: Forbidden for url: https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end
2025-02-05 11:11:31 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:11:31 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:11:32 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/27070/ HTTP/1.1" 200 30553
2025-02-05 11:11:32 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/27070/ (3502 chars)
2025-02-05 11:11:34 - root - INFO - Attempting to scrape content from onlinelibrary.wiley.com
2025-02-05 11:11:34 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): onlinelibrary.wiley.com:443
2025-02-05 11:11:35 - urllib3.connectionpool - DEBUG - https://onlinelibrary.wiley.com:443 "GET /doi/abs/10.1111/aec.12983 HTTP/1.1" 403 None
2025-02-05 11:11:35 - root - ERROR - Error scraping https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983: 403 Client Error: Forbidden for url: https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983
2025-02-05 11:11:37 - root - INFO - Attempting to scrape content from www.givaudan.com
2025-02-05 11:11:37 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.givaudan.com:443
2025-02-05 11:11:37 - urllib3.connectionpool - DEBUG - https://www.givaudan.com:443 "GET /fragrance-beauty/active-beauty/products/marula-oil HTTP/1.1" 200 None
2025-02-05 11:11:37 - root - INFO - Successfully scraped https://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil (1038 chars)
2025-02-05 11:11:37 - root - INFO - Successfully scraped 7 pages out of 10 attempted
2025-02-05 11:11:37 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 11:11:37 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "Analyze and summarize the following search results:\n                \n                Query: Sclerocarya birrea\n                \n                Search Results:\n                ### The future of African wild fruits â€“ a drive towards responsible production and consumption of the marula fruit - Jun 25, 2024\nhttps://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full\n\n\n### Preliminary nutritional analysis of marula (Sclerocarya birrea) fruits from two Kenyan provenances - May 22, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/26059/\n\n\n### Meet the wonder oil for your skin and hair - 3 weeks ago\nhttps://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/\n\n\n### Safety and efficacy of Sclerocarya birrea (A.Rich.) Hochst (Marula) oil: A clinical perspective - Dec 24, 2015\nhttps://www.sciencedirect.com/science/article/abs/pii/S0378874115301963\n\n\n### Marula oil: Benefits, side effects, and how to use it - Apr 11, 2022\nhttps://www.medicalnewstoday.com/articles/marula-oil\n\n\n### Determination of Phenolics and Flavonoids of Some Useful Medicinal Plants and Bioassay-Guided Fractionation Substances of Sclerocarya birrea (A. Rich) Hochst Stem (Bark) Extract and Their Efficacy Against Salmonella typhi - Jun 26, 2024\nhttps://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full\n\n\n### Mangarri Man: the mighty marula tree could flourish in Australia's top end - Aug 8, 2024\nhttps://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end\n\n\n### Ecology and biology of Uapaca kirkiana, Strychnos cocculoides and Sclerocarya birrea in Southern Africa - Aug 31, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/27070/\n\n\n### Severe simulated herbivory constrains Sclerocarya birrea saplings regardless of resource availability - Dec 2, 2020\nhttps://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983\n\n\n### Marula oil - Aug 2, 2023\nhttps://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil\n\n                \n                Provide a comprehensive summary grouped by themes and include relevant links."}, {'role': 'user', 'content': "Summarize and group the search results based on this: 'Sclerocarya birrea'. Include links, dates, and snippets from the search results."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 11:11:37 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 11:11:37 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 11:11:37 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7da53e4e7f90>
2025-02-05 11:11:37 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7da56bf40200> server_hostname='api.groq.com' timeout=5.0
2025-02-05 11:11:37 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7da53e5c01d0>
2025-02-05 11:11:37 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 11:11:37 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 11:11:37 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 11:11:37 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 11:11:37 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 11:11:40 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 11:11:40 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d275f64aaf403d-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5418'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'5.82s'), (b'x-request-id', b'req_01jkawxxkyeqr85kqn5ja3rs7p'), (b'Set-Cookie', b'__cf_bm=dGypWdLV29ZQkAL2a3MI_YFXugIcQpG4sId578XteO0-1738753900-1.0.1.1-64pKshD7bQEWo7HucoEzHG_jvAvOtF6px8oTFN81P3ZeQR1EgvBLMfMBk9rovcYDikJjFh4dNnYecVa2ccUCfA; path=/; expires=Wed, 05-Feb-25 11:41:40 GMT; domain=.groq.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 11:11:40 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 11:11:40 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 11:11:40 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 11:11:40 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 11:11:40 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 11:11:40 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 11:11:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d275f64aaf403d-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5418', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '5.82s', 'x-request-id': 'req_01jkawxxkyeqr85kqn5ja3rs7p', 'set-cookie': '__cf_bm=dGypWdLV29ZQkAL2a3MI_YFXugIcQpG4sId578XteO0-1738753900-1.0.1.1-64pKshD7bQEWo7HucoEzHG_jvAvOtF6px8oTFN81P3ZeQR1EgvBLMfMBk9rovcYDikJjFh4dNnYecVa2ccUCfA; path=/; expires=Wed, 05-Feb-25 11:41:40 GMT; domain=.groq.com; HttpOnly; Secure; SameSite=None', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 11:11:40 - root - INFO - Inference completed in 2.36s
2025-02-05 11:11:40 - root - INFO - Tokens used - Input: 650, Output: 653, Total: 1303
2025-02-05 11:11:40 - root - INFO - Processing speed - 551.78 tokens/second
2025-02-05 11:11:40 - utils.token_tracking - INFO - Adding usage to instance 138148669303504
2025-02-05 11:11:40 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-summary-prompt
2025-02-05 11:11:40 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:11:40 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000455, Completion: $0.000457, Total: $0.000912
2025-02-05 11:11:40 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:11:40.176959
2025-02-05 11:11:40 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:11:40 - utils.token_tracking - INFO - Tokens used - Input: 650, Output: 653, Total: 1,303
2025-02-05 11:11:40 - utils.token_tracking - INFO - Processing speed - 2606.00 tokens/second
2025-02-05 11:11:40 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:11:40.177587', prompt_tokens=650, completion_tokens=653, model='llama3-70b-8192', prompt_id='dynamic-summary-prompt', cost=0.0009121, total_tokens=1303, processing_time=0.5, processing_speed=2606.0)
2025-02-05 11:11:40 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 1 for instance 138148669303504
2025-02-05 11:11:40 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,303
2025-02-05 11:11:40 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192']
2025-02-05 11:11:40 - root - INFO - Generated summary of news articles
2025-02-05 11:11:40 - research_components.db - INFO - Storing accuracy evaluation
2025-02-05 11:11:40 - utils.token_tracking - INFO - Adding usage to instance 138148669303504
2025-02-05 11:11:40 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: factual_accuracy
2025-02-05 11:11:40 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:11:40 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:11:40 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:11:40.490842
2025-02-05 11:11:40 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:11:40 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:11:40 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:11:40 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:11:40.491321', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='factual_accuracy', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:11:40 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 2 for instance 138148669303504
2025-02-05 11:11:40 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,453
2025-02-05 11:11:40 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:11:40 - research_components.db - INFO - Storing source coverage evaluation
2025-02-05 11:11:40 - utils.token_tracking - INFO - Adding usage to instance 138148669303504
2025-02-05 11:11:40 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: source_coverage
2025-02-05 11:11:40 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:11:40 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:11:40 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:11:40.509675
2025-02-05 11:11:40 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:11:40 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:11:40 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:11:40 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:11:40.510228', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='source_coverage', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:11:40 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 3 for instance 138148669303504
2025-02-05 11:11:40 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,603
2025-02-05 11:11:40 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:11:40 - research_components.research - ERROR - Error processing content and evaluations: Incompatible dimension for X and Y matrices: X.shape[1] == 247 while Y.shape[1] == 137
Traceback (most recent call last):
  File "/app/research_components/research.py", line 129, in run_tool
    coherence_score, coherence_details = coherence_evaluator.evaluate_logical_coherence(result)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/utils/logical_coherence.py", line 115, in evaluate_logical_coherence
    transition_scores = [
                        ^
  File "/app/utils/logical_coherence.py", line 116, in <listcomp>
    cosine_similarity(
  File "/usr/local/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 211, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 1577, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 190, in check_pairwise_arrays
    raise ValueError(
ValueError: Incompatible dimension for X and Y matrices: X.shape[1] == 247 while Y.shape[1] == 137
2025-02-05 11:11:40 - research_components.db - INFO - Storing query trace
2025-02-05 11:11:40 - research_components.db - INFO - Closing database connection
2025-02-05 11:13:44 - utils.token_tracking - INFO - Creating TokenUsageTracker singleton instance 133042622773968
2025-02-05 11:15:45 - utils.token_tracking - INFO - Creating TokenUsageTracker singleton instance 134518347843408
2025-02-05 11:15:45 - research_components.research - INFO - Starting tool execution - Tool: General Agent
2025-02-05 11:15:45 - relevance_evaluator - INFO - Creating new AnswerRelevanceEvaluator instance
2025-02-05 11:15:45 - relevance_evaluator.evaluator - INFO - Initializing AnswerRelevanceEvaluator
2025-02-05 11:15:45 - relevance_evaluator.evaluator - DEBUG - Setting up spaCy pipeline
2025-02-05 11:15:45 - relevance_evaluator.evaluator - DEBUG - SpaCy pipeline components: sentencizer
2025-02-05 11:15:45 - relevance_evaluator.evaluator - DEBUG - Configuring TF-IDF vectorizer
2025-02-05 11:15:45 - relevance_evaluator.evaluator - DEBUG - Successfully initialized TfidfVectorizer
2025-02-05 11:15:45 - relevance_evaluator.evaluator - DEBUG - Vectorizer parameters: {'analyzer': 'word', 'binary': False, 'decode_error': 'strict', 'dtype': <class 'numpy.float64'>, 'encoding': 'utf-8', 'input': 'content', 'lowercase': True, 'max_df': 1.0, 'max_features': 5000, 'min_df': 1, 'ngram_range': (1, 1), 'norm': 'l2', 'preprocessor': None, 'smooth_idf': True, 'stop_words': 'english', 'strip_accents': 'unicode', 'sublinear_tf': False, 'token_pattern': '(?u)\\b\\w\\w+\\b', 'tokenizer': None, 'use_idf': True, 'vocabulary': None}
2025-02-05 11:15:45 - root - INFO - Starting news search for query: Sclerocarya birrea
2025-02-05 11:15:45 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): google.serper.dev:443
2025-02-05 11:15:46 - urllib3.connectionpool - DEBUG - https://google.serper.dev:443 "POST /news?q=Sclerocarya+birrea&gl=us&hl=en&num=10 HTTP/1.1" 200 5493
2025-02-05 11:15:46 - root - INFO - Processing 10 articles for topic: Sclerocarya birrea
2025-02-05 11:15:46 - root - ERROR - Error in decide_what_to_use: 'snippets'
2025-02-05 11:15:46 - root - INFO - Starting to scrape 10 news pages
2025-02-05 11:15:48 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:15:48 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:15:49 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full HTTP/1.1" 200 None
2025-02-05 11:15:50 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full (423 chars)
2025-02-05 11:15:52 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:15:52 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:15:52 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/26059/ HTTP/1.1" 200 30958
2025-02-05 11:15:53 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/26059/ (3516 chars)
2025-02-05 11:15:55 - root - INFO - Attempting to scrape content from www.goodhousekeeping.com
2025-02-05 11:15:55 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.goodhousekeeping.com:443
2025-02-05 11:15:55 - urllib3.connectionpool - DEBUG - https://www.goodhousekeeping.com:443 "GET /uk/beauty/skincare/a33793243/marula-oil/ HTTP/1.1" 200 None
2025-02-05 11:15:55 - root - INFO - Successfully scraped https://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/ (6088 chars)
2025-02-05 11:15:57 - root - INFO - Attempting to scrape content from www.sciencedirect.com
2025-02-05 11:15:57 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.sciencedirect.com:443
2025-02-05 11:15:57 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /science/article/abs/pii/S0378874115301963 HTTP/1.1" 302 143
2025-02-05 11:15:57 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /unsupported_browser HTTP/1.1" 400 None
2025-02-05 11:15:57 - root - ERROR - Error scraping https://www.sciencedirect.com/science/article/abs/pii/S0378874115301963: 400 Client Error: Bad Request for url: https://www.sciencedirect.com/unsupported_browser
2025-02-05 11:15:59 - root - INFO - Attempting to scrape content from www.medicalnewstoday.com
2025-02-05 11:15:59 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.medicalnewstoday.com:443
2025-02-05 11:16:01 - urllib3.connectionpool - DEBUG - https://www.medicalnewstoday.com:443 "GET /articles/marula-oil HTTP/1.1" 200 None
2025-02-05 11:16:01 - root - INFO - Successfully scraped https://www.medicalnewstoday.com/articles/marula-oil (5987 chars)
2025-02-05 11:16:03 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:16:03 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:16:04 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/chemistry/articles/10.3389/fchem.2021.670530/full HTTP/1.1" 200 None
2025-02-05 11:16:04 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full (218 chars)
2025-02-05 11:16:06 - root - INFO - Attempting to scrape content from nit.com.au
2025-02-05 11:16:06 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): nit.com.au:443
2025-02-05 11:16:06 - urllib3.connectionpool - DEBUG - https://nit.com.au:443 "GET /08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end HTTP/1.1" 403 None
2025-02-05 11:16:06 - root - ERROR - Error scraping https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end: 403 Client Error: Forbidden for url: https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end
2025-02-05 11:16:08 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:16:08 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:16:09 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/27070/ HTTP/1.1" 200 30553
2025-02-05 11:16:09 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/27070/ (3502 chars)
2025-02-05 11:16:11 - root - INFO - Attempting to scrape content from onlinelibrary.wiley.com
2025-02-05 11:16:11 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): onlinelibrary.wiley.com:443
2025-02-05 11:16:11 - urllib3.connectionpool - DEBUG - https://onlinelibrary.wiley.com:443 "GET /doi/abs/10.1111/aec.12983 HTTP/1.1" 403 None
2025-02-05 11:16:11 - root - ERROR - Error scraping https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983: 403 Client Error: Forbidden for url: https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983
2025-02-05 11:16:13 - root - INFO - Attempting to scrape content from www.givaudan.com
2025-02-05 11:16:13 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.givaudan.com:443
2025-02-05 11:16:14 - urllib3.connectionpool - DEBUG - https://www.givaudan.com:443 "GET /fragrance-beauty/active-beauty/products/marula-oil HTTP/1.1" 200 None
2025-02-05 11:16:14 - root - INFO - Successfully scraped https://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil (1038 chars)
2025-02-05 11:16:14 - root - INFO - Successfully scraped 7 pages out of 10 attempted
2025-02-05 11:16:14 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 11:16:14 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "Analyze and summarize the following search results:\n                \n                Query: Sclerocarya birrea\n                \n                Search Results:\n                ### The future of African wild fruits â€“ a drive towards responsible production and consumption of the marula fruit - Jun 25, 2024\nhttps://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full\n\n\n### Preliminary nutritional analysis of marula (Sclerocarya birrea) fruits from two Kenyan provenances - May 22, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/26059/\n\n\n### Meet the wonder oil for your skin and hair - 3 weeks ago\nhttps://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/\n\n\n### Safety and efficacy of Sclerocarya birrea (A.Rich.) Hochst (Marula) oil: A clinical perspective - Dec 24, 2015\nhttps://www.sciencedirect.com/science/article/abs/pii/S0378874115301963\n\n\n### Marula oil: Benefits, side effects, and how to use it - Apr 11, 2022\nhttps://www.medicalnewstoday.com/articles/marula-oil\n\n\n### Determination of Phenolics and Flavonoids of Some Useful Medicinal Plants and Bioassay-Guided Fractionation Substances of Sclerocarya birrea (A. Rich) Hochst Stem (Bark) Extract and Their Efficacy Against Salmonella typhi - Jun 26, 2024\nhttps://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full\n\n\n### Mangarri Man: the mighty marula tree could flourish in Australia's top end - Aug 8, 2024\nhttps://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end\n\n\n### Ecology and biology of Uapaca kirkiana, Strychnos cocculoides and Sclerocarya birrea in Southern Africa - Aug 31, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/27070/\n\n\n### Severe simulated herbivory constrains Sclerocarya birrea saplings regardless of resource availability - Dec 2, 2020\nhttps://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983\n\n\n### Marula oil - Aug 2, 2023\nhttps://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil\n\n                \n                Provide a comprehensive summary grouped by themes and include relevant links."}, {'role': 'user', 'content': "Summarize and group the search results based on this: 'Sclerocarya birrea'. Include links, dates, and snippets from the search results."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 11:16:14 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 11:16:14 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 11:16:15 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a57fe590290>
2025-02-05 11:16:15 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7a582c038200> server_hostname='api.groq.com' timeout=5.0
2025-02-05 11:16:15 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a57fe307010>
2025-02-05 11:16:15 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 11:16:15 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 11:16:15 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 11:16:15 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 11:16:15 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 11:16:17 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 11:16:17 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d27cba5c5d403d-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5418'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'5.82s'), (b'x-request-id', b'req_01jkax6c89exwt8bfbx3xd0et7'), (b'Set-Cookie', b'__cf_bm=6GHQC20Xty5EN6fnUKVEB6a5fjAxYVPU.QnD0yHqtdQ-1738754177-1.0.1.1-CzoPLev6wonW7q4yeHj6dXjzhNQRknzJvKlKekpqaHUIV1TuP6FB1sde2z1SXVa8OrQj0O5zvwf0IQ3czzCKIQ; path=/; expires=Wed, 05-Feb-25 11:46:17 GMT; domain=.groq.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 11:16:17 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 11:16:17 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 11:16:17 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 11:16:17 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 11:16:17 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 11:16:17 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 11:16:17 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d27cba5c5d403d-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5418', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '5.82s', 'x-request-id': 'req_01jkax6c89exwt8bfbx3xd0et7', 'set-cookie': '__cf_bm=6GHQC20Xty5EN6fnUKVEB6a5fjAxYVPU.QnD0yHqtdQ-1738754177-1.0.1.1-CzoPLev6wonW7q4yeHj6dXjzhNQRknzJvKlKekpqaHUIV1TuP6FB1sde2z1SXVa8OrQj0O5zvwf0IQ3czzCKIQ; path=/; expires=Wed, 05-Feb-25 11:46:17 GMT; domain=.groq.com; HttpOnly; Secure; SameSite=None', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 11:16:17 - root - INFO - Inference completed in 2.44s
2025-02-05 11:16:17 - root - INFO - Tokens used - Input: 650, Output: 652, Total: 1302
2025-02-05 11:16:17 - root - INFO - Processing speed - 532.55 tokens/second
2025-02-05 11:16:17 - utils.token_tracking - INFO - Adding usage to instance 134518347843408
2025-02-05 11:16:17 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-summary-prompt
2025-02-05 11:16:17 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:16:17 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000455, Completion: $0.000456, Total: $0.000911
2025-02-05 11:16:17 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:16:17.364407
2025-02-05 11:16:17 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:16:17 - utils.token_tracking - INFO - Tokens used - Input: 650, Output: 652, Total: 1,302
2025-02-05 11:16:17 - utils.token_tracking - INFO - Processing speed - 2604.00 tokens/second
2025-02-05 11:16:17 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:16:17.365746', prompt_tokens=650, completion_tokens=652, model='llama3-70b-8192', prompt_id='dynamic-summary-prompt', cost=0.0009114, total_tokens=1302, processing_time=0.5, processing_speed=2604.0)
2025-02-05 11:16:17 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 1 for instance 134518347843408
2025-02-05 11:16:17 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,302
2025-02-05 11:16:17 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192']
2025-02-05 11:16:17 - root - INFO - Generated summary of news articles
2025-02-05 11:16:17 - research_components.db - INFO - Storing accuracy evaluation
2025-02-05 11:16:17 - utils.token_tracking - INFO - Adding usage to instance 134518347843408
2025-02-05 11:16:17 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: factual_accuracy
2025-02-05 11:16:17 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:16:17 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:16:17 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:16:17.668363
2025-02-05 11:16:17 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:16:17 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:16:17 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:16:17 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:16:17.670236', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='factual_accuracy', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:16:17 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 2 for instance 134518347843408
2025-02-05 11:16:17 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,452
2025-02-05 11:16:17 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:16:17 - research_components.db - INFO - Storing source coverage evaluation
2025-02-05 11:16:17 - utils.token_tracking - INFO - Adding usage to instance 134518347843408
2025-02-05 11:16:17 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: source_coverage
2025-02-05 11:16:17 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:16:17 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:16:17 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:16:17.687261
2025-02-05 11:16:17 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:16:17 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:16:17 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:16:17 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:16:17.687880', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='source_coverage', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:16:17 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 3 for instance 134518347843408
2025-02-05 11:16:17 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,602
2025-02-05 11:16:17 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:16:17 - research_components.research - ERROR - Error processing content and evaluations: Incompatible dimension for X and Y matrices: X.shape[1] == 186 while Y.shape[1] == 203
Traceback (most recent call last):
  File "/app/research_components/research.py", line 129, in run_tool
    coherence_score, coherence_details = coherence_evaluator.evaluate_logical_coherence(result)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/utils/logical_coherence.py", line 115, in evaluate_logical_coherence
    transition_scores = [
                        ^
  File "/app/utils/logical_coherence.py", line 116, in <listcomp>
    cosine_similarity(
  File "/usr/local/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 211, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 1577, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 190, in check_pairwise_arrays
    raise ValueError(
ValueError: Incompatible dimension for X and Y matrices: X.shape[1] == 186 while Y.shape[1] == 203
2025-02-05 11:16:17 - research_components.db - INFO - Storing query trace
2025-02-05 11:16:17 - research_components.db - INFO - Closing database connection
2025-02-05 11:17:05 - utils.token_tracking - INFO - Creating TokenUsageTracker singleton instance 134349851948816
2025-02-05 11:17:05 - research_components.research - INFO - Starting tool execution - Tool: General Agent
2025-02-05 11:17:05 - relevance_evaluator - INFO - Creating new AnswerRelevanceEvaluator instance
2025-02-05 11:17:05 - relevance_evaluator.evaluator - INFO - Initializing AnswerRelevanceEvaluator
2025-02-05 11:17:05 - relevance_evaluator.evaluator - DEBUG - Setting up spaCy pipeline
2025-02-05 11:17:05 - relevance_evaluator.evaluator - DEBUG - SpaCy pipeline components: sentencizer
2025-02-05 11:17:05 - relevance_evaluator.evaluator - DEBUG - Configuring TF-IDF vectorizer
2025-02-05 11:17:05 - relevance_evaluator.evaluator - DEBUG - Successfully initialized TfidfVectorizer
2025-02-05 11:17:05 - relevance_evaluator.evaluator - DEBUG - Vectorizer parameters: {'analyzer': 'word', 'binary': False, 'decode_error': 'strict', 'dtype': <class 'numpy.float64'>, 'encoding': 'utf-8', 'input': 'content', 'lowercase': True, 'max_df': 1.0, 'max_features': 5000, 'min_df': 1, 'ngram_range': (1, 1), 'norm': 'l2', 'preprocessor': None, 'smooth_idf': True, 'stop_words': 'english', 'strip_accents': 'unicode', 'sublinear_tf': False, 'token_pattern': '(?u)\\b\\w\\w+\\b', 'tokenizer': None, 'use_idf': True, 'vocabulary': None}
2025-02-05 11:17:05 - root - INFO - Starting news search for query: Sclerocarya birrea
2025-02-05 11:17:05 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): google.serper.dev:443
2025-02-05 11:17:06 - urllib3.connectionpool - DEBUG - https://google.serper.dev:443 "POST /news?q=Sclerocarya+birrea&gl=us&hl=en&num=10 HTTP/1.1" 200 5477
2025-02-05 11:17:06 - root - INFO - Processing 10 articles for topic: Sclerocarya birrea
2025-02-05 11:17:06 - root - ERROR - Error in decide_what_to_use: 'snippets'
2025-02-05 11:17:06 - root - INFO - Starting to scrape 10 news pages
2025-02-05 11:17:08 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:17:08 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:17:09 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full HTTP/1.1" 200 None
2025-02-05 11:17:09 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full (423 chars)
2025-02-05 11:17:11 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:17:11 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:17:12 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/26059/ HTTP/1.1" 200 30958
2025-02-05 11:17:13 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/26059/ (3516 chars)
2025-02-05 11:17:15 - root - INFO - Attempting to scrape content from www.goodhousekeeping.com
2025-02-05 11:17:15 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.goodhousekeeping.com:443
2025-02-05 11:17:15 - urllib3.connectionpool - DEBUG - https://www.goodhousekeeping.com:443 "GET /uk/beauty/skincare/a33793243/marula-oil/ HTTP/1.1" 200 None
2025-02-05 11:17:15 - root - INFO - Successfully scraped https://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/ (6088 chars)
2025-02-05 11:17:17 - root - INFO - Attempting to scrape content from www.sciencedirect.com
2025-02-05 11:17:17 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.sciencedirect.com:443
2025-02-05 11:17:17 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /science/article/abs/pii/S0378874115301963 HTTP/1.1" 302 143
2025-02-05 11:17:17 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /unsupported_browser HTTP/1.1" 400 None
2025-02-05 11:17:17 - root - ERROR - Error scraping https://www.sciencedirect.com/science/article/abs/pii/S0378874115301963: 400 Client Error: Bad Request for url: https://www.sciencedirect.com/unsupported_browser
2025-02-05 11:17:19 - root - INFO - Attempting to scrape content from www.medicalnewstoday.com
2025-02-05 11:17:19 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.medicalnewstoday.com:443
2025-02-05 11:17:20 - urllib3.connectionpool - DEBUG - https://www.medicalnewstoday.com:443 "GET /articles/marula-oil HTTP/1.1" 200 None
2025-02-05 11:17:20 - root - INFO - Successfully scraped https://www.medicalnewstoday.com/articles/marula-oil (5987 chars)
2025-02-05 11:17:22 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:17:22 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:17:23 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/chemistry/articles/10.3389/fchem.2021.670530/full HTTP/1.1" 200 None
2025-02-05 11:17:24 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full (218 chars)
2025-02-05 11:17:26 - root - INFO - Attempting to scrape content from nit.com.au
2025-02-05 11:17:26 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): nit.com.au:443
2025-02-05 11:17:26 - urllib3.connectionpool - DEBUG - https://nit.com.au:443 "GET /08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end HTTP/1.1" 403 None
2025-02-05 11:17:26 - root - ERROR - Error scraping https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end: 403 Client Error: Forbidden for url: https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end
2025-02-05 11:17:28 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:17:28 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:17:29 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/27070/ HTTP/1.1" 200 30553
2025-02-05 11:17:29 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/27070/ (3502 chars)
2025-02-05 11:17:31 - root - INFO - Attempting to scrape content from onlinelibrary.wiley.com
2025-02-05 11:17:31 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): onlinelibrary.wiley.com:443
2025-02-05 11:17:31 - urllib3.connectionpool - DEBUG - https://onlinelibrary.wiley.com:443 "GET /doi/abs/10.1111/aec.12983 HTTP/1.1" 403 None
2025-02-05 11:17:31 - root - ERROR - Error scraping https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983: 403 Client Error: Forbidden for url: https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983
2025-02-05 11:17:33 - root - INFO - Attempting to scrape content from www.givaudan.com
2025-02-05 11:17:33 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.givaudan.com:443
2025-02-05 11:17:34 - urllib3.connectionpool - DEBUG - https://www.givaudan.com:443 "GET /fragrance-beauty/active-beauty/products/marula-oil HTTP/1.1" 200 None
2025-02-05 11:17:34 - root - INFO - Successfully scraped https://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil (1038 chars)
2025-02-05 11:17:34 - root - INFO - Successfully scraped 7 pages out of 10 attempted
2025-02-05 11:17:34 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 11:17:34 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "Analyze and summarize the following search results:\n                \n                Query: Sclerocarya birrea\n                \n                Search Results:\n                ### The future of African wild fruits â€“ a drive towards responsible production and consumption of the marula fruit - Jun 25, 2024\nhttps://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full\n\n\n### Preliminary nutritional analysis of marula (Sclerocarya birrea) fruits from two Kenyan provenances - May 22, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/26059/\n\n\n### Meet the wonder oil for your skin and hair - 3 weeks ago\nhttps://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/\n\n\n### Safety and efficacy of Sclerocarya birrea (A.Rich.) Hochst (Marula) oil: A clinical perspective - Dec 24, 2015\nhttps://www.sciencedirect.com/science/article/abs/pii/S0378874115301963\n\n\n### Marula oil: Benefits, side effects, and how to use it - Apr 11, 2022\nhttps://www.medicalnewstoday.com/articles/marula-oil\n\n\n### Determination of Phenolics and Flavonoids of Some Useful Medicinal Plants and Bioassay-Guided Fractionation Substances of Sclerocarya birrea (A. Rich) Hochst Stem (Bark) Extract and Their Efficacy Against Salmonella typhi - Jun 26, 2024\nhttps://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full\n\n\n### Mangarri Man: the mighty marula tree could flourish in Australia's top end - Aug 8, 2024\nhttps://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end\n\n\n### Ecology and biology of Uapaca kirkiana, Strychnos cocculoides and Sclerocarya birrea in Southern Africa - Aug 31, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/27070/\n\n\n### Severe simulated herbivory constrains Sclerocarya birrea saplings regardless of resource availability - Dec 2, 2020\nhttps://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983\n\n\n### Marula oil - Aug 2, 2023\nhttps://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil\n\n                \n                Provide a comprehensive summary grouped by themes and include relevant links."}, {'role': 'user', 'content': "Summarize and group the search results based on this: 'Sclerocarya birrea'. Include links, dates, and snippets from the search results."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 11:17:34 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 11:17:34 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 11:17:34 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c36d06d0>
2025-02-05 11:17:34 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7a30f0e600e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 11:17:34 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c9af9a10>
2025-02-05 11:17:34 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 11:17:34 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 11:17:34 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 11:17:34 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 11:17:34 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 11:17:36 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 11:17:36 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d27eab6943403d-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5418'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'5.82s'), (b'x-request-id', b'req_01jkax8sxjet6vw1ahkah21m9y'), (b'Set-Cookie', b'__cf_bm=Apd7xiiqPcY_hWcAuXAbETYAeQ1fNdrjTPw91hOVS50-1738754256-1.0.1.1-uJr4utzx7cZELbOp.Tex64kHpEYVgJF2bGTeLkDP25CET2iWNPemZI2r5AW9lNEyBiGN.9PqwKcD3pOD.xapQg; path=/; expires=Wed, 05-Feb-25 11:47:36 GMT; domain=.groq.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 11:17:36 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 11:17:36 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 11:17:36 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 11:17:36 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 11:17:36 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 11:17:36 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 11:17:36 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d27eab6943403d-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5418', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '5.82s', 'x-request-id': 'req_01jkax8sxjet6vw1ahkah21m9y', 'set-cookie': '__cf_bm=Apd7xiiqPcY_hWcAuXAbETYAeQ1fNdrjTPw91hOVS50-1738754256-1.0.1.1-uJr4utzx7cZELbOp.Tex64kHpEYVgJF2bGTeLkDP25CET2iWNPemZI2r5AW9lNEyBiGN.9PqwKcD3pOD.xapQg; path=/; expires=Wed, 05-Feb-25 11:47:36 GMT; domain=.groq.com; HttpOnly; Secure; SameSite=None', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 11:17:36 - root - INFO - Inference completed in 2.49s
2025-02-05 11:17:36 - root - INFO - Tokens used - Input: 650, Output: 636, Total: 1286
2025-02-05 11:17:36 - root - INFO - Processing speed - 517.39 tokens/second
2025-02-05 11:17:36 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:17:36 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-summary-prompt
2025-02-05 11:17:36 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:17:36 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000455, Completion: $0.000445, Total: $0.000900
2025-02-05 11:17:36 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:17:36.956674
2025-02-05 11:17:36 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:17:36 - utils.token_tracking - INFO - Tokens used - Input: 650, Output: 636, Total: 1,286
2025-02-05 11:17:36 - utils.token_tracking - INFO - Processing speed - 2572.00 tokens/second
2025-02-05 11:17:36 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:17:36.957105', prompt_tokens=650, completion_tokens=636, model='llama3-70b-8192', prompt_id='dynamic-summary-prompt', cost=0.0009002, total_tokens=1286, processing_time=0.5, processing_speed=2572.0)
2025-02-05 11:17:36 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 1 for instance 134349851948816
2025-02-05 11:17:36 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,286
2025-02-05 11:17:36 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192']
2025-02-05 11:17:36 - root - INFO - Generated summary of news articles
2025-02-05 11:17:37 - research_components.db - INFO - Storing accuracy evaluation
2025-02-05 11:17:37 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:17:37 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: factual_accuracy
2025-02-05 11:17:37 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:17:37 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:17:37 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:17:37.287911
2025-02-05 11:17:37 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:17:37 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:17:37 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:17:37 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:17:37.288404', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='factual_accuracy', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:17:37 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 2 for instance 134349851948816
2025-02-05 11:17:37 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,436
2025-02-05 11:17:37 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:17:37 - research_components.db - INFO - Storing source coverage evaluation
2025-02-05 11:17:37 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:17:37 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: source_coverage
2025-02-05 11:17:37 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:17:37 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:17:37 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:17:37.309208
2025-02-05 11:17:37 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:17:37 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:17:37 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:17:37 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:17:37.309672', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='source_coverage', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:17:37 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 3 for instance 134349851948816
2025-02-05 11:17:37 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,586
2025-02-05 11:17:37 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:17:37 - research_components.research - ERROR - Error processing content and evaluations: Incompatible dimension for X and Y matrices: X.shape[1] == 225 while Y.shape[1] == 163
Traceback (most recent call last):
  File "/app/research_components/research.py", line 129, in run_tool
    coherence_score, coherence_details = coherence_evaluator.evaluate_logical_coherence(result)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/utils/logical_coherence.py", line 115, in evaluate_logical_coherence
    transition_scores = [
                        ^
  File "/app/utils/logical_coherence.py", line 116, in <listcomp>
    cosine_similarity(
  File "/usr/local/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 211, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 1577, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 190, in check_pairwise_arrays
    raise ValueError(
ValueError: Incompatible dimension for X and Y matrices: X.shape[1] == 225 while Y.shape[1] == 163
2025-02-05 11:17:37 - research_components.db - INFO - Storing query trace
2025-02-05 11:17:37 - research_components.db - INFO - Closing database connection
2025-02-05 11:18:16 - root - ERROR - Prompt file not found: test.txt
2025-02-05 11:18:16 - research_components.research - INFO - Starting tool execution - Tool: Analysis Agent
2025-02-05 11:18:16 - utils.analysis_evaluator - INFO - Creating new AnalysisEvaluator instance
2025-02-05 11:18:16 - utils.analysis_evaluator - INFO - Initializing AnalysisEvaluator
2025-02-05 11:18:16 - root - INFO - Starting analysis for query: tell me somthing about the data
2025-02-05 11:18:16 - root - INFO - Data validation results: {'missing_data': {'applicants': 0, 'n': 0}, 'datatypes': {'applicants': dtype('O'), 'n': dtype('int64')}, 'row_count': 20, 'column_count': 2}
2025-02-05 11:18:16 - root - WARNING - Error in web research: name 'GoogleSerperAPIWrapper' is not defined
2025-02-05 11:18:16 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 11:18:16 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'Analyze the following content and provide a comprehensive summary.\n                \n                Research Topic: {{research_topic}}\n                \n                Content:\n                {{content}}\n                \n                Provide key insights, main themes, and relevant conclusions.'}, {'role': 'user', 'content': "Analyze the dataset 'pat_app.csv' in the context of the query: tell me somthing about the data.\n                            Include relevant insights from web research where applicable.\n                            Focus on connecting statistical findings with broader industry/research context."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 11:18:16 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 11:18:16 - httpcore.connection - DEBUG - close.started
2025-02-05 11:18:16 - httpcore.connection - DEBUG - close.complete
2025-02-05 11:18:16 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 11:18:16 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c32992d0>
2025-02-05 11:18:16 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7a30f0e600e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 11:18:16 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c32c45d0>
2025-02-05 11:18:16 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 11:18:16 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 11:18:16 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 11:18:16 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 11:18:16 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 11:18:18 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 11:18:18 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d27fb22a6685ad-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5843'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'1.57s'), (b'x-request-id', b'req_01jkaxa2zcectv9pwpanh187bj'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 11:18:18 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 11:18:18 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 11:18:18 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 11:18:18 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 11:18:18 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 11:18:18 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 11:18:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d27fb22a6685ad-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5843', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '1.57s', 'x-request-id': 'req_01jkaxa2zcectv9pwpanh187bj', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 11:18:18 - root - INFO - Inference completed in 2.29s
2025-02-05 11:18:18 - root - INFO - Tokens used - Input: 103, Output: 671, Total: 774
2025-02-05 11:18:18 - root - INFO - Processing speed - 338.59 tokens/second
2025-02-05 11:18:18 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:18:18 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: fallback-prompt
2025-02-05 11:18:18 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:18:18 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000072, Completion: $0.000470, Total: $0.000542
2025-02-05 11:18:18 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:18:18.904405
2025-02-05 11:18:18 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:18:18 - utils.token_tracking - INFO - Tokens used - Input: 103, Output: 671, Total: 774
2025-02-05 11:18:18 - utils.token_tracking - INFO - Processing speed - 1548.00 tokens/second
2025-02-05 11:18:18 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:18:18.905101', prompt_tokens=103, completion_tokens=671, model='llama3-70b-8192', prompt_id='fallback-prompt', cost=0.0005418, total_tokens=774, processing_time=0.5, processing_speed=1548.0)
2025-02-05 11:18:18 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 4 for instance 134349851948816
2025-02-05 11:18:18 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 2,360
2025-02-05 11:18:18 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:18:18 - utils.analysis_evaluator - INFO - Starting comprehensive analysis evaluation
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Starting numerical accuracy evaluation
2025-02-05 11:18:18 - utils.analysis_evaluator - INFO - Found 0 numerical calculations to evaluate
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Starting query understanding evaluation
2025-02-05 11:18:18 - utils.analysis_evaluator - INFO - Analyzing query with 6 unique terms
2025-02-05 11:18:18 - utils.analysis_evaluator - INFO - Term coverage: 66.67% (4/6)
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Analytical element 'methodology': Present
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Analytical element 'findings': Present
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Analytical element 'statistics': Present
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Analytical element 'data_reference': Present
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Starting data validation evaluation
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Validation check 'missing_data': Missing
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Validation check 'outliers': Missing
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Validation check 'distribution': Present
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Validation check 'data_types': Missing
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Starting reasoning transparency evaluation
2025-02-05 11:18:18 - utils.analysis_evaluator - INFO - Analyzing 33 sentences for reasoning transparency
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Transparency check 'explains_steps': Present
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Transparency check 'states_assumptions': Present
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Transparency check 'mentions_limitations': Present
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Transparency check 'cites_evidence': Present
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Transparency check 'has_conclusion': Missing
2025-02-05 11:18:18 - utils.analysis_evaluator - DEBUG - Transparency check 'has_examples': Present
2025-02-05 11:18:18 - utils.analysis_evaluator - INFO - Average sentence length: 15.3 words
2025-02-05 11:18:18 - utils.analysis_evaluator - INFO - Numerical Accuracy score: 0.00%
2025-02-05 11:18:18 - utils.analysis_evaluator - INFO - Query Understanding score: 83.33%
2025-02-05 11:18:18 - utils.analysis_evaluator - INFO - Data Validation score: 25.00%
2025-02-05 11:18:18 - utils.analysis_evaluator - INFO - Reasoning Transparency score: 83.33%
2025-02-05 11:18:18 - utils.analysis_evaluator - INFO - Overall evaluation score: 47.92%
2025-02-05 11:18:18 - research_components.db - INFO - Storing analysis evaluation
2025-02-05 11:18:18 - research_components.db - INFO - Storing content result
2025-02-05 11:18:18 - research_components.db - INFO - Successfully stored content with ID: 30
2025-02-05 11:18:18 - research_components.db - INFO - Storing query trace
2025-02-05 11:18:18 - research_components.db - INFO - Closing database connection
2025-02-05 11:20:12 - research_components.research - INFO - Starting tool execution - Tool: Analysis Agent
2025-02-05 11:20:12 - utils.analysis_evaluator - INFO - Creating new AnalysisEvaluator instance
2025-02-05 11:20:12 - utils.analysis_evaluator - INFO - Initializing AnalysisEvaluator
2025-02-05 11:20:12 - root - INFO - Starting analysis for query: tell me somthing about the data
2025-02-05 11:20:12 - root - INFO - Data validation results: {'missing_data': {'applicants': 0, 'n': 0}, 'datatypes': {'applicants': dtype('O'), 'n': dtype('int64')}, 'row_count': 20, 'column_count': 2}
2025-02-05 11:20:12 - root - WARNING - Error in web research: name 'GoogleSerperAPIWrapper' is not defined
2025-02-05 11:20:12 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 11:20:12 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '**DATA ANALYSIS REPORT**  \n\n**Subject:** Analysis of {\'filename\': \'pat_app.csv\', \'shape\': (20, 2), \'columns\': [\'applicants\', \'n\'], \'dtypes\': {\'applicants\': dtype(\'O\'), \'n\': dtype(\'int64\')}, \'missing_values\': {\'applicants\': 0, \'n\': 0}, \'analysis_results\': {\'descriptive_stats\': {\'n\': {\'count\': 20.0, \'mean\': 5.75, \'std\': 2.7313964040009777, \'min\': 3.0, \'25%\': 4.0, \'50%\': 5.0, \'75%\': 7.25, \'max\': 14.0}}, \'correlations\': {\'n\': {\'n\': 1.0}}, \'missing_values\': {\'applicants\': 0, \'n\': 0}, \'unique_counts\': {\'applicants\': 20, \'n\': 8}, \'categorical_summaries\': {\'applicants\': {\'Procter & Gamble\': 1, \'3 In 1 Dental Pllc\': 1, \'Balwani Gul P\': 1, \'Alfa Biogene Int B V\': 1, \'Vital Solutions Swiss Ag\': 1, \'Univ Washington State\': 1, \'Univ Pretoria\': 1, \'Colgate Palmolive Co\': 1, \'Alfa Biogene Internat B V\': 1, \'Ionia Azure Ag\': 1, \'Hayashibara Co\': 1, \'Halliburton Energy Services Inc\': 1, \'Fujii Hajime\': 1, \'Buchwald-Werner Sybille\': 1, \'Warren Raphael\': 1, \'Undoo Llc\': 1, \'Senomyx Inc\': 1, \'Capsulent\': 1, \'Amino Up Chemical Co Ltd\': 1, \'Chan Jody Wai-Han\': 1}}, \'outliers\': {\'n\': 1}}, \'web_research\': []}  \n**Query Focus:** tell me somthing about the data  \n**Report Date:** [Current Date]  \n\n## **EXECUTIVE SUMMARY**  \n- This report presents key findings and their significance.  \n- The insights are analyzed in relation to industry trends, company behaviors, and economic implications.  \n- Notable patterns and unexpected results are highlighted.  \n\n## **REPORT CONTENTS**  \n\n### **I. DATASET OVERVIEW**  \n- The dataset\'s scope, purpose, and key attributes are outlined.  \n- The timeframe covered and any notable characteristics are detailed.  \n- Real-world context is provided, explaining the industries or entities represented and broader implications.  \n\n### **II. METHODOLOGY**  \n- The analytical approaches used are described.  \n- Statistical methods, models, or tools applied are listed.  \n- Data cleaning, transformations, and preprocessing steps are detailed.  \n\n### **III. KEY FINDINGS**  \n\n#### **A. Primary Insights**  \n- The most significant discoveries are summarized.  \n- Findings are supported with specific data points, percentages, and comparisons.  \n- The insights are linked to real-world contexts, specifying affected companies, sectors, or markets.  \n\n#### **B. Trends and Patterns**  \n- Overarching trends, recurring patterns, and anomalies are identified.  \n- Seasonal, cyclical, or geographic variations are highlighted.  \n- The relevance of these trends in business, economic, or technological contexts is analyzed.  \n\n### **IV. INDUSTRY CONTEXT**  \n- Findings are examined in relation to broader market or industry trends.  \n- Examples of real-world companies or organizations involved are included.  \n- For datasets like "pat_app" (patent applicants), the types of companies filing patents and their technological specializations are specified.  \n- Relevant external data points are incorporated to validate insights.  \n\n### **V. CONCLUSIONS**  \n- The most important takeaways are summarized.  \n- Actionable insights for decision-making are highlighted.  \n- Specific aspects of the original query are addressed with practical applications for businesses or policymakers.  \n\n'}, {'role': 'user', 'content': "Analyze the dataset 'pat_app.csv' in the context of the query: tell me somthing about the data.\n                            Include relevant insights from web research where applicable.\n                            Focus on connecting statistical findings with broader industry/research context."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 11:20:12 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 11:20:12 - httpcore.connection - DEBUG - close.started
2025-02-05 11:20:12 - httpcore.connection - DEBUG - close.complete
2025-02-05 11:20:12 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 11:20:12 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c329a010>
2025-02-05 11:20:12 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7a30f0e600e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 11:20:12 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c3299cd0>
2025-02-05 11:20:12 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 11:20:12 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 11:20:12 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 11:20:12 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 11:20:12 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 11:20:15 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 11:20:15 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d28286ac6f4174-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5117'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'8.83s'), (b'x-request-id', b'req_01jkaxdm67fpq9nees4k4bakk2'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 11:20:15 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 11:20:15 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 11:20:15 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 11:20:15 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 11:20:15 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 11:20:15 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 11:20:15 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d28286ac6f4174-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5117', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '8.83s', 'x-request-id': 'req_01jkaxdm67fpq9nees4k4bakk2', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 11:20:15 - root - INFO - Inference completed in 2.56s
2025-02-05 11:20:15 - root - INFO - Tokens used - Input: 926, Output: 746, Total: 1672
2025-02-05 11:20:15 - root - INFO - Processing speed - 653.30 tokens/second
2025-02-05 11:20:15 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:20:15 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-prompt-data_analysis.txt
2025-02-05 11:20:15 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:20:15 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000648, Completion: $0.000522, Total: $0.001170
2025-02-05 11:20:15 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:20:15.094561
2025-02-05 11:20:15 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:20:15 - utils.token_tracking - INFO - Tokens used - Input: 926, Output: 746, Total: 1,672
2025-02-05 11:20:15 - utils.token_tracking - INFO - Processing speed - 3344.00 tokens/second
2025-02-05 11:20:15 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:20:15.098450', prompt_tokens=926, completion_tokens=746, model='llama3-70b-8192', prompt_id='dynamic-prompt-data_analysis.txt', cost=0.0011704, total_tokens=1672, processing_time=0.5, processing_speed=3344.0)
2025-02-05 11:20:15 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 5 for instance 134349851948816
2025-02-05 11:20:15 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 4,032
2025-02-05 11:20:15 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:20:15 - utils.analysis_evaluator - INFO - Starting comprehensive analysis evaluation
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Starting numerical accuracy evaluation
2025-02-05 11:20:15 - utils.analysis_evaluator - INFO - Found 0 numerical calculations to evaluate
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Starting query understanding evaluation
2025-02-05 11:20:15 - utils.analysis_evaluator - INFO - Analyzing query with 6 unique terms
2025-02-05 11:20:15 - utils.analysis_evaluator - INFO - Term coverage: 83.33% (5/6)
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Analytical element 'methodology': Present
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Analytical element 'findings': Present
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Analytical element 'statistics': Present
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Analytical element 'data_reference': Present
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Starting data validation evaluation
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Validation check 'missing_data': Present
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Validation check 'outliers': Missing
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Validation check 'distribution': Present
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Validation check 'data_types': Present
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Starting reasoning transparency evaluation
2025-02-05 11:20:15 - utils.analysis_evaluator - INFO - Analyzing 28 sentences for reasoning transparency
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Transparency check 'explains_steps': Present
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Transparency check 'states_assumptions': Missing
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Transparency check 'mentions_limitations': Missing
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Transparency check 'cites_evidence': Missing
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Transparency check 'has_conclusion': Missing
2025-02-05 11:20:15 - utils.analysis_evaluator - DEBUG - Transparency check 'has_examples': Present
2025-02-05 11:20:15 - utils.analysis_evaluator - INFO - Average sentence length: 20.8 words
2025-02-05 11:20:15 - utils.analysis_evaluator - INFO - Numerical Accuracy score: 0.00%
2025-02-05 11:20:15 - utils.analysis_evaluator - INFO - Query Understanding score: 91.67%
2025-02-05 11:20:15 - utils.analysis_evaluator - INFO - Data Validation score: 75.00%
2025-02-05 11:20:15 - utils.analysis_evaluator - INFO - Reasoning Transparency score: 33.33%
2025-02-05 11:20:15 - utils.analysis_evaluator - INFO - Overall evaluation score: 50.00%
2025-02-05 11:20:15 - research_components.db - INFO - Storing analysis evaluation
2025-02-05 11:20:15 - research_components.db - INFO - Storing content result
2025-02-05 11:20:15 - research_components.db - INFO - Successfully stored content with ID: 31
2025-02-05 11:20:15 - research_components.db - INFO - Storing query trace
2025-02-05 11:20:15 - research_components.db - INFO - Closing database connection
2025-02-05 11:21:59 - research_components.research - INFO - Starting tool execution - Tool: General Agent
2025-02-05 11:21:59 - relevance_evaluator - INFO - Creating new AnswerRelevanceEvaluator instance
2025-02-05 11:21:59 - relevance_evaluator.evaluator - INFO - Initializing AnswerRelevanceEvaluator
2025-02-05 11:21:59 - relevance_evaluator.evaluator - DEBUG - Setting up spaCy pipeline
2025-02-05 11:21:59 - relevance_evaluator.evaluator - DEBUG - SpaCy pipeline components: sentencizer
2025-02-05 11:21:59 - relevance_evaluator.evaluator - DEBUG - Configuring TF-IDF vectorizer
2025-02-05 11:21:59 - relevance_evaluator.evaluator - DEBUG - Successfully initialized TfidfVectorizer
2025-02-05 11:21:59 - relevance_evaluator.evaluator - DEBUG - Vectorizer parameters: {'analyzer': 'word', 'binary': False, 'decode_error': 'strict', 'dtype': <class 'numpy.float64'>, 'encoding': 'utf-8', 'input': 'content', 'lowercase': True, 'max_df': 1.0, 'max_features': 5000, 'min_df': 1, 'ngram_range': (1, 1), 'norm': 'l2', 'preprocessor': None, 'smooth_idf': True, 'stop_words': 'english', 'strip_accents': 'unicode', 'sublinear_tf': False, 'token_pattern': '(?u)\\b\\w\\w+\\b', 'tokenizer': None, 'use_idf': True, 'vocabulary': None}
2025-02-05 11:21:59 - root - INFO - Starting news search for query: Sclerocarya birrea
2025-02-05 11:21:59 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): google.serper.dev:443
2025-02-05 11:22:00 - urllib3.connectionpool - DEBUG - https://google.serper.dev:443 "POST /news?q=Sclerocarya+birrea&gl=us&hl=en&num=10 HTTP/1.1" 200 5493
2025-02-05 11:22:00 - root - INFO - Processing 10 articles for topic: Sclerocarya birrea
2025-02-05 11:22:00 - root - ERROR - Error in decide_what_to_use: 'snippets'
2025-02-05 11:22:00 - root - INFO - Starting to scrape 10 news pages
2025-02-05 11:22:02 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:22:02 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:22:03 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full HTTP/1.1" 200 None
2025-02-05 11:22:04 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full (423 chars)
2025-02-05 11:22:06 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:22:06 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:22:06 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/26059/ HTTP/1.1" 200 30958
2025-02-05 11:22:07 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/26059/ (3516 chars)
2025-02-05 11:22:09 - root - INFO - Attempting to scrape content from www.goodhousekeeping.com
2025-02-05 11:22:09 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.goodhousekeeping.com:443
2025-02-05 11:22:09 - urllib3.connectionpool - DEBUG - https://www.goodhousekeeping.com:443 "GET /uk/beauty/skincare/a33793243/marula-oil/ HTTP/1.1" 200 None
2025-02-05 11:22:09 - root - INFO - Successfully scraped https://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/ (6088 chars)
2025-02-05 11:22:11 - root - INFO - Attempting to scrape content from www.sciencedirect.com
2025-02-05 11:22:11 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.sciencedirect.com:443
2025-02-05 11:22:11 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /science/article/abs/pii/S0378874115301963 HTTP/1.1" 302 143
2025-02-05 11:22:11 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /unsupported_browser HTTP/1.1" 400 None
2025-02-05 11:22:11 - root - ERROR - Error scraping https://www.sciencedirect.com/science/article/abs/pii/S0378874115301963: 400 Client Error: Bad Request for url: https://www.sciencedirect.com/unsupported_browser
2025-02-05 11:22:13 - root - INFO - Attempting to scrape content from www.medicalnewstoday.com
2025-02-05 11:22:13 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.medicalnewstoday.com:443
2025-02-05 11:22:14 - urllib3.connectionpool - DEBUG - https://www.medicalnewstoday.com:443 "GET /articles/marula-oil HTTP/1.1" 200 None
2025-02-05 11:22:15 - root - INFO - Successfully scraped https://www.medicalnewstoday.com/articles/marula-oil (5987 chars)
2025-02-05 11:22:17 - root - INFO - Attempting to scrape content from www.frontiersin.org
2025-02-05 11:22:17 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.frontiersin.org:443
2025-02-05 11:22:18 - urllib3.connectionpool - DEBUG - https://www.frontiersin.org:443 "GET /journals/chemistry/articles/10.3389/fchem.2021.670530/full HTTP/1.1" 200 None
2025-02-05 11:22:18 - root - INFO - Successfully scraped https://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full (218 chars)
2025-02-05 11:22:20 - root - INFO - Attempting to scrape content from nit.com.au
2025-02-05 11:22:20 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): nit.com.au:443
2025-02-05 11:22:20 - urllib3.connectionpool - DEBUG - https://nit.com.au:443 "GET /08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end HTTP/1.1" 403 None
2025-02-05 11:22:20 - root - ERROR - Error scraping https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end: 403 Client Error: Forbidden for url: https://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end
2025-02-05 11:22:22 - root - INFO - Attempting to scrape content from www.cifor-icraf.org
2025-02-05 11:22:22 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cifor-icraf.org:443
2025-02-05 11:22:23 - urllib3.connectionpool - DEBUG - https://www.cifor-icraf.org:443 "GET /knowledge/publication/27070/ HTTP/1.1" 200 30553
2025-02-05 11:22:23 - root - INFO - Successfully scraped https://www.cifor-icraf.org/knowledge/publication/27070/ (3502 chars)
2025-02-05 11:22:25 - root - INFO - Attempting to scrape content from onlinelibrary.wiley.com
2025-02-05 11:22:25 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): onlinelibrary.wiley.com:443
2025-02-05 11:22:26 - urllib3.connectionpool - DEBUG - https://onlinelibrary.wiley.com:443 "GET /doi/abs/10.1111/aec.12983 HTTP/1.1" 403 None
2025-02-05 11:22:26 - root - ERROR - Error scraping https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983: 403 Client Error: Forbidden for url: https://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983
2025-02-05 11:22:28 - root - INFO - Attempting to scrape content from www.givaudan.com
2025-02-05 11:22:28 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.givaudan.com:443
2025-02-05 11:22:29 - urllib3.connectionpool - DEBUG - https://www.givaudan.com:443 "GET /fragrance-beauty/active-beauty/products/marula-oil HTTP/1.1" 200 None
2025-02-05 11:22:29 - root - INFO - Successfully scraped https://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil (1038 chars)
2025-02-05 11:22:29 - root - INFO - Successfully scraped 7 pages out of 10 attempted
2025-02-05 11:22:29 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 11:22:29 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "Analyze and summarize the following search results:\n                \n                Query: Sclerocarya birrea\n                \n                Search Results:\n                ### The future of African wild fruits â€“ a drive towards responsible production and consumption of the marula fruit - Jun 25, 2024\nhttps://www.frontiersin.org/journals/sustainable-food-systems/articles/10.3389/fsufs.2023.1294437/full\n\n\n### Preliminary nutritional analysis of marula (Sclerocarya birrea) fruits from two Kenyan provenances - May 22, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/26059/\n\n\n### Meet the wonder oil for your skin and hair - 3 weeks ago\nhttps://www.goodhousekeeping.com/uk/beauty/skincare/a33793243/marula-oil/\n\n\n### Safety and efficacy of Sclerocarya birrea (A.Rich.) Hochst (Marula) oil: A clinical perspective - Dec 24, 2015\nhttps://www.sciencedirect.com/science/article/abs/pii/S0378874115301963\n\n\n### Marula oil: Benefits, side effects, and how to use it - Apr 11, 2022\nhttps://www.medicalnewstoday.com/articles/marula-oil\n\n\n### Determination of Phenolics and Flavonoids of Some Useful Medicinal Plants and Bioassay-Guided Fractionation Substances of Sclerocarya birrea (A. Rich) Hochst Stem (Bark) Extract and Their Efficacy Against Salmonella typhi - Jun 26, 2024\nhttps://www.frontiersin.org/journals/chemistry/articles/10.3389/fchem.2021.670530/full\n\n\n### Mangarri Man: the mighty marula tree could flourish in Australia's top end - Aug 8, 2024\nhttps://nit.com.au/08-08-2024/12979/mangarri-man-the-mighty-marula-tree-could-flourish-in-australias-top-end\n\n\n### Ecology and biology of Uapaca kirkiana, Strychnos cocculoides and Sclerocarya birrea in Southern Africa - Aug 31, 2024\nhttps://www.cifor-icraf.org/knowledge/publication/27070/\n\n\n### Severe simulated herbivory constrains Sclerocarya birrea saplings regardless of resource availability - Dec 2, 2020\nhttps://onlinelibrary.wiley.com/doi/abs/10.1111/aec.12983\n\n\n### Marula oil - Aug 2, 2023\nhttps://www.givaudan.com/fragrance-beauty/active-beauty/products/marula-oil\n\n                \n                Provide a comprehensive summary grouped by themes and include relevant links."}, {'role': 'user', 'content': "Summarize and group the search results based on this: 'Sclerocarya birrea'. Include links, dates, and snippets from the search results."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 11:22:29 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 11:22:29 - httpcore.connection - DEBUG - close.started
2025-02-05 11:22:29 - httpcore.connection - DEBUG - close.complete
2025-02-05 11:22:29 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 11:22:29 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c21c3e90>
2025-02-05 11:22:29 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7a30f0e600e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 11:22:29 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c326bdd0>
2025-02-05 11:22:29 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 11:22:29 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 11:22:29 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 11:22:29 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 11:22:29 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 11:22:32 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 11:22:32 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d285df4e97403d-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5418'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'5.82s'), (b'x-request-id', b'req_01jkaxht0wevwawk0bq8z3jb42'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 11:22:32 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 11:22:32 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 11:22:32 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 11:22:32 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 11:22:32 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 11:22:32 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 11:22:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d285df4e97403d-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5418', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '5.82s', 'x-request-id': 'req_01jkaxht0wevwawk0bq8z3jb42', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 11:22:32 - root - INFO - Inference completed in 3.03s
2025-02-05 11:22:32 - root - INFO - Tokens used - Input: 650, Output: 908, Total: 1558
2025-02-05 11:22:32 - root - INFO - Processing speed - 513.52 tokens/second
2025-02-05 11:22:32 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:22:32 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-summary-prompt
2025-02-05 11:22:32 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:22:32 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000455, Completion: $0.000636, Total: $0.001091
2025-02-05 11:22:32 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:22:32.619330
2025-02-05 11:22:32 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:22:32 - utils.token_tracking - INFO - Tokens used - Input: 650, Output: 908, Total: 1,558
2025-02-05 11:22:32 - utils.token_tracking - INFO - Processing speed - 3116.00 tokens/second
2025-02-05 11:22:32 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:22:32.623184', prompt_tokens=650, completion_tokens=908, model='llama3-70b-8192', prompt_id='dynamic-summary-prompt', cost=0.0010906000000000002, total_tokens=1558, processing_time=0.5, processing_speed=3116.0)
2025-02-05 11:22:32 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 6 for instance 134349851948816
2025-02-05 11:22:32 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 5,590
2025-02-05 11:22:32 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:22:32 - root - INFO - Generated summary of news articles
2025-02-05 11:22:33 - research_components.db - INFO - Storing accuracy evaluation
2025-02-05 11:22:33 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:22:33 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: factual_accuracy
2025-02-05 11:22:33 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:22:33 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:22:33 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:22:33.089270
2025-02-05 11:22:33 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:22:33 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:22:33 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:22:33 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:22:33.090481', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='factual_accuracy', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:22:33 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 7 for instance 134349851948816
2025-02-05 11:22:33 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 5,740
2025-02-05 11:22:33 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:22:33 - research_components.db - INFO - Storing source coverage evaluation
2025-02-05 11:22:33 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:22:33 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: source_coverage
2025-02-05 11:22:33 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:22:33 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:22:33 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:22:33.108595
2025-02-05 11:22:33 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:22:33 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:22:33 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:22:33 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:22:33.108936', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='source_coverage', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:22:33 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 8 for instance 134349851948816
2025-02-05 11:22:33 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 5,890
2025-02-05 11:22:33 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:22:33 - research_components.research - ERROR - Error processing content and evaluations: Incompatible dimension for X and Y matrices: X.shape[1] == 159 while Y.shape[1] == 240
Traceback (most recent call last):
  File "/app/research_components/research.py", line 129, in run_tool
    coherence_score, coherence_details = coherence_evaluator.evaluate_logical_coherence(result)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/utils/logical_coherence.py", line 115, in evaluate_logical_coherence
    transition_scores = [
                        ^
  File "/app/utils/logical_coherence.py", line 116, in <listcomp>
    cosine_similarity(
  File "/usr/local/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 211, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 1577, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 190, in check_pairwise_arrays
    raise ValueError(
ValueError: Incompatible dimension for X and Y matrices: X.shape[1] == 159 while Y.shape[1] == 240
2025-02-05 11:22:33 - research_components.db - INFO - Storing query trace
2025-02-05 11:22:33 - research_components.db - INFO - Closing database connection
2025-02-05 11:23:03 - research_components.research - INFO - Starting tool execution - Tool: General Agent
2025-02-05 11:23:03 - relevance_evaluator - INFO - Creating new AnswerRelevanceEvaluator instance
2025-02-05 11:23:03 - relevance_evaluator.evaluator - INFO - Initializing AnswerRelevanceEvaluator
2025-02-05 11:23:03 - relevance_evaluator.evaluator - DEBUG - Setting up spaCy pipeline
2025-02-05 11:23:03 - relevance_evaluator.evaluator - DEBUG - SpaCy pipeline components: sentencizer
2025-02-05 11:23:03 - relevance_evaluator.evaluator - DEBUG - Configuring TF-IDF vectorizer
2025-02-05 11:23:03 - relevance_evaluator.evaluator - DEBUG - Successfully initialized TfidfVectorizer
2025-02-05 11:23:03 - relevance_evaluator.evaluator - DEBUG - Vectorizer parameters: {'analyzer': 'word', 'binary': False, 'decode_error': 'strict', 'dtype': <class 'numpy.float64'>, 'encoding': 'utf-8', 'input': 'content', 'lowercase': True, 'max_df': 1.0, 'max_features': 5000, 'min_df': 1, 'ngram_range': (1, 1), 'norm': 'l2', 'preprocessor': None, 'smooth_idf': True, 'stop_words': 'english', 'strip_accents': 'unicode', 'sublinear_tf': False, 'token_pattern': '(?u)\\b\\w\\w+\\b', 'tokenizer': None, 'use_idf': True, 'vocabulary': None}
2025-02-05 11:23:03 - root - INFO - Starting news search for query: sea cucumber
2025-02-05 11:23:03 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): google.serper.dev:443
2025-02-05 11:23:04 - urllib3.connectionpool - DEBUG - https://google.serper.dev:443 "POST /news?q=sea+cucumber&gl=us&hl=en&num=10 HTTP/1.1" 200 5356
2025-02-05 11:23:04 - root - INFO - Processing 10 articles for topic: sea cucumber
2025-02-05 11:23:04 - root - ERROR - Error in decide_what_to_use: 'snippets'
2025-02-05 11:23:04 - root - INFO - Starting to scrape 10 news pages
2025-02-05 11:23:06 - root - INFO - Attempting to scrape content from www.miamiherald.com
2025-02-05 11:23:06 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.miamiherald.com:443
2025-02-05 11:23:21 - root - ERROR - Error scraping https://www.miamiherald.com/news/nation-world/world/article299498464.html: HTTPSConnectionPool(host='www.miamiherald.com', port=443): Read timed out. (read timeout=15)
2025-02-05 11:23:23 - root - INFO - Attempting to scrape content from www.nbcnews.com
2025-02-05 11:23:23 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.nbcnews.com:443
2025-02-05 11:23:27 - urllib3.connectionpool - DEBUG - https://www.nbcnews.com:443 "GET /news/world/north-korea-tourists-kim-jong-il-birthday-first-time-covid-pandemic-rcna190554 HTTP/1.1" 200 60540
2025-02-05 11:23:27 - root - INFO - Successfully scraped https://www.nbcnews.com/news/world/north-korea-tourists-kim-jong-il-birthday-first-time-covid-pandemic-rcna190554 (4494 chars)
2025-02-05 11:23:29 - root - INFO - Attempting to scrape content from www.thetimes.com
2025-02-05 11:23:29 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.thetimes.com:443
2025-02-05 11:23:32 - urllib3.connectionpool - DEBUG - https://www.thetimes.com:443 "GET /world/asia/article/wish-you-were-here-north-korea-opens-sea-cucumber-farm-to-tourists-lhwcfwhpc HTTP/1.1" 200 None
2025-02-05 11:23:32 - root - INFO - Successfully scraped https://www.thetimes.com/world/asia/article/wish-you-were-here-north-korea-opens-sea-cucumber-farm-to-tourists-lhwcfwhpc (1622 chars)
2025-02-05 11:23:34 - root - INFO - Attempting to scrape content from fernandinaobserver.com
2025-02-05 11:23:34 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fernandinaobserver.com:443
2025-02-05 11:23:35 - urllib3.connectionpool - DEBUG - https://fernandinaobserver.com:443 "GET /stories/pats-wildways-sea-cucumbers,31884 HTTP/1.1" 301 None
2025-02-05 11:23:35 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.fernandinaobserver.org:443
2025-02-05 11:23:36 - urllib3.connectionpool - DEBUG - https://www.fernandinaobserver.org:443 "GET /stories/pats-wildways-sea-cucumbers,31884 HTTP/1.1" 200 11411
2025-02-05 11:23:36 - root - INFO - Successfully scraped https://fernandinaobserver.com/stories/pats-wildways-sea-cucumbers,31884 (4708 chars)
2025-02-05 11:23:38 - root - INFO - Attempting to scrape content from www.nature.com
2025-02-05 11:23:38 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.nature.com:443
2025-02-05 11:23:39 - urllib3.connectionpool - DEBUG - https://www.nature.com:443 "GET /articles/s41467-024-53205-5 HTTP/1.1" 303 150
2025-02-05 11:23:39 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): idp.nature.com:443
2025-02-05 11:23:40 - urllib3.connectionpool - DEBUG - https://idp.nature.com:443 "GET /authorize?response_type=cookie&client_id=grover&redirect_uri=https%3A%2F%2Fwww.nature.com%2Farticles%2Fs41467-024-53205-5 HTTP/1.1" 302 0
2025-02-05 11:23:40 - urllib3.connectionpool - DEBUG - https://idp.nature.com:443 "GET /transit?redirect_uri=https%3A%2F%2Fwww.nature.com%2Farticles%2Fs41467-024-53205-5&code=562aaaa6-b98d-4568-b48e-967dca232238 HTTP/1.1" 302 0
2025-02-05 11:23:41 - urllib3.connectionpool - DEBUG - https://www.nature.com:443 "GET /articles/s41467-024-53205-5 HTTP/1.1" 200 None
2025-02-05 11:23:41 - root - INFO - Successfully scraped https://www.nature.com/articles/s41467-024-53205-5 (83319 chars)
2025-02-05 11:23:43 - root - INFO - Attempting to scrape content from biologicaldiversity.org
2025-02-05 11:23:43 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): biologicaldiversity.org:443
2025-02-05 11:23:44 - urllib3.connectionpool - DEBUG - https://biologicaldiversity.org:443 "GET /w/news/press-releases/petition-urges-mexico-to-protect-chocolate-chip-sea-cucumber-2024-12-11/ HTTP/1.1" 200 None
2025-02-05 11:23:44 - root - INFO - Successfully scraped https://biologicaldiversity.org/w/news/press-releases/petition-urges-mexico-to-protect-chocolate-chip-sea-cucumber-2024-12-11/ (3438 chars)
2025-02-05 11:23:46 - root - INFO - Attempting to scrape content from news.cornell.edu
2025-02-05 11:23:46 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): news.cornell.edu:443
2025-02-05 11:23:48 - urllib3.connectionpool - DEBUG - https://news.cornell.edu:443 "GET /stories/2024/06/endangered-sea-cucumbers-sale-nyc-food-markets HTTP/1.1" 200 11622
2025-02-05 11:23:49 - root - INFO - Successfully scraped https://news.cornell.edu/stories/2024/06/endangered-sea-cucumbers-sale-nyc-food-markets (4365 chars)
2025-02-05 11:23:51 - root - INFO - Attempting to scrape content from www.discoverwildlife.com
2025-02-05 11:23:51 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.discoverwildlife.com:443
2025-02-05 11:23:55 - urllib3.connectionpool - DEBUG - https://www.discoverwildlife.com:443 "GET /animal-facts/disgusting-animals HTTP/1.1" 200 None
2025-02-05 11:23:55 - root - INFO - Successfully scraped https://www.discoverwildlife.com/animal-facts/disgusting-animals (10601 chars)
2025-02-05 11:23:57 - root - INFO - Attempting to scrape content from pulitzercenter.org
2025-02-05 11:23:57 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): pulitzercenter.org:443
2025-02-05 11:23:57 - urllib3.connectionpool - DEBUG - https://pulitzercenter.org:443 "GET /stories/appetite-sea-cucumbers-connects-far-east-caribbean HTTP/1.1" 403 None
2025-02-05 11:23:57 - root - ERROR - Error scraping https://pulitzercenter.org/stories/appetite-sea-cucumbers-connects-far-east-caribbean: 403 Client Error: Forbidden for url: https://pulitzercenter.org/stories/appetite-sea-cucumbers-connects-far-east-caribbean
2025-02-05 11:23:59 - root - INFO - Attempting to scrape content from www.cbp.gov
2025-02-05 11:23:59 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cbp.gov:443
2025-02-05 11:24:00 - urllib3.connectionpool - DEBUG - https://www.cbp.gov:443 "GET /newsroom/local-media-release/cbp-finds-sea-cucumber-smuggled-us HTTP/1.1" 200 17426
2025-02-05 11:24:00 - root - INFO - Successfully scraped https://www.cbp.gov/newsroom/local-media-release/cbp-finds-sea-cucumber-smuggled-us (2562 chars)
2025-02-05 11:24:00 - root - INFO - Successfully scraped 8 pages out of 10 attempted
2025-02-05 11:24:00 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 11:24:00 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "Analyze and summarize the following search results:\n                \n                Query: sea cucumber\n                \n                Search Results:\n                ### â€˜Longâ€™ purple sea creature â€” with 24 â€˜feetâ€™ â€” pulled from depths. Itâ€™s a new species - 4 days ago\nhttps://www.miamiherald.com/news/nation-world/world/article299498464.html\n\n\n### North Korea reopens to tourists after 5 years - 20 hours ago\nhttps://www.nbcnews.com/news/world/north-korea-tourists-kim-jong-il-birthday-first-time-covid-pandemic-rcna190554\n\n\n### Wish you were here? North Korea opens sea cucumber farm to tourists - 1 day ago\nhttps://www.thetimes.com/world/asia/article/wish-you-were-here-north-korea-opens-sea-cucumber-farm-to-tourists-lhwcfwhpc\n\n\n### Patâ€™s Wildways: Sea Cucumbers - Sep 13, 2024\nhttps://fernandinaobserver.com/stories/pats-wildways-sea-cucumbers,31884\n\n\n### Sea cucumbers and their symbiotic microbiome have evolved to feed on seabed sediments - Oct 12, 2024\nhttps://www.nature.com/articles/s41467-024-53205-5\n\n\n### Petition Urges Mexico to Protect Chocolate Chip Sea Cucumber - Dec 11, 2024\nhttps://biologicaldiversity.org/w/news/press-releases/petition-urges-mexico-to-protect-chocolate-chip-sea-cucumber-2024-12-11/\n\n\n### Endangered sea cucumbers for sale in NYC food markets - Jun 14, 2024\nhttps://news.cornell.edu/stories/2024/06/endangered-sea-cucumbers-sale-nyc-food-markets\n\n\n### 11 disgusting animals that cause our stomachs to churn and us to go 'eew' - 2 days ago\nhttps://www.discoverwildlife.com/animal-facts/disgusting-animals\n\n\n### Appetite for Sea Cucumbers Connects Far East With the Caribbean - 1 month ago\nhttps://pulitzercenter.org/stories/appetite-sea-cucumbers-connects-far-east-caribbean\n\n\n### CBP Finds Sea Cucumber Smuggled in the U.S. - Aug 26, 2024\nhttps://www.cbp.gov/newsroom/local-media-release/cbp-finds-sea-cucumber-smuggled-us\n\n                \n                Provide a comprehensive summary grouped by themes and include relevant links."}, {'role': 'user', 'content': "Summarize and group the search results based on this: 'sea cucumber'. Include links, dates, and snippets from the search results."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 11:24:00 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 11:24:00 - httpcore.connection - DEBUG - close.started
2025-02-05 11:24:00 - httpcore.connection - DEBUG - close.complete
2025-02-05 11:24:00 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 11:24:00 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c2185d50>
2025-02-05 11:24:00 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7a30f0e600e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 11:24:00 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c104dad0>
2025-02-05 11:24:00 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 11:24:00 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 11:24:00 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 11:24:00 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 11:24:00 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 11:24:03 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 11:24:03 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d2881a0e9185ad-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5460'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'5.4s'), (b'x-request-id', b'req_01jkaxmk6yf3nrsndhxz78pbcg'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 11:24:03 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 11:24:03 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 11:24:03 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 11:24:03 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 11:24:03 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 11:24:03 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 11:24:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d2881a0e9185ad-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5460', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '5.4s', 'x-request-id': 'req_01jkaxmk6yf3nrsndhxz78pbcg', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 11:24:03 - root - INFO - Inference completed in 2.52s
2025-02-05 11:24:03 - root - INFO - Tokens used - Input: 586, Output: 731, Total: 1317
2025-02-05 11:24:03 - root - INFO - Processing speed - 521.68 tokens/second
2025-02-05 11:24:03 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:24:03 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-summary-prompt
2025-02-05 11:24:03 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:24:03 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000410, Completion: $0.000512, Total: $0.000922
2025-02-05 11:24:03 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:24:03.431227
2025-02-05 11:24:03 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:24:03 - utils.token_tracking - INFO - Tokens used - Input: 586, Output: 731, Total: 1,317
2025-02-05 11:24:03 - utils.token_tracking - INFO - Processing speed - 2634.00 tokens/second
2025-02-05 11:24:03 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:24:03.431988', prompt_tokens=586, completion_tokens=731, model='llama3-70b-8192', prompt_id='dynamic-summary-prompt', cost=0.0009219, total_tokens=1317, processing_time=0.5, processing_speed=2634.0)
2025-02-05 11:24:03 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 9 for instance 134349851948816
2025-02-05 11:24:03 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 7,207
2025-02-05 11:24:03 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:24:03 - root - INFO - Generated summary of news articles
2025-02-05 11:24:03 - research_components.db - INFO - Storing accuracy evaluation
2025-02-05 11:24:03 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:24:03 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: factual_accuracy
2025-02-05 11:24:03 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:24:03 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:24:03 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:24:03.986818
2025-02-05 11:24:03 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:24:03 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:24:03 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:24:03 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:24:03.987293', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='factual_accuracy', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:24:03 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 10 for instance 134349851948816
2025-02-05 11:24:03 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 7,357
2025-02-05 11:24:03 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:24:04 - research_components.db - INFO - Storing source coverage evaluation
2025-02-05 11:24:04 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:24:04 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: source_coverage
2025-02-05 11:24:04 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:24:04 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:24:04 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:24:04.022067
2025-02-05 11:24:04 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:24:04 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:24:04 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:24:04 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:24:04.022481', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='source_coverage', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:24:04 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 11 for instance 134349851948816
2025-02-05 11:24:04 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 7,507
2025-02-05 11:24:04 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:24:04 - research_components.research - ERROR - Error processing content and evaluations: Incompatible dimension for X and Y matrices: X.shape[1] == 33 while Y.shape[1] == 51
Traceback (most recent call last):
  File "/app/research_components/research.py", line 129, in run_tool
    coherence_score, coherence_details = coherence_evaluator.evaluate_logical_coherence(result)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/utils/logical_coherence.py", line 115, in evaluate_logical_coherence
    transition_scores = [
                        ^
  File "/app/utils/logical_coherence.py", line 116, in <listcomp>
    cosine_similarity(
  File "/usr/local/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 211, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 1577, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 190, in check_pairwise_arrays
    raise ValueError(
ValueError: Incompatible dimension for X and Y matrices: X.shape[1] == 33 while Y.shape[1] == 51
2025-02-05 11:24:04 - research_components.db - INFO - Storing query trace
2025-02-05 11:24:04 - research_components.db - INFO - Closing database connection
2025-02-05 11:24:16 - research_components.research - INFO - Starting tool execution - Tool: General Agent
2025-02-05 11:24:16 - relevance_evaluator - INFO - Creating new AnswerRelevanceEvaluator instance
2025-02-05 11:24:16 - relevance_evaluator.evaluator - INFO - Initializing AnswerRelevanceEvaluator
2025-02-05 11:24:16 - relevance_evaluator.evaluator - DEBUG - Setting up spaCy pipeline
2025-02-05 11:24:16 - relevance_evaluator.evaluator - DEBUG - SpaCy pipeline components: sentencizer
2025-02-05 11:24:16 - relevance_evaluator.evaluator - DEBUG - Configuring TF-IDF vectorizer
2025-02-05 11:24:16 - relevance_evaluator.evaluator - DEBUG - Successfully initialized TfidfVectorizer
2025-02-05 11:24:16 - relevance_evaluator.evaluator - DEBUG - Vectorizer parameters: {'analyzer': 'word', 'binary': False, 'decode_error': 'strict', 'dtype': <class 'numpy.float64'>, 'encoding': 'utf-8', 'input': 'content', 'lowercase': True, 'max_df': 1.0, 'max_features': 5000, 'min_df': 1, 'ngram_range': (1, 1), 'norm': 'l2', 'preprocessor': None, 'smooth_idf': True, 'stop_words': 'english', 'strip_accents': 'unicode', 'sublinear_tf': False, 'token_pattern': '(?u)\\b\\w\\w+\\b', 'tokenizer': None, 'use_idf': True, 'vocabulary': None}
2025-02-05 11:24:16 - root - INFO - Starting news search for query: sea cucumber
2025-02-05 11:24:16 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): google.serper.dev:443
2025-02-05 11:24:17 - urllib3.connectionpool - DEBUG - https://google.serper.dev:443 "POST /news?q=sea+cucumber&gl=us&hl=en&num=10 HTTP/1.1" 200 5381
2025-02-05 11:24:17 - root - INFO - Processing 10 articles for topic: sea cucumber
2025-02-05 11:24:17 - root - ERROR - Error in decide_what_to_use: 'snippets'
2025-02-05 11:24:17 - root - INFO - Starting to scrape 10 news pages
2025-02-05 11:24:19 - root - INFO - Attempting to scrape content from www.nbcnews.com
2025-02-05 11:24:19 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.nbcnews.com:443
2025-02-05 11:24:19 - urllib3.connectionpool - DEBUG - https://www.nbcnews.com:443 "GET /news/world/north-korea-tourists-kim-jong-il-birthday-first-time-covid-pandemic-rcna190554 HTTP/1.1" 200 60540
2025-02-05 11:24:19 - root - INFO - Successfully scraped https://www.nbcnews.com/news/world/north-korea-tourists-kim-jong-il-birthday-first-time-covid-pandemic-rcna190554 (4494 chars)
2025-02-05 11:24:21 - root - INFO - Attempting to scrape content from www.thetimes.com
2025-02-05 11:24:21 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.thetimes.com:443
2025-02-05 11:24:23 - urllib3.connectionpool - DEBUG - https://www.thetimes.com:443 "GET /world/asia/article/wish-you-were-here-north-korea-opens-sea-cucumber-farm-to-tourists-lhwcfwhpc HTTP/1.1" 200 None
2025-02-05 11:24:23 - root - INFO - Successfully scraped https://www.thetimes.com/world/asia/article/wish-you-were-here-north-korea-opens-sea-cucumber-farm-to-tourists-lhwcfwhpc (1622 chars)
2025-02-05 11:24:25 - root - INFO - Attempting to scrape content from fernandinaobserver.com
2025-02-05 11:24:25 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fernandinaobserver.com:443
2025-02-05 11:24:25 - urllib3.connectionpool - DEBUG - https://fernandinaobserver.com:443 "GET /stories/pats-wildways-sea-cucumbers,31884 HTTP/1.1" 301 None
2025-02-05 11:24:25 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.fernandinaobserver.org:443
2025-02-05 11:24:27 - urllib3.connectionpool - DEBUG - https://www.fernandinaobserver.org:443 "GET /stories/pats-wildways-sea-cucumbers,31884 HTTP/1.1" 200 11411
2025-02-05 11:24:27 - root - INFO - Successfully scraped https://fernandinaobserver.com/stories/pats-wildways-sea-cucumbers,31884 (4708 chars)
2025-02-05 11:24:29 - root - INFO - Attempting to scrape content from www.nature.com
2025-02-05 11:24:29 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.nature.com:443
2025-02-05 11:24:30 - urllib3.connectionpool - DEBUG - https://www.nature.com:443 "GET /articles/s41467-024-53205-5 HTTP/1.1" 303 150
2025-02-05 11:24:30 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): idp.nature.com:443
2025-02-05 11:24:30 - urllib3.connectionpool - DEBUG - https://idp.nature.com:443 "GET /authorize?response_type=cookie&client_id=grover&redirect_uri=https%3A%2F%2Fwww.nature.com%2Farticles%2Fs41467-024-53205-5 HTTP/1.1" 302 0
2025-02-05 11:24:31 - urllib3.connectionpool - DEBUG - https://idp.nature.com:443 "GET /transit?redirect_uri=https%3A%2F%2Fwww.nature.com%2Farticles%2Fs41467-024-53205-5&code=4310853d-c442-4e74-bf08-b0dec57646cd HTTP/1.1" 302 0
2025-02-05 11:24:31 - urllib3.connectionpool - DEBUG - https://www.nature.com:443 "GET /articles/s41467-024-53205-5 HTTP/1.1" 200 None
2025-02-05 11:24:32 - root - INFO - Successfully scraped https://www.nature.com/articles/s41467-024-53205-5 (83319 chars)
2025-02-05 11:24:34 - root - INFO - Attempting to scrape content from biologicaldiversity.org
2025-02-05 11:24:34 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): biologicaldiversity.org:443
2025-02-05 11:24:35 - urllib3.connectionpool - DEBUG - https://biologicaldiversity.org:443 "GET /w/news/press-releases/petition-urges-mexico-to-protect-chocolate-chip-sea-cucumber-2024-12-11/ HTTP/1.1" 200 None
2025-02-05 11:24:35 - root - INFO - Successfully scraped https://biologicaldiversity.org/w/news/press-releases/petition-urges-mexico-to-protect-chocolate-chip-sea-cucumber-2024-12-11/ (3438 chars)
2025-02-05 11:24:37 - root - INFO - Attempting to scrape content from news.cornell.edu
2025-02-05 11:24:37 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): news.cornell.edu:443
2025-02-05 11:24:38 - urllib3.connectionpool - DEBUG - https://news.cornell.edu:443 "GET /stories/2024/06/endangered-sea-cucumbers-sale-nyc-food-markets HTTP/1.1" 200 11622
2025-02-05 11:24:38 - root - INFO - Successfully scraped https://news.cornell.edu/stories/2024/06/endangered-sea-cucumbers-sale-nyc-food-markets (4365 chars)
2025-02-05 11:24:40 - root - INFO - Attempting to scrape content from www.discoverwildlife.com
2025-02-05 11:24:40 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.discoverwildlife.com:443
2025-02-05 11:24:40 - urllib3.connectionpool - DEBUG - https://www.discoverwildlife.com:443 "GET /animal-facts/disgusting-animals HTTP/1.1" 200 None
2025-02-05 11:24:41 - root - INFO - Successfully scraped https://www.discoverwildlife.com/animal-facts/disgusting-animals (10601 chars)
2025-02-05 11:24:43 - root - INFO - Attempting to scrape content from www.cbp.gov
2025-02-05 11:24:43 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cbp.gov:443
2025-02-05 11:24:43 - urllib3.connectionpool - DEBUG - https://www.cbp.gov:443 "GET /newsroom/local-media-release/cbp-finds-sea-cucumber-smuggled-us HTTP/1.1" 200 17426
2025-02-05 11:24:43 - root - INFO - Successfully scraped https://www.cbp.gov/newsroom/local-media-release/cbp-finds-sea-cucumber-smuggled-us (2562 chars)
2025-02-05 11:24:45 - root - INFO - Attempting to scrape content from pulitzercenter.org
2025-02-05 11:24:45 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): pulitzercenter.org:443
2025-02-05 11:24:45 - urllib3.connectionpool - DEBUG - https://pulitzercenter.org:443 "GET /stories/appetite-sea-cucumbers-connects-far-east-caribbean HTTP/1.1" 403 None
2025-02-05 11:24:45 - root - ERROR - Error scraping https://pulitzercenter.org/stories/appetite-sea-cucumbers-connects-far-east-caribbean: 403 Client Error: Forbidden for url: https://pulitzercenter.org/stories/appetite-sea-cucumbers-connects-far-east-caribbean
2025-02-05 11:24:47 - root - INFO - Attempting to scrape content from www.sciencedirect.com
2025-02-05 11:24:47 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.sciencedirect.com:443
2025-02-05 11:24:47 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /science/article/pii/S0048969724059485 HTTP/1.1" 302 143
2025-02-05 11:24:48 - urllib3.connectionpool - DEBUG - https://www.sciencedirect.com:443 "GET /unsupported_browser HTTP/1.1" 400 None
2025-02-05 11:24:48 - root - ERROR - Error scraping https://www.sciencedirect.com/science/article/pii/S0048969724059485: 400 Client Error: Bad Request for url: https://www.sciencedirect.com/unsupported_browser
2025-02-05 11:24:48 - root - INFO - Successfully scraped 8 pages out of 10 attempted
2025-02-05 11:24:48 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 11:24:48 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "Analyze and summarize the following search results:\n                \n                Query: sea cucumber\n                \n                Search Results:\n                ### North Korea reopens to tourists after 5 years - 20 hours ago\nhttps://www.nbcnews.com/news/world/north-korea-tourists-kim-jong-il-birthday-first-time-covid-pandemic-rcna190554\n\n\n### Wish you were here? North Korea opens sea cucumber farm to tourists - 1 day ago\nhttps://www.thetimes.com/world/asia/article/wish-you-were-here-north-korea-opens-sea-cucumber-farm-to-tourists-lhwcfwhpc\n\n\n### Patâ€™s Wildways: Sea Cucumbers - Sep 13, 2024\nhttps://fernandinaobserver.com/stories/pats-wildways-sea-cucumbers,31884\n\n\n### Sea cucumbers and their symbiotic microbiome have evolved to feed on seabed sediments - Oct 12, 2024\nhttps://www.nature.com/articles/s41467-024-53205-5\n\n\n### Petition Urges Mexico to Protect Chocolate Chip Sea Cucumber - Dec 11, 2024\nhttps://biologicaldiversity.org/w/news/press-releases/petition-urges-mexico-to-protect-chocolate-chip-sea-cucumber-2024-12-11/\n\n\n### Endangered sea cucumbers for sale in NYC food markets - Jun 14, 2024\nhttps://news.cornell.edu/stories/2024/06/endangered-sea-cucumbers-sale-nyc-food-markets\n\n\n### 11 disgusting animals that cause our stomachs to churn and us to go 'eew' - 2 days ago\nhttps://www.discoverwildlife.com/animal-facts/disgusting-animals\n\n\n### CBP Finds Sea Cucumber Smuggled in the U.S. - Aug 26, 2024\nhttps://www.cbp.gov/newsroom/local-media-release/cbp-finds-sea-cucumber-smuggled-us\n\n\n### Appetite for Sea Cucumbers Connects Far East With the Caribbean - 1 month ago\nhttps://pulitzercenter.org/stories/appetite-sea-cucumbers-connects-far-east-caribbean\n\n\n### Microplastics occurrence in sea cucumbers and impacts on sea cucumbers & human health: A systematic review - Nov 15, 2024\nhttps://www.sciencedirect.com/science/article/pii/S0048969724059485\n\n                \n                Provide a comprehensive summary grouped by themes and include relevant links."}, {'role': 'user', 'content': "Summarize and group the search results based on this: 'sea cucumber'. Include links, dates, and snippets from the search results."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 11:24:48 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 11:24:48 - httpcore.connection - DEBUG - close.started
2025-02-05 11:24:48 - httpcore.connection - DEBUG - close.complete
2025-02-05 11:24:48 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 11:24:48 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c2bd1b90>
2025-02-05 11:24:48 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7a30f0e600e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 11:24:48 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c2e15a90>
2025-02-05 11:24:48 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 11:24:48 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 11:24:48 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 11:24:48 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 11:24:48 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 11:24:51 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 11:24:51 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d289416cf14174-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5459'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'5.41s'), (b'x-request-id', b'req_01jkaxp1bgemmvwyxbxsjengkq'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 11:24:51 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 11:24:51 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 11:24:51 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 11:24:51 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 11:24:51 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 11:24:51 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 11:24:51 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d289416cf14174-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5459', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '5.41s', 'x-request-id': 'req_01jkaxp1bgemmvwyxbxsjengkq', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 11:24:51 - root - INFO - Inference completed in 2.88s
2025-02-05 11:24:51 - root - INFO - Tokens used - Input: 590, Output: 864, Total: 1454
2025-02-05 11:24:51 - root - INFO - Processing speed - 504.57 tokens/second
2025-02-05 11:24:51 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:24:51 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-summary-prompt
2025-02-05 11:24:51 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:24:51 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000413, Completion: $0.000605, Total: $0.001018
2025-02-05 11:24:51 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:24:51.045429
2025-02-05 11:24:51 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:24:51 - utils.token_tracking - INFO - Tokens used - Input: 590, Output: 864, Total: 1,454
2025-02-05 11:24:51 - utils.token_tracking - INFO - Processing speed - 2908.00 tokens/second
2025-02-05 11:24:51 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:24:51.046066', prompt_tokens=590, completion_tokens=864, model='llama3-70b-8192', prompt_id='dynamic-summary-prompt', cost=0.0010178, total_tokens=1454, processing_time=0.5, processing_speed=2908.0)
2025-02-05 11:24:51 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 12 for instance 134349851948816
2025-02-05 11:24:51 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 8,961
2025-02-05 11:24:51 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:24:51 - root - INFO - Generated summary of news articles
2025-02-05 11:24:51 - research_components.db - INFO - Storing accuracy evaluation
2025-02-05 11:24:51 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:24:51 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: factual_accuracy
2025-02-05 11:24:51 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:24:51 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:24:51 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:24:51.373809
2025-02-05 11:24:51 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:24:51 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:24:51 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:24:51 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:24:51.374635', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='factual_accuracy', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:24:51 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 13 for instance 134349851948816
2025-02-05 11:24:51 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 9,111
2025-02-05 11:24:51 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:24:51 - research_components.db - INFO - Storing source coverage evaluation
2025-02-05 11:24:51 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:24:51 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: source_coverage
2025-02-05 11:24:51 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:24:51 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:24:51 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:24:51.406944
2025-02-05 11:24:51 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:24:51 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:24:51 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:24:51 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:24:51.407442', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='source_coverage', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:24:51 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 14 for instance 134349851948816
2025-02-05 11:24:51 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 9,261
2025-02-05 11:24:51 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:24:51 - research_components.research - ERROR - Error processing content and evaluations: Incompatible dimension for X and Y matrices: X.shape[1] == 70 while Y.shape[1] == 265
Traceback (most recent call last):
  File "/app/research_components/research.py", line 129, in run_tool
    coherence_score, coherence_details = coherence_evaluator.evaluate_logical_coherence(result)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/utils/logical_coherence.py", line 115, in evaluate_logical_coherence
    transition_scores = [
                        ^
  File "/app/utils/logical_coherence.py", line 116, in <listcomp>
    cosine_similarity(
  File "/usr/local/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 211, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 1577, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 190, in check_pairwise_arrays
    raise ValueError(
ValueError: Incompatible dimension for X and Y matrices: X.shape[1] == 70 while Y.shape[1] == 265
2025-02-05 11:24:51 - research_components.db - INFO - Storing query trace
2025-02-05 11:24:51 - research_components.db - INFO - Closing database connection
2025-02-05 11:25:31 - research_components.research - INFO - Starting tool execution - Tool: General Agent
2025-02-05 11:25:31 - relevance_evaluator - INFO - Creating new AnswerRelevanceEvaluator instance
2025-02-05 11:25:31 - relevance_evaluator.evaluator - INFO - Initializing AnswerRelevanceEvaluator
2025-02-05 11:25:31 - relevance_evaluator.evaluator - DEBUG - Setting up spaCy pipeline
2025-02-05 11:25:31 - relevance_evaluator.evaluator - DEBUG - SpaCy pipeline components: sentencizer
2025-02-05 11:25:31 - relevance_evaluator.evaluator - DEBUG - Configuring TF-IDF vectorizer
2025-02-05 11:25:31 - relevance_evaluator.evaluator - DEBUG - Successfully initialized TfidfVectorizer
2025-02-05 11:25:31 - relevance_evaluator.evaluator - DEBUG - Vectorizer parameters: {'analyzer': 'word', 'binary': False, 'decode_error': 'strict', 'dtype': <class 'numpy.float64'>, 'encoding': 'utf-8', 'input': 'content', 'lowercase': True, 'max_df': 1.0, 'max_features': 5000, 'min_df': 1, 'ngram_range': (1, 1), 'norm': 'l2', 'preprocessor': None, 'smooth_idf': True, 'stop_words': 'english', 'strip_accents': 'unicode', 'sublinear_tf': False, 'token_pattern': '(?u)\\b\\w\\w+\\b', 'tokenizer': None, 'use_idf': True, 'vocabulary': None}
2025-02-05 11:25:31 - root - INFO - Starting news search for query: sea cucumber
2025-02-05 11:25:31 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): google.serper.dev:443
2025-02-05 11:25:32 - urllib3.connectionpool - DEBUG - https://google.serper.dev:443 "POST /news?q=sea+cucumber&gl=us&hl=en&num=10 HTTP/1.1" 200 5346
2025-02-05 11:25:32 - root - INFO - Processing 10 articles for topic: sea cucumber
2025-02-05 11:25:32 - root - ERROR - Error in decide_what_to_use: 'snippets'
2025-02-05 11:25:32 - root - INFO - Starting to scrape 10 news pages
2025-02-05 11:25:34 - root - INFO - Attempting to scrape content from www.nbcnews.com
2025-02-05 11:25:34 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.nbcnews.com:443
2025-02-05 11:25:34 - urllib3.connectionpool - DEBUG - https://www.nbcnews.com:443 "GET /news/world/north-korea-tourists-kim-jong-il-birthday-first-time-covid-pandemic-rcna190554 HTTP/1.1" 200 60550
2025-02-05 11:25:34 - root - INFO - Successfully scraped https://www.nbcnews.com/news/world/north-korea-tourists-kim-jong-il-birthday-first-time-covid-pandemic-rcna190554 (4494 chars)
2025-02-05 11:25:36 - root - INFO - Attempting to scrape content from www.thetimes.com
2025-02-05 11:25:36 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.thetimes.com:443
2025-02-05 11:25:37 - urllib3.connectionpool - DEBUG - https://www.thetimes.com:443 "GET /world/asia/article/wish-you-were-here-north-korea-opens-sea-cucumber-farm-to-tourists-lhwcfwhpc HTTP/1.1" 200 None
2025-02-05 11:25:37 - root - INFO - Successfully scraped https://www.thetimes.com/world/asia/article/wish-you-were-here-north-korea-opens-sea-cucumber-farm-to-tourists-lhwcfwhpc (1622 chars)
2025-02-05 11:25:39 - root - INFO - Attempting to scrape content from fernandinaobserver.com
2025-02-05 11:25:39 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fernandinaobserver.com:443
2025-02-05 11:25:40 - urllib3.connectionpool - DEBUG - https://fernandinaobserver.com:443 "GET /stories/pats-wildways-sea-cucumbers,31884 HTTP/1.1" 301 None
2025-02-05 11:25:40 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.fernandinaobserver.org:443
2025-02-05 11:25:41 - urllib3.connectionpool - DEBUG - https://www.fernandinaobserver.org:443 "GET /stories/pats-wildways-sea-cucumbers,31884 HTTP/1.1" 200 11411
2025-02-05 11:25:41 - root - INFO - Successfully scraped https://fernandinaobserver.com/stories/pats-wildways-sea-cucumbers,31884 (4708 chars)
2025-02-05 11:25:43 - root - INFO - Attempting to scrape content from www.nature.com
2025-02-05 11:25:43 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.nature.com:443
2025-02-05 11:25:44 - urllib3.connectionpool - DEBUG - https://www.nature.com:443 "GET /articles/s41467-024-53205-5 HTTP/1.1" 303 150
2025-02-05 11:25:44 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): idp.nature.com:443
2025-02-05 11:25:45 - urllib3.connectionpool - DEBUG - https://idp.nature.com:443 "GET /authorize?response_type=cookie&client_id=grover&redirect_uri=https%3A%2F%2Fwww.nature.com%2Farticles%2Fs41467-024-53205-5 HTTP/1.1" 302 0
2025-02-05 11:25:45 - urllib3.connectionpool - DEBUG - https://idp.nature.com:443 "GET /transit?redirect_uri=https%3A%2F%2Fwww.nature.com%2Farticles%2Fs41467-024-53205-5&code=3dc49ece-a172-4eab-98a6-4472ffa70ec4 HTTP/1.1" 302 0
2025-02-05 11:25:45 - urllib3.connectionpool - DEBUG - https://www.nature.com:443 "GET /articles/s41467-024-53205-5 HTTP/1.1" 200 None
2025-02-05 11:25:46 - root - INFO - Successfully scraped https://www.nature.com/articles/s41467-024-53205-5 (83319 chars)
2025-02-05 11:25:48 - root - INFO - Attempting to scrape content from biologicaldiversity.org
2025-02-05 11:25:48 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): biologicaldiversity.org:443
2025-02-05 11:25:49 - urllib3.connectionpool - DEBUG - https://biologicaldiversity.org:443 "GET /w/news/press-releases/petition-urges-mexico-to-protect-chocolate-chip-sea-cucumber-2024-12-11/ HTTP/1.1" 200 None
2025-02-05 11:25:49 - root - INFO - Successfully scraped https://biologicaldiversity.org/w/news/press-releases/petition-urges-mexico-to-protect-chocolate-chip-sea-cucumber-2024-12-11/ (3438 chars)
2025-02-05 11:25:51 - root - INFO - Attempting to scrape content from news.cornell.edu
2025-02-05 11:25:51 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): news.cornell.edu:443
2025-02-05 11:25:52 - urllib3.connectionpool - DEBUG - https://news.cornell.edu:443 "GET /stories/2024/06/endangered-sea-cucumbers-sale-nyc-food-markets HTTP/1.1" 200 11622
2025-02-05 11:25:52 - root - INFO - Successfully scraped https://news.cornell.edu/stories/2024/06/endangered-sea-cucumbers-sale-nyc-food-markets (4365 chars)
2025-02-05 11:25:54 - root - INFO - Attempting to scrape content from www.discoverwildlife.com
2025-02-05 11:25:54 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.discoverwildlife.com:443
2025-02-05 11:25:55 - urllib3.connectionpool - DEBUG - https://www.discoverwildlife.com:443 "GET /animal-facts/disgusting-animals HTTP/1.1" 200 None
2025-02-05 11:25:55 - root - INFO - Successfully scraped https://www.discoverwildlife.com/animal-facts/disgusting-animals (10601 chars)
2025-02-05 11:25:57 - root - INFO - Attempting to scrape content from www.cbp.gov
2025-02-05 11:25:57 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cbp.gov:443
2025-02-05 11:25:57 - urllib3.connectionpool - DEBUG - https://www.cbp.gov:443 "GET /newsroom/local-media-release/cbp-finds-sea-cucumber-smuggled-us HTTP/1.1" 200 17426
2025-02-05 11:25:57 - root - INFO - Successfully scraped https://www.cbp.gov/newsroom/local-media-release/cbp-finds-sea-cucumber-smuggled-us (2562 chars)
2025-02-05 11:25:59 - root - INFO - Attempting to scrape content from pulitzercenter.org
2025-02-05 11:25:59 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): pulitzercenter.org:443
2025-02-05 11:26:00 - urllib3.connectionpool - DEBUG - https://pulitzercenter.org:443 "GET /stories/appetite-sea-cucumbers-connects-far-east-caribbean HTTP/1.1" 403 None
2025-02-05 11:26:00 - root - ERROR - Error scraping https://pulitzercenter.org/stories/appetite-sea-cucumbers-connects-far-east-caribbean: 403 Client Error: Forbidden for url: https://pulitzercenter.org/stories/appetite-sea-cucumbers-connects-far-east-caribbean
2025-02-05 11:26:02 - root - INFO - Attempting to scrape content from thefishsite.com
2025-02-05 11:26:02 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): thefishsite.com:443
2025-02-05 11:26:03 - urllib3.connectionpool - DEBUG - https://thefishsite.com:443 "GET /articles/illegal-fisheries-highlight-potential-for-sea-cucumber-farming HTTP/1.1" 200 None
2025-02-05 11:26:03 - root - INFO - Successfully scraped https://thefishsite.com/articles/illegal-fisheries-highlight-potential-for-sea-cucumber-farming (3051 chars)
2025-02-05 11:26:03 - root - INFO - Successfully scraped 9 pages out of 10 attempted
2025-02-05 11:26:03 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 11:26:03 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': "Analyze and summarize the following search results:\n                \n                Query: sea cucumber\n                \n                Search Results:\n                ### North Korea reopens to tourists after 5 years - 20 hours ago\nhttps://www.nbcnews.com/news/world/north-korea-tourists-kim-jong-il-birthday-first-time-covid-pandemic-rcna190554\n\n\n### Wish you were here? North Korea opens sea cucumber farm to tourists - 1 day ago\nhttps://www.thetimes.com/world/asia/article/wish-you-were-here-north-korea-opens-sea-cucumber-farm-to-tourists-lhwcfwhpc\n\n\n### Patâ€™s Wildways: Sea Cucumbers - Sep 13, 2024\nhttps://fernandinaobserver.com/stories/pats-wildways-sea-cucumbers,31884\n\n\n### Sea cucumbers and their symbiotic microbiome have evolved to feed on seabed sediments - Oct 12, 2024\nhttps://www.nature.com/articles/s41467-024-53205-5\n\n\n### Petition Urges Mexico to Protect Chocolate Chip Sea Cucumber - Dec 11, 2024\nhttps://biologicaldiversity.org/w/news/press-releases/petition-urges-mexico-to-protect-chocolate-chip-sea-cucumber-2024-12-11/\n\n\n### Endangered sea cucumbers for sale in NYC food markets - Jun 14, 2024\nhttps://news.cornell.edu/stories/2024/06/endangered-sea-cucumbers-sale-nyc-food-markets\n\n\n### 11 disgusting animals that cause our stomachs to churn and us to go 'eew' - 2 days ago\nhttps://www.discoverwildlife.com/animal-facts/disgusting-animals\n\n\n### CBP Finds Sea Cucumber Smuggled in the U.S. - Aug 26, 2024\nhttps://www.cbp.gov/newsroom/local-media-release/cbp-finds-sea-cucumber-smuggled-us\n\n\n### Appetite for Sea Cucumbers Connects Far East With the Caribbean - 1 month ago\nhttps://pulitzercenter.org/stories/appetite-sea-cucumbers-connects-far-east-caribbean\n\n\n### Illegal fisheries highlight potential for sea cucumber farming - 3 weeks ago\nhttps://thefishsite.com/articles/illegal-fisheries-highlight-potential-for-sea-cucumber-farming\n\n                \n                Provide a comprehensive summary grouped by themes and include relevant links."}, {'role': 'user', 'content': "Summarize and group the search results based on this: 'sea cucumber'. Include links, dates, and snippets from the search results."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 11:26:03 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 11:26:03 - httpcore.connection - DEBUG - close.started
2025-02-05 11:26:03 - httpcore.connection - DEBUG - close.complete
2025-02-05 11:26:03 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 11:26:03 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c299c0d0>
2025-02-05 11:26:03 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7a30f0e600e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 11:26:03 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c206a210>
2025-02-05 11:26:03 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 11:26:03 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 11:26:03 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 11:26:03 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 11:26:03 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 11:26:05 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 11:26:05 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d28b189ff7403d-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5464'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'5.36s'), (b'x-request-id', b'req_01jkaxrazjf2ssmv8614de619m'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 11:26:05 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 11:26:05 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 11:26:05 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 11:26:05 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 11:26:05 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 11:26:05 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 11:26:05 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d28b189ff7403d-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5464', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '5.36s', 'x-request-id': 'req_01jkaxrazjf2ssmv8614de619m', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 11:26:05 - root - INFO - Inference completed in 2.38s
2025-02-05 11:26:05 - root - INFO - Tokens used - Input: 576, Output: 568, Total: 1144
2025-02-05 11:26:05 - root - INFO - Processing speed - 481.48 tokens/second
2025-02-05 11:26:05 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:26:05 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-summary-prompt
2025-02-05 11:26:05 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:26:05 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000403, Completion: $0.000398, Total: $0.000801
2025-02-05 11:26:05 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:26:05.942104
2025-02-05 11:26:05 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:26:05 - utils.token_tracking - INFO - Tokens used - Input: 576, Output: 568, Total: 1,144
2025-02-05 11:26:05 - utils.token_tracking - INFO - Processing speed - 2288.00 tokens/second
2025-02-05 11:26:05 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:26:05.942504', prompt_tokens=576, completion_tokens=568, model='llama3-70b-8192', prompt_id='dynamic-summary-prompt', cost=0.0008008, total_tokens=1144, processing_time=0.5, processing_speed=2288.0)
2025-02-05 11:26:05 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 15 for instance 134349851948816
2025-02-05 11:26:05 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 10,405
2025-02-05 11:26:05 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:26:05 - root - INFO - Generated summary of news articles
2025-02-05 11:26:06 - research_components.db - INFO - Storing accuracy evaluation
2025-02-05 11:26:06 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:26:06 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: factual_accuracy
2025-02-05 11:26:06 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:26:06 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:26:06 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:26:06.320400
2025-02-05 11:26:06 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:26:06 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:26:06 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:26:06 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:26:06.321266', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='factual_accuracy', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:26:06 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 16 for instance 134349851948816
2025-02-05 11:26:06 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 10,555
2025-02-05 11:26:06 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:26:06 - research_components.db - INFO - Storing source coverage evaluation
2025-02-05 11:26:06 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:26:06 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: source_coverage
2025-02-05 11:26:06 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:26:06 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 11:26:06 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:26:06.352400
2025-02-05 11:26:06 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:26:06 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 11:26:06 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 11:26:06 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:26:06.352908', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='source_coverage', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 11:26:06 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 17 for instance 134349851948816
2025-02-05 11:26:06 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 10,705
2025-02-05 11:26:06 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:26:06 - research_components.research - ERROR - Error processing content and evaluations: Incompatible dimension for X and Y matrices: X.shape[1] == 76 while Y.shape[1] == 251
Traceback (most recent call last):
  File "/app/research_components/research.py", line 129, in run_tool
    coherence_score, coherence_details = coherence_evaluator.evaluate_logical_coherence(result)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/utils/logical_coherence.py", line 115, in evaluate_logical_coherence
    transition_scores = [
                        ^
  File "/app/utils/logical_coherence.py", line 116, in <listcomp>
    cosine_similarity(
  File "/usr/local/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 211, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 1577, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 190, in check_pairwise_arrays
    raise ValueError(
ValueError: Incompatible dimension for X and Y matrices: X.shape[1] == 76 while Y.shape[1] == 251
2025-02-05 11:26:06 - research_components.db - INFO - Storing query trace
2025-02-05 11:26:06 - research_components.db - INFO - Closing database connection
2025-02-05 11:26:40 - research_components.research - INFO - Starting tool execution - Tool: Analysis Agent
2025-02-05 11:26:40 - utils.analysis_evaluator - INFO - Creating new AnalysisEvaluator instance
2025-02-05 11:26:40 - utils.analysis_evaluator - INFO - Initializing AnalysisEvaluator
2025-02-05 11:26:40 - root - INFO - Starting analysis for query: tell me somthing about the data
2025-02-05 11:26:40 - root - INFO - Data validation results: {'missing_data': {'applicants': 0, 'n': 0}, 'datatypes': {'applicants': dtype('O'), 'n': dtype('int64')}, 'row_count': 20, 'column_count': 2}
2025-02-05 11:26:40 - root - WARNING - Error in web research: name 'GoogleSerperAPIWrapper' is not defined
2025-02-05 11:26:40 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 11:26:40 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '**DATA ANALYSIS REPORT**  \n\n**Subject:** Analysis of {\'filename\': \'pat_app.csv\', \'shape\': (20, 2), \'columns\': [\'applicants\', \'n\'], \'dtypes\': {\'applicants\': dtype(\'O\'), \'n\': dtype(\'int64\')}, \'missing_values\': {\'applicants\': 0, \'n\': 0}, \'analysis_results\': {\'descriptive_stats\': {\'n\': {\'count\': 20.0, \'mean\': 5.75, \'std\': 2.7313964040009777, \'min\': 3.0, \'25%\': 4.0, \'50%\': 5.0, \'75%\': 7.25, \'max\': 14.0}}, \'correlations\': {\'n\': {\'n\': 1.0}}, \'missing_values\': {\'applicants\': 0, \'n\': 0}, \'unique_counts\': {\'applicants\': 20, \'n\': 8}, \'categorical_summaries\': {\'applicants\': {\'Procter & Gamble\': 1, \'3 In 1 Dental Pllc\': 1, \'Balwani Gul P\': 1, \'Alfa Biogene Int B V\': 1, \'Vital Solutions Swiss Ag\': 1, \'Univ Washington State\': 1, \'Univ Pretoria\': 1, \'Colgate Palmolive Co\': 1, \'Alfa Biogene Internat B V\': 1, \'Ionia Azure Ag\': 1, \'Hayashibara Co\': 1, \'Halliburton Energy Services Inc\': 1, \'Fujii Hajime\': 1, \'Buchwald-Werner Sybille\': 1, \'Warren Raphael\': 1, \'Undoo Llc\': 1, \'Senomyx Inc\': 1, \'Capsulent\': 1, \'Amino Up Chemical Co Ltd\': 1, \'Chan Jody Wai-Han\': 1}}, \'outliers\': {\'n\': 1}}, \'web_research\': []}  \n**Query Focus:** tell me somthing about the data  \n**Report Date:** [Current Date]  \n\n## **EXECUTIVE SUMMARY**  \n- This report presents key findings and their significance.  \n- The insights are analyzed in relation to industry trends, company behaviors, and economic implications.  \n- Notable patterns and unexpected results are highlighted.  \n\n## **REPORT CONTENTS**  \n\n### **I. DATASET OVERVIEW**  \n- The dataset\'s scope, purpose, and key attributes are outlined.  \n- The timeframe covered and any notable characteristics are detailed.  \n- Real-world context is provided, explaining the industries or entities represented and broader implications.  \n\n### **II. METHODOLOGY**  \n- The analytical approaches used are described.  \n- Statistical methods, models, or tools applied are listed.  \n- Data cleaning, transformations, and preprocessing steps are detailed.  \n\n### **III. KEY FINDINGS**  \n\n#### **A. Primary Insights**  \n- The most significant discoveries are summarized.  \n- Findings are supported with specific data points, percentages, and comparisons.  \n- The insights are linked to real-world contexts, specifying affected companies, sectors, or markets.  \n\n#### **B. Trends and Patterns**  \n- Overarching trends, recurring patterns, and anomalies are identified.  \n- Seasonal, cyclical, or geographic variations are highlighted.  \n- The relevance of these trends in business, economic, or technological contexts is analyzed.  \n\n### **IV. INDUSTRY CONTEXT**  \n- Findings are examined in relation to broader market or industry trends.  \n- Examples of real-world companies or organizations involved are included.  \n- For datasets like "pat_app" (patent applicants), the types of companies filing patents and their technological specializations are specified.  \n- Relevant external data points are incorporated to validate insights.  \n\n### **V. CONCLUSIONS**  \n- The most important takeaways are summarized.  \n- Actionable insights for decision-making are highlighted.  \n- Specific aspects of the original query are addressed with practical applications for businesses or policymakers.  \n\n'}, {'role': 'user', 'content': "Analyze the dataset 'pat_app.csv' in the context of the query: tell me somthing about the data.\n                            Include relevant insights from web research where applicable.\n                            Focus on connecting statistical findings with broader industry/research context."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 11:26:40 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 11:26:40 - httpcore.connection - DEBUG - close.started
2025-02-05 11:26:40 - httpcore.connection - DEBUG - close.complete
2025-02-05 11:26:40 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 11:26:40 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c157dcd0>
2025-02-05 11:26:40 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7a30f0e600e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 11:26:40 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7a30c157f050>
2025-02-05 11:26:40 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 11:26:40 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 11:26:40 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 11:26:40 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 11:26:40 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 11:26:43 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 11:26:43 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d28c01cf3685ad-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5117'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'8.83s'), (b'x-request-id', b'req_01jkaxsfdqfrvanzkh3tc2rm11'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 11:26:43 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 11:26:43 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 11:26:43 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 11:26:43 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 11:26:43 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 11:26:43 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 11:26:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d28c01cf3685ad-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5117', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '8.83s', 'x-request-id': 'req_01jkaxsfdqfrvanzkh3tc2rm11', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 11:26:43 - root - INFO - Inference completed in 2.52s
2025-02-05 11:26:43 - root - INFO - Tokens used - Input: 926, Output: 708, Total: 1634
2025-02-05 11:26:43 - root - INFO - Processing speed - 647.96 tokens/second
2025-02-05 11:26:43 - utils.token_tracking - INFO - Adding usage to instance 134349851948816
2025-02-05 11:26:43 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-prompt-data_analysis.txt
2025-02-05 11:26:43 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 11:26:43 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000648, Completion: $0.000496, Total: $0.001144
2025-02-05 11:26:43 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T11:26:43.394524
2025-02-05 11:26:43 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 11:26:43 - utils.token_tracking - INFO - Tokens used - Input: 926, Output: 708, Total: 1,634
2025-02-05 11:26:43 - utils.token_tracking - INFO - Processing speed - 3268.00 tokens/second
2025-02-05 11:26:43 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T11:26:43.394832', prompt_tokens=926, completion_tokens=708, model='llama3-70b-8192', prompt_id='dynamic-prompt-data_analysis.txt', cost=0.0011438, total_tokens=1634, processing_time=0.5, processing_speed=3268.0)
2025-02-05 11:26:43 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 18 for instance 134349851948816
2025-02-05 11:26:43 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 12,339
2025-02-05 11:26:43 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 11:26:43 - utils.analysis_evaluator - INFO - Starting comprehensive analysis evaluation
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Starting numerical accuracy evaluation
2025-02-05 11:26:43 - utils.analysis_evaluator - INFO - Found 0 numerical calculations to evaluate
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Starting query understanding evaluation
2025-02-05 11:26:43 - utils.analysis_evaluator - INFO - Analyzing query with 6 unique terms
2025-02-05 11:26:43 - utils.analysis_evaluator - INFO - Term coverage: 83.33% (5/6)
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Analytical element 'methodology': Present
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Analytical element 'findings': Present
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Analytical element 'statistics': Present
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Analytical element 'data_reference': Present
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Starting data validation evaluation
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Validation check 'missing_data': Missing
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Validation check 'outliers': Present
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Validation check 'distribution': Present
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Validation check 'data_types': Present
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Starting reasoning transparency evaluation
2025-02-05 11:26:43 - utils.analysis_evaluator - INFO - Analyzing 29 sentences for reasoning transparency
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Transparency check 'explains_steps': Missing
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Transparency check 'states_assumptions': Missing
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Transparency check 'mentions_limitations': Missing
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Transparency check 'cites_evidence': Missing
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Transparency check 'has_conclusion': Missing
2025-02-05 11:26:43 - utils.analysis_evaluator - DEBUG - Transparency check 'has_examples': Present
2025-02-05 11:26:43 - utils.analysis_evaluator - INFO - Average sentence length: 19.0 words
2025-02-05 11:26:43 - utils.analysis_evaluator - INFO - Numerical Accuracy score: 0.00%
2025-02-05 11:26:43 - utils.analysis_evaluator - INFO - Query Understanding score: 91.67%
2025-02-05 11:26:43 - utils.analysis_evaluator - INFO - Data Validation score: 75.00%
2025-02-05 11:26:43 - utils.analysis_evaluator - INFO - Reasoning Transparency score: 16.67%
2025-02-05 11:26:43 - utils.analysis_evaluator - INFO - Overall evaluation score: 45.83%
2025-02-05 11:26:43 - research_components.db - INFO - Storing analysis evaluation
2025-02-05 11:26:43 - research_components.db - INFO - Storing content result
2025-02-05 11:26:43 - research_components.db - INFO - Successfully stored content with ID: 32
2025-02-05 11:26:43 - research_components.db - INFO - Storing query trace
2025-02-05 11:26:43 - research_components.db - INFO - Closing database connection
2025-02-05 13:00:30 - __main__ - INFO - INIT_DB is true. Running database initialization.
2025-02-05 15:57:49 - __main__ - INFO - INIT_DB is true. Running database initialization.
2025-02-05 16:04:24 - utils.token_tracking - INFO - Creating TokenUsageTracker singleton instance 132593825962064
2025-02-05 16:04:24 - research_components.research - INFO - Starting tool execution - Tool: General Agent
2025-02-05 16:04:24 - relevance_evaluator - INFO - Creating new AnswerRelevanceEvaluator instance
2025-02-05 16:04:24 - relevance_evaluator.evaluator - INFO - Initializing AnswerRelevanceEvaluator
2025-02-05 16:04:24 - relevance_evaluator.evaluator - DEBUG - Setting up spaCy pipeline
2025-02-05 16:04:24 - relevance_evaluator.evaluator - DEBUG - SpaCy pipeline components: sentencizer
2025-02-05 16:04:24 - relevance_evaluator.evaluator - DEBUG - Configuring TF-IDF vectorizer
2025-02-05 16:04:24 - relevance_evaluator.evaluator - DEBUG - Successfully initialized TfidfVectorizer
2025-02-05 16:04:24 - relevance_evaluator.evaluator - DEBUG - Vectorizer parameters: {'analyzer': 'word', 'binary': False, 'decode_error': 'strict', 'dtype': <class 'numpy.float64'>, 'encoding': 'utf-8', 'input': 'content', 'lowercase': True, 'max_df': 1.0, 'max_features': 5000, 'min_df': 1, 'ngram_range': (1, 1), 'norm': 'l2', 'preprocessor': None, 'smooth_idf': True, 'stop_words': 'english', 'strip_accents': 'unicode', 'sublinear_tf': False, 'token_pattern': '(?u)\\b\\w\\w+\\b', 'tokenizer': None, 'use_idf': True, 'vocabulary': None}
2025-02-05 16:04:24 - root - INFO - Starting news search for query: sea cucumber
2025-02-05 16:04:24 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): google.serper.dev:443
2025-02-05 16:04:25 - urllib3.connectionpool - DEBUG - https://google.serper.dev:443 "POST /news?q=sea+cucumber&gl=us&hl=en&num=10 HTTP/1.1" 200 5366
2025-02-05 16:04:25 - root - INFO - Processing 10 articles for topic: sea cucumber
2025-02-05 16:04:25 - root - ERROR - Error in decide_what_to_use: 'snippets'
2025-02-05 16:04:25 - root - INFO - Starting to scrape 10 news pages
2025-02-05 16:04:27 - root - INFO - Attempting to scrape content from www.miamiherald.com
2025-02-05 16:04:27 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.miamiherald.com:443
2025-02-05 16:04:43 - root - ERROR - Error scraping https://www.miamiherald.com/news/nation-world/world/article299498464.html: HTTPSConnectionPool(host='www.miamiherald.com', port=443): Read timed out. (read timeout=15)
2025-02-05 16:04:45 - root - INFO - Attempting to scrape content from www.thetimes.com
2025-02-05 16:04:45 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.thetimes.com:443
2025-02-05 16:04:47 - urllib3.connectionpool - DEBUG - https://www.thetimes.com:443 "GET /world/asia/article/wish-you-were-here-north-korea-opens-sea-cucumber-farm-to-tourists-lhwcfwhpc HTTP/1.1" 200 None
2025-02-05 16:04:47 - root - INFO - Successfully scraped https://www.thetimes.com/world/asia/article/wish-you-were-here-north-korea-opens-sea-cucumber-farm-to-tourists-lhwcfwhpc (1622 chars)
2025-02-05 16:04:49 - root - INFO - Attempting to scrape content from fernandinaobserver.com
2025-02-05 16:04:49 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): fernandinaobserver.com:443
2025-02-05 16:04:50 - urllib3.connectionpool - DEBUG - https://fernandinaobserver.com:443 "GET /stories/pats-wildways-sea-cucumbers,31884 HTTP/1.1" 301 None
2025-02-05 16:04:50 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.fernandinaobserver.org:443
2025-02-05 16:04:51 - urllib3.connectionpool - DEBUG - https://www.fernandinaobserver.org:443 "GET /stories/pats-wildways-sea-cucumbers,31884 HTTP/1.1" 200 11484
2025-02-05 16:04:51 - root - INFO - Successfully scraped https://fernandinaobserver.com/stories/pats-wildways-sea-cucumbers,31884 (4708 chars)
2025-02-05 16:04:53 - root - INFO - Attempting to scrape content from www.nbcnews.com
2025-02-05 16:04:53 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.nbcnews.com:443
2025-02-05 16:04:55 - urllib3.connectionpool - DEBUG - https://www.nbcnews.com:443 "GET /news/world/north-korea-tourists-kim-jong-il-birthday-first-time-covid-pandemic-rcna190554 HTTP/1.1" 200 60546
2025-02-05 16:04:55 - root - INFO - Successfully scraped https://www.nbcnews.com/news/world/north-korea-tourists-kim-jong-il-birthday-first-time-covid-pandemic-rcna190554 (4494 chars)
2025-02-05 16:04:57 - root - INFO - Attempting to scrape content from www.nature.com
2025-02-05 16:04:57 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.nature.com:443
2025-02-05 16:04:58 - urllib3.connectionpool - DEBUG - https://www.nature.com:443 "GET /articles/s41467-024-53205-5 HTTP/1.1" 303 150
2025-02-05 16:04:58 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): idp.nature.com:443
2025-02-05 16:04:58 - urllib3.connectionpool - DEBUG - https://idp.nature.com:443 "GET /authorize?response_type=cookie&client_id=grover&redirect_uri=https%3A%2F%2Fwww.nature.com%2Farticles%2Fs41467-024-53205-5 HTTP/1.1" 302 0
2025-02-05 16:04:59 - urllib3.connectionpool - DEBUG - https://idp.nature.com:443 "GET /transit?redirect_uri=https%3A%2F%2Fwww.nature.com%2Farticles%2Fs41467-024-53205-5&code=18a84bcb-2579-46dd-99d6-4523488500eb HTTP/1.1" 302 0
2025-02-05 16:04:59 - urllib3.connectionpool - DEBUG - https://www.nature.com:443 "GET /articles/s41467-024-53205-5 HTTP/1.1" 200 None
2025-02-05 16:05:00 - root - INFO - Successfully scraped https://www.nature.com/articles/s41467-024-53205-5 (83319 chars)
2025-02-05 16:05:02 - root - INFO - Attempting to scrape content from biologicaldiversity.org
2025-02-05 16:05:02 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): biologicaldiversity.org:443
2025-02-05 16:05:04 - urllib3.connectionpool - DEBUG - https://biologicaldiversity.org:443 "GET /w/news/press-releases/petition-urges-mexico-to-protect-chocolate-chip-sea-cucumber-2024-12-11/ HTTP/1.1" 200 None
2025-02-05 16:05:04 - root - INFO - Successfully scraped https://biologicaldiversity.org/w/news/press-releases/petition-urges-mexico-to-protect-chocolate-chip-sea-cucumber-2024-12-11/ (3438 chars)
2025-02-05 16:05:06 - root - INFO - Attempting to scrape content from news.cornell.edu
2025-02-05 16:05:06 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): news.cornell.edu:443
2025-02-05 16:05:07 - urllib3.connectionpool - DEBUG - https://news.cornell.edu:443 "GET /stories/2024/06/endangered-sea-cucumbers-sale-nyc-food-markets HTTP/1.1" 200 11622
2025-02-05 16:05:07 - root - INFO - Successfully scraped https://news.cornell.edu/stories/2024/06/endangered-sea-cucumbers-sale-nyc-food-markets (4365 chars)
2025-02-05 16:05:09 - root - INFO - Attempting to scrape content from www.cbp.gov
2025-02-05 16:05:09 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): www.cbp.gov:443
2025-02-05 16:05:10 - urllib3.connectionpool - DEBUG - https://www.cbp.gov:443 "GET /newsroom/local-media-release/cbp-finds-sea-cucumber-smuggled-us HTTP/1.1" 200 17427
2025-02-05 16:05:10 - root - INFO - Successfully scraped https://www.cbp.gov/newsroom/local-media-release/cbp-finds-sea-cucumber-smuggled-us (2562 chars)
2025-02-05 16:05:12 - root - INFO - Attempting to scrape content from pulitzercenter.org
2025-02-05 16:05:12 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): pulitzercenter.org:443
2025-02-05 16:05:12 - urllib3.connectionpool - DEBUG - https://pulitzercenter.org:443 "GET /stories/appetite-sea-cucumbers-connects-far-east-caribbean HTTP/1.1" 403 None
2025-02-05 16:05:12 - root - ERROR - Error scraping https://pulitzercenter.org/stories/appetite-sea-cucumbers-connects-far-east-caribbean: 403 Client Error: Forbidden for url: https://pulitzercenter.org/stories/appetite-sea-cucumbers-connects-far-east-caribbean
2025-02-05 16:05:14 - root - INFO - Attempting to scrape content from thefishsite.com
2025-02-05 16:05:14 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): thefishsite.com:443
2025-02-05 16:05:15 - urllib3.connectionpool - DEBUG - https://thefishsite.com:443 "GET /articles/illegal-fisheries-highlight-potential-for-sea-cucumber-farming HTTP/1.1" 200 None
2025-02-05 16:05:15 - root - INFO - Successfully scraped https://thefishsite.com/articles/illegal-fisheries-highlight-potential-for-sea-cucumber-farming (3051 chars)
2025-02-05 16:05:15 - root - INFO - Successfully scraped 8 pages out of 10 attempted
2025-02-05 16:05:15 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 16:05:15 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'Analyze and summarize the following search results:\n                \n                Query: sea cucumber\n                \n                Search Results:\n                ### â€˜Longâ€™ purple sea creature â€” with 24 â€˜feetâ€™ â€” pulled from depths. Itâ€™s a new species - 4 days ago\nhttps://www.miamiherald.com/news/nation-world/world/article299498464.html\n\n\n### Wish you were here? North Korea opens sea cucumber farm to tourists - 2 days ago\nhttps://www.thetimes.com/world/asia/article/wish-you-were-here-north-korea-opens-sea-cucumber-farm-to-tourists-lhwcfwhpc\n\n\n### Patâ€™s Wildways: Sea Cucumbers - Sep 13, 2024\nhttps://fernandinaobserver.com/stories/pats-wildways-sea-cucumbers,31884\n\n\n### North Korea reopens to tourists after 5 years - 1 day ago\nhttps://www.nbcnews.com/news/world/north-korea-tourists-kim-jong-il-birthday-first-time-covid-pandemic-rcna190554\n\n\n### Sea cucumbers and their symbiotic microbiome have evolved to feed on seabed sediments - Oct 12, 2024\nhttps://www.nature.com/articles/s41467-024-53205-5\n\n\n### Petition Urges Mexico to Protect Chocolate Chip Sea Cucumber - Dec 11, 2024\nhttps://biologicaldiversity.org/w/news/press-releases/petition-urges-mexico-to-protect-chocolate-chip-sea-cucumber-2024-12-11/\n\n\n### Endangered sea cucumbers for sale in NYC food markets - Jun 14, 2024\nhttps://news.cornell.edu/stories/2024/06/endangered-sea-cucumbers-sale-nyc-food-markets\n\n\n### CBP Finds Sea Cucumber Smuggled in the U.S. - Aug 26, 2024\nhttps://www.cbp.gov/newsroom/local-media-release/cbp-finds-sea-cucumber-smuggled-us\n\n\n### Appetite for Sea Cucumbers Connects Far East With the Caribbean - 1 month ago\nhttps://pulitzercenter.org/stories/appetite-sea-cucumbers-connects-far-east-caribbean\n\n\n### Illegal fisheries highlight potential for sea cucumber farming - 3 weeks ago\nhttps://thefishsite.com/articles/illegal-fisheries-highlight-potential-for-sea-cucumber-farming\n\n                \n                Provide a comprehensive summary grouped by themes and include relevant links.'}, {'role': 'user', 'content': "Summarize and group the search results based on this: 'sea cucumber'. Include links, dates, and snippets from the search results."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 16:05:15 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 16:05:15 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 16:05:16 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7897e75f7f90>
2025-02-05 16:05:16 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7898159200e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 16:05:16 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7897e7234550>
2025-02-05 16:05:16 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 16:05:16 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 16:05:16 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 16:05:16 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 16:05:16 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 16:05:18 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 16:05:18 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d424179b2a3b45-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5456'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'5.44s'), (b'x-request-id', b'req_01jkbdqjtbef386f7h0b7k5w6n'), (b'Set-Cookie', b'__cf_bm=gQAYXLh0zSU.G8Hl_KTzeiGFcVATv7V6QhbVR.iZ0EI-1738771518-1.0.1.1-rWCSypFmg2P9wtuYPnaviqDggMUfe.EO9SWAjfY6LMzOUFxyGVdhTWVu83Y8hWJzOMG0TqU4EUplfBsi2fxc_w; path=/; expires=Wed, 05-Feb-25 16:35:18 GMT; domain=.groq.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 16:05:18 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 16:05:18 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 16:05:18 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 16:05:18 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 16:05:18 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 16:05:18 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 16:05:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d424179b2a3b45-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5456', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '5.44s', 'x-request-id': 'req_01jkbdqjtbef386f7h0b7k5w6n', 'set-cookie': '__cf_bm=gQAYXLh0zSU.G8Hl_KTzeiGFcVATv7V6QhbVR.iZ0EI-1738771518-1.0.1.1-rWCSypFmg2P9wtuYPnaviqDggMUfe.EO9SWAjfY6LMzOUFxyGVdhTWVu83Y8hWJzOMG0TqU4EUplfBsi2fxc_w; path=/; expires=Wed, 05-Feb-25 16:35:18 GMT; domain=.groq.com; HttpOnly; Secure; SameSite=None', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 16:05:19 - root - INFO - Inference completed in 3.09s
2025-02-05 16:05:19 - root - INFO - Tokens used - Input: 582, Output: 728, Total: 1310
2025-02-05 16:05:19 - root - INFO - Processing speed - 424.40 tokens/second
2025-02-05 16:05:19 - utils.token_tracking - INFO - Adding usage to instance 132593825962064
2025-02-05 16:05:19 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-summary-prompt
2025-02-05 16:05:19 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 16:05:19 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000407, Completion: $0.000510, Total: $0.000917
2025-02-05 16:05:19 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T16:05:19.021753
2025-02-05 16:05:19 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 16:05:19 - utils.token_tracking - INFO - Tokens used - Input: 582, Output: 728, Total: 1,310
2025-02-05 16:05:19 - utils.token_tracking - INFO - Processing speed - 2620.00 tokens/second
2025-02-05 16:05:19 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T16:05:19.022811', prompt_tokens=582, completion_tokens=728, model='llama3-70b-8192', prompt_id='dynamic-summary-prompt', cost=0.0009170000000000001, total_tokens=1310, processing_time=0.5, processing_speed=2620.0)
2025-02-05 16:05:19 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 1 for instance 132593825962064
2025-02-05 16:05:19 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,310
2025-02-05 16:05:19 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192']
2025-02-05 16:05:19 - root - INFO - Generated summary of news articles
2025-02-05 16:05:19 - research_components.db - INFO - Storing accuracy evaluation
2025-02-05 16:05:19 - utils.token_tracking - INFO - Adding usage to instance 132593825962064
2025-02-05 16:05:19 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: factual_accuracy
2025-02-05 16:05:19 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 16:05:19 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 16:05:19 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T16:05:19.702138
2025-02-05 16:05:19 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 16:05:19 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 16:05:19 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 16:05:19 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T16:05:19.703121', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='factual_accuracy', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 16:05:19 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 2 for instance 132593825962064
2025-02-05 16:05:19 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,460
2025-02-05 16:05:19 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 16:05:19 - research_components.db - INFO - Storing source coverage evaluation
2025-02-05 16:05:19 - utils.token_tracking - INFO - Adding usage to instance 132593825962064
2025-02-05 16:05:19 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: source_coverage
2025-02-05 16:05:19 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 16:05:19 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000070, Completion: $0.000035, Total: $0.000105
2025-02-05 16:05:19 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T16:05:19.738679
2025-02-05 16:05:19 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 16:05:19 - utils.token_tracking - INFO - Tokens used - Input: 100, Output: 50, Total: 150
2025-02-05 16:05:19 - utils.token_tracking - INFO - Processing speed - 300.00 tokens/second
2025-02-05 16:05:19 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T16:05:19.739233', prompt_tokens=100, completion_tokens=50, model='llama3-70b-8192', prompt_id='source_coverage', cost=0.000105, total_tokens=150, processing_time=0.5, processing_speed=300.0)
2025-02-05 16:05:19 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 3 for instance 132593825962064
2025-02-05 16:05:19 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 1,610
2025-02-05 16:05:19 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 16:05:19 - research_components.research - ERROR - Error processing content and evaluations: Incompatible dimension for X and Y matrices: X.shape[1] == 33 while Y.shape[1] == 46
Traceback (most recent call last):
  File "/app/research_components/research.py", line 129, in run_tool
    coherence_score, coherence_details = coherence_evaluator.evaluate_logical_coherence(result)
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/utils/logical_coherence.py", line 115, in evaluate_logical_coherence
    transition_scores = [
                        ^
  File "/app/utils/logical_coherence.py", line 116, in <listcomp>
    cosine_similarity(
  File "/usr/local/lib/python3.11/site-packages/sklearn/utils/_param_validation.py", line 211, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 1577, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sklearn/metrics/pairwise.py", line 190, in check_pairwise_arrays
    raise ValueError(
ValueError: Incompatible dimension for X and Y matrices: X.shape[1] == 33 while Y.shape[1] == 46
2025-02-05 16:05:19 - research_components.db - INFO - Storing query trace
2025-02-05 16:05:19 - research_components.db - INFO - Closing database connection
2025-02-05 16:05:44 - research_components.research - INFO - Starting tool execution - Tool: Analysis Agent
2025-02-05 16:05:44 - utils.analysis_evaluator - INFO - Creating new AnalysisEvaluator instance
2025-02-05 16:05:44 - utils.analysis_evaluator - INFO - Initializing AnalysisEvaluator
2025-02-05 16:05:44 - root - INFO - Starting analysis for query: tell me somthing about the data
2025-02-05 16:05:44 - root - INFO - Data validation results: {'missing_data': {'applicants': 0, 'n': 0}, 'datatypes': {'applicants': dtype('O'), 'n': dtype('int64')}, 'row_count': 20, 'column_count': 2}
2025-02-05 16:05:45 - root - WARNING - Error in web research: name 'GoogleSerperAPIWrapper' is not defined
2025-02-05 16:05:45 - root - INFO - Start inference with model llama3-70b-8192 on host groq
2025-02-05 16:05:45 - groq._base_client - DEBUG - Request options: {'method': 'post', 'url': '/openai/v1/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '**DATA ANALYSIS REPORT**  \n\n**Subject:** Analysis of {\'filename\': \'pat_app.csv\', \'shape\': (20, 2), \'columns\': [\'applicants\', \'n\'], \'dtypes\': {\'applicants\': dtype(\'O\'), \'n\': dtype(\'int64\')}, \'missing_values\': {\'applicants\': 0, \'n\': 0}, \'analysis_results\': {\'descriptive_stats\': {\'n\': {\'count\': 20.0, \'mean\': 5.75, \'std\': 2.7313964040009777, \'min\': 3.0, \'25%\': 4.0, \'50%\': 5.0, \'75%\': 7.25, \'max\': 14.0}}, \'correlations\': {\'n\': {\'n\': 1.0}}, \'missing_values\': {\'applicants\': 0, \'n\': 0}, \'unique_counts\': {\'applicants\': 20, \'n\': 8}, \'categorical_summaries\': {\'applicants\': {\'Procter & Gamble\': 1, \'3 In 1 Dental Pllc\': 1, \'Balwani Gul P\': 1, \'Alfa Biogene Int B V\': 1, \'Vital Solutions Swiss Ag\': 1, \'Univ Washington State\': 1, \'Univ Pretoria\': 1, \'Colgate Palmolive Co\': 1, \'Alfa Biogene Internat B V\': 1, \'Ionia Azure Ag\': 1, \'Hayashibara Co\': 1, \'Halliburton Energy Services Inc\': 1, \'Fujii Hajime\': 1, \'Buchwald-Werner Sybille\': 1, \'Warren Raphael\': 1, \'Undoo Llc\': 1, \'Senomyx Inc\': 1, \'Capsulent\': 1, \'Amino Up Chemical Co Ltd\': 1, \'Chan Jody Wai-Han\': 1}}, \'outliers\': {\'n\': 1}}, \'web_research\': []}  \n**Query Focus:** tell me somthing about the data  \n**Report Date:** [Current Date]  \n\n## **EXECUTIVE SUMMARY**  \n- This report presents key findings and their significance.  \n- The insights are analyzed in relation to industry trends, company behaviors, and economic implications.  \n- Notable patterns and unexpected results are highlighted.  \n\n## **REPORT CONTENTS**  \n\n### **I. DATASET OVERVIEW**  \n- The dataset\'s scope, purpose, and key attributes are outlined.  \n- The timeframe covered and any notable characteristics are detailed.  \n- Real-world context is provided, explaining the industries or entities represented and broader implications.  \n\n### **II. METHODOLOGY**  \n- The analytical approaches used are described.  \n- Statistical methods, models, or tools applied are listed.  \n- Data cleaning, transformations, and preprocessing steps are detailed.  \n\n### **III. KEY FINDINGS**  \n\n#### **A. Primary Insights**  \n- The most significant discoveries are summarized.  \n- Findings are supported with specific data points, percentages, and comparisons.  \n- The insights are linked to real-world contexts, specifying affected companies, sectors, or markets.  \n\n#### **B. Trends and Patterns**  \n- Overarching trends, recurring patterns, and anomalies are identified.  \n- Seasonal, cyclical, or geographic variations are highlighted.  \n- The relevance of these trends in business, economic, or technological contexts is analyzed.  \n\n### **IV. INDUSTRY CONTEXT**  \n- Findings are examined in relation to broader market or industry trends.  \n- Examples of real-world companies or organizations involved are included.  \n- For datasets like "pat_app" (patent applicants), the types of companies filing patents and their technological specializations are specified.  \n- Relevant external data points are incorporated to validate insights.  \n\n### **V. CONCLUSIONS**  \n- The most important takeaways are summarized.  \n- Actionable insights for decision-making are highlighted.  \n- Specific aspects of the original query are addressed with practical applications for businesses or policymakers.  \n\n'}, {'role': 'user', 'content': "Analyze the dataset 'pat_app.csv' in the context of the query: tell me somthing about the data.\n                            Include relevant insights from web research where applicable.\n                            Focus on connecting statistical findings with broader industry/research context."}], 'model': 'llama3-70b-8192', 'temperature': 0.7}}
2025-02-05 16:05:45 - groq._base_client - DEBUG - Sending HTTP Request: POST https://api.groq.com/openai/v1/chat/completions
2025-02-05 16:05:45 - httpcore.connection - DEBUG - close.started
2025-02-05 16:05:45 - httpcore.connection - DEBUG - close.complete
2025-02-05 16:05:45 - httpcore.connection - DEBUG - connect_tcp.started host='api.groq.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-02-05 16:05:45 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7897e746d310>
2025-02-05 16:05:45 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7898159200e0> server_hostname='api.groq.com' timeout=5.0
2025-02-05 16:05:45 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7897e743a990>
2025-02-05 16:05:45 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-05 16:05:45 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-05 16:05:45 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-05 16:05:45 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-05 16:05:45 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-05 16:05:47 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 05 Feb 2025 16:05:47 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Ray', b'90d424ce19e3856f-BOM'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Cache-Control', b'private, max-age=0, no-store, no-cache, must-revalidate'), (b'Vary', b'Origin, Accept-Encoding'), (b'Via', b'1.1 google'), (b'alt-svc', b'h3=":443"; ma=86400'), (b'x-groq-region', b'us-west-1'), (b'x-ratelimit-limit-requests', b'14400'), (b'x-ratelimit-limit-tokens', b'6000'), (b'x-ratelimit-remaining-requests', b'14399'), (b'x-ratelimit-remaining-tokens', b'5117'), (b'x-ratelimit-reset-requests', b'6s'), (b'x-ratelimit-reset-tokens', b'8.83s'), (b'x-request-id', b'req_01jkbdrfb5ehfbpc49tr6grzwc'), (b'Server', b'cloudflare'), (b'Content-Encoding', b'gzip')])
2025-02-05 16:05:47 - httpx - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2025-02-05 16:05:47 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-05 16:05:47 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-02-05 16:05:47 - httpcore.http11 - DEBUG - response_closed.started
2025-02-05 16:05:47 - httpcore.http11 - DEBUG - response_closed.complete
2025-02-05 16:05:47 - groq._base_client - DEBUG - HTTP Response: POST https://api.groq.com/openai/v1/chat/completions "200 OK" Headers({'date': 'Wed, 05 Feb 2025 16:05:47 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'cf-ray': '90d424ce19e3856f-BOM', 'cf-cache-status': 'DYNAMIC', 'cache-control': 'private, max-age=0, no-store, no-cache, must-revalidate', 'vary': 'Origin, Accept-Encoding', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=86400', 'x-groq-region': 'us-west-1', 'x-ratelimit-limit-requests': '14400', 'x-ratelimit-limit-tokens': '6000', 'x-ratelimit-remaining-requests': '14399', 'x-ratelimit-remaining-tokens': '5117', 'x-ratelimit-reset-requests': '6s', 'x-ratelimit-reset-tokens': '8.83s', 'x-request-id': 'req_01jkbdrfb5ehfbpc49tr6grzwc', 'server': 'cloudflare', 'content-encoding': 'gzip'})
2025-02-05 16:05:47 - root - INFO - Inference completed in 2.65s
2025-02-05 16:05:47 - root - INFO - Tokens used - Input: 926, Output: 661, Total: 1587
2025-02-05 16:05:47 - root - INFO - Processing speed - 597.97 tokens/second
2025-02-05 16:05:47 - utils.token_tracking - INFO - Adding usage to instance 132593825962064
2025-02-05 16:05:47 - utils.token_tracking - INFO - Adding new token usage entry - Model: llama3-70b-8192, Prompt ID: dynamic-prompt-data_analysis.txt
2025-02-05 16:05:47 - utils.token_tracking - INFO - Calculating costs using rates for model llama3-70b-8192
2025-02-05 16:05:47 - utils.token_tracking - INFO - Calculated costs - Prompt: $0.000648, Completion: $0.000463, Total: $0.001111
2025-02-05 16:05:47 - utils.token_tracking - INFO - Starting inference with model llama3-70b-8192 at 2025-02-05T16:05:47.684164
2025-02-05 16:05:47 - utils.token_tracking - INFO - Inference completed in 0.50s
2025-02-05 16:05:47 - utils.token_tracking - INFO - Tokens used - Input: 926, Output: 661, Total: 1,587
2025-02-05 16:05:47 - utils.token_tracking - INFO - Processing speed - 3174.00 tokens/second
2025-02-05 16:05:47 - utils.token_tracking - DEBUG - Created usage entry: TokenUsageEntry(timestamp='2025-02-05T16:05:47.684710', prompt_tokens=926, completion_tokens=661, model='llama3-70b-8192', prompt_id='dynamic-prompt-data_analysis.txt', cost=0.0011109000000000002, total_tokens=1587, processing_time=0.5, processing_speed=3174.0)
2025-02-05 16:05:47 - utils.token_tracking - INFO - Usage timeline updated - Current entries: 4 for instance 132593825962064
2025-02-05 16:05:47 - utils.token_tracking - INFO - Cumulative statistics updated - Total tokens: 3,197
2025-02-05 16:05:47 - utils.token_tracking - DEBUG - Timeline state after add: ['llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192', 'llama3-70b-8192']
2025-02-05 16:05:47 - utils.analysis_evaluator - INFO - Starting comprehensive analysis evaluation
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Starting numerical accuracy evaluation
2025-02-05 16:05:47 - utils.analysis_evaluator - INFO - Found 0 numerical calculations to evaluate
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Starting query understanding evaluation
2025-02-05 16:05:47 - utils.analysis_evaluator - INFO - Analyzing query with 6 unique terms
2025-02-05 16:05:47 - utils.analysis_evaluator - INFO - Term coverage: 66.67% (4/6)
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Analytical element 'methodology': Present
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Analytical element 'findings': Present
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Analytical element 'statistics': Present
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Analytical element 'data_reference': Present
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Starting data validation evaluation
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Validation check 'missing_data': Present
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Validation check 'outliers': Missing
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Validation check 'distribution': Present
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Validation check 'data_types': Present
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Starting reasoning transparency evaluation
2025-02-05 16:05:47 - utils.analysis_evaluator - INFO - Analyzing 33 sentences for reasoning transparency
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Transparency check 'explains_steps': Missing
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Transparency check 'states_assumptions': Missing
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Transparency check 'mentions_limitations': Missing
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Transparency check 'cites_evidence': Missing
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Transparency check 'has_conclusion': Missing
2025-02-05 16:05:47 - utils.analysis_evaluator - DEBUG - Transparency check 'has_examples': Missing
2025-02-05 16:05:47 - utils.analysis_evaluator - INFO - Average sentence length: 14.3 words
2025-02-05 16:05:47 - utils.analysis_evaluator - INFO - Numerical Accuracy score: 0.00%
2025-02-05 16:05:47 - utils.analysis_evaluator - INFO - Query Understanding score: 83.33%
2025-02-05 16:05:47 - utils.analysis_evaluator - INFO - Data Validation score: 75.00%
2025-02-05 16:05:47 - utils.analysis_evaluator - INFO - Reasoning Transparency score: 0.00%
2025-02-05 16:05:47 - utils.analysis_evaluator - INFO - Overall evaluation score: 39.58%
2025-02-05 16:05:47 - research_components.db - INFO - Storing analysis evaluation
2025-02-05 16:05:47 - research_components.db - INFO - Storing content result
2025-02-05 16:05:47 - research_components.db - INFO - Successfully stored content with ID: 33
2025-02-05 16:05:47 - research_components.db - INFO - Storing query trace
2025-02-05 16:05:47 - research_components.db - INFO - Closing database connection
